(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{"1Pql":function(t,e,s){"use strict";s.r(e);var a=s("vDqi"),i=s.n(a),l=s("dNjG"),r=s("dEiV"),c=s("Snq/"),o=s.n(c),n=s("+jP+"),d={props:{icon:{type:String,required:!0},statistic:{type:[Number,String],required:!0},statisticTitle:{type:String},color:{type:String,default:"primary"},type:{type:String,default:"line"},iconRight:{type:Boolean,default:!1}},methods:{},created:function(){}},u=s("KHd+"),v=Object(u.a)(d,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vx-card",{staticClass:"overflow-hidden"},[s("div",{attrs:{slot:"no-body"},slot:"no-body"},[s("div",{staticClass:"p-6",class:{"flex justify-between flex-row-reverse items-center":t.iconRight}},[s("feather-icon",{staticClass:"p-3 inline-flex rounded-full",class:["text-"+t.color,{"mb-4":!t.iconRight}],style:{background:"rgba(var(--vs-"+t.color+"),.15)"},attrs:{icon:t.icon}}),t._v(" "),s("div",[s("h2",{staticClass:"mb-1 font-bold"},[t._v(t._s(t.statistic))]),t._v(" "),s("span",[t._v(t._s(t.statisticTitle))])])],1)])])},[],!1,null,null,null).exports,p={props:{statisticTypes:{type:Array,default:function(){return[{label:this.$t("statistics.types.general"),slug:"general"},{label:this.$t("statistics.types.product"),slug:"product"},{label:this.$t("statistics.types.producent"),slug:"producent"}]}}},components:{VxCard:r.a,Datepicker:n.a,StatisticsCardNumber:v,vSelect:o.a},data:function(){return{statisticType:this.statisticTypes[0],statisticData:{grossSales:{value:"0",labelSlug:"grossSales",icon:"DollarSignIcon",onlyGeneral:!1},grossSalesDaily:{value:"0",labelSlug:"grossSalesDaily",icon:"DollarSignIcon",onlyGeneral:!1},netSales:{value:"0",labelSlug:"netSales",icon:"DollarSignIcon",onlyGeneral:!1},netSalesDaily:{value:"0",labelSlug:"netSalesDaily",icon:"DollarSignIcon",onlyGeneral:!1},ordersPlaced:{value:"0",labelSlug:"ordersPlaced",icon:"ShoppingBagIcon",onlyGeneral:!1},itemsPurchased:{value:"0",labelSlug:"itemsPurchased",icon:"ShoppingCartIcon",onlyGeneral:!1},couponsWorth:{value:"0",labelSlug:"couponsWorth",icon:"PercentIcon",onlyGeneral:!0},giftCardsWorth:{value:"0",labelSlug:"giftCardsWorth",icon:"GiftIcon",onlyGeneral:!0}},productsList:[],filter:{date:{start:"",end:""},productSearch:"",producentSearch:""},products:[],producents:[],API:l.a}},methods:{fetchData:function(){var t=this,e=this.convertDate(this.filter.date.start),s=this.convertDate(this.filter.date.end),a=this.statisticType,l={params:{start_date:e,end_date:s,type:a.slug}};"product"===a.slug&&(l.params.product_id=this.filter.productSearch),i.a.get("/dashboard/statistic/get",l).then(function(e){e.data.statistic&&t.setStatisticValues(e.data.statistic)})},downloadStatistics:function(){var t=this.convertDate(this.filter.date.start),e=this.convertDate(this.filter.date.end),s=this.statisticType,a={from:t,to:e};"product"===s.slug?a.product_id=this.filter.productSearch:"producent"===s.slug&&(a.producent_id=this.filter.producentSearch);i.a.post("/dashboard/order-items/download",a).then(function(s){var a=window.URL.createObjectURL(new Blob([s.data])),i=document.createElement("a");i.href=a;var l="statistics_"+t+"_"+e+".csv";i.setAttribute("download",l),document.body.appendChild(i),i.click()})},setStatisticValues:function(t){var e=this.statisticData;e.grossSales.value=t.grossSales,e.grossSalesDaily.value=t.grossSalesDaily,e.netSales.value=t.netSales,e.netSalesDaily.value=t.netSalesDaily,e.ordersPlaced.value=t.ordersPlaced,e.itemsPurchased.value=t.itemsPurchased,e.couponsWorth.value=t.couponsWorth,e.giftCardsWorth.value=t.giftcardWorth,this.productsList=t.productsList},setDefaultDates:function(){var t=new Date;t.setMonth(t.getMonth()-1);var e=new Date;this.filter.date.start=t,this.filter.date.end=e},getStatisticLabel:function(t){return this.$t("statistics."+t+".label")},changeStatisticType:function(t){this.statisticType=t},isHidden:function(t){if(this.statisticType!==this.statisticTypes[0]&&t)return!0},searchProducts:function(t,e){var s={params:{search:t}};this.products=this.loadItems("product",s)},searchProducents:function(t,e){var s={params:{search:t}};this.producents=this.loadItems("producent",s)}},created:function(){this.setDefaultDates()},mounted:function(){this.fetchData()}},h=Object(u.a)(p,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full mb-6"},[s("h3",{staticClass:"mb-3"},[t._v(t._s(t.$t("statistics.pageTitle")))]),t._v(" "),s("vs-dropdown",[s("a",{staticClass:"flex items-center",attrs:{href:"#"}},[t._v("\n\t\t\t\t"+t._s(t.statisticType.label)+"\n\t\t\t\t"),s("i",{staticClass:"material-icons"},[t._v(" expand_more ")])]),t._v(" "),s("vs-dropdown-menu",t._l(t.statisticTypes,function(e,a){return s("vs-dropdown-item",{key:a,on:{click:function(s){return t.changeStatisticType(e)}}},[t._v("\n\t\t\t\t\t"+t._s(e.label)+"\n\t\t\t\t")])}),1)],1)],1),t._v(" "),s("div",{staticClass:"vx-col w-full mb-6"},[s("vx-card",[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col flex items-center"},[s("datepicker",{attrs:{placeholder:"Select date",format:"dd.MM.yyyy"},model:{value:t.filter.date.start,callback:function(e){t.$set(t.filter.date,"start",e)},expression:"filter.date.start"}})],1),t._v(" "),s("div",{staticClass:"vx-col flex items-center px-1"},[s("i",{staticClass:"material-icons"},[t._v(" remove ")])]),t._v(" "),s("div",{staticClass:"vx-col flex items-center"},[s("datepicker",{attrs:{placeholder:"Select date",format:"dd.MM.yyyy"},model:{value:t.filter.date.end,callback:function(e){t.$set(t.filter.date,"end",e)},expression:"filter.date.end"}})],1),t._v(" "),"product"===t.statisticType.slug?s("div",{staticClass:"vx-col flex flex-1 items-center"},[s("v-select",{staticClass:"w-full",attrs:{label:"title",options:t.products,reduce:function(t){return t.id},placeholder:t.$t("statistics.searchPlaceholder")},on:{search:t.searchProducts},model:{value:t.filter.productSearch,callback:function(e){t.$set(t.filter,"productSearch",e)},expression:"filter.productSearch"}})],1):t._e(),t._v(" "),"producent"===t.statisticType.slug?s("div",{staticClass:"vx-col flex flex-1 items-center"},[s("v-select",{staticClass:"w-full",attrs:{label:"title",options:t.producents,reduce:function(t){return t.id},placeholder:t.$t("statistics.searchPlaceholder")},on:{search:t.searchProducents},model:{value:t.filter.producentSearch,callback:function(e){t.$set(t.filter,"producentSearch",e)},expression:"filter.producentSearch"}})],1):t._e(),t._v(" "),s("div",{staticClass:"vx-col"},[s("vs-button",{staticClass:"mr-6",on:{click:t.fetchData}},[t._v(t._s(t.$t("actions.filter")))]),t._v(" "),s("vs-button",{attrs:{type:"border"},on:{click:t.downloadStatistics}},[t._v(t._s(t.$t("actions.download")))])],1)])])],1),t._v(" "),t._l(t.statisticData,function(e,a){return s("div",{key:a,staticClass:"vx-col w-1/4 mb-6"},[t.isHidden(e.onlyGeneral)?t._e():s("statistics-card-number",{attrs:{icon:e.icon,statistic:e.value,statisticTitle:t.getStatisticLabel(e.labelSlug)}})],1)}),t._v(" "),"general"===t.statisticType.slug?s("div",{staticClass:"vx-col w-full mb-6"},[s("vx-card",[s("vs-table",{attrs:{search:"",data:t.productsList,noDataText:t.$t("messages.notFound")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,function(e,i){return s("vs-tr",{key:i,attrs:{data:e}},[s("vs-td",{attrs:{data:a[i].title}},[s("a",{attrs:{href:t.API.product.show+a[i].slug}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a[i].title)+"\n\t\t\t\t\t\t\t")])]),t._v(" "),s("vs-td",{attrs:{data:a[i].producent.title}},[s("router-link",{attrs:{to:{name:"producents_edit",params:{id:a[i].producent.id}}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a[i].producent.title)+"\n\t\t\t\t\t\t\t")])],1),t._v(" "),s("vs-td",{attrs:{data:a[i].sold_quantity}},[t._v("\n\t\t\t\t\t\t\t"+t._s(a[i].sold_quantity)+"\n\t\t\t\t\t\t")]),t._v(" "),s("vs-td",{attrs:{data:a[i].sold_total}},[t._v("\n\t\t\t\t\t\t\t"+t._s(a[i].sold_total+" "+t.applicationParams.defaultCurrency)+"\n\t\t\t\t\t\t")])],1)})}}],null,!1,815770278)},[s("template",{slot:"header"},[s("div",{staticClass:"vx-row w-full pb-3 m-0"},[s("div",{staticClass:"vx-col flex items-center w-1/2 p-0"},[s("h3",{staticClass:"mb-0 mr-3"},[t._v("\n\t\t\t\t\t\t\t\tProducts sold in the period\n\t\t\t\t\t\t\t")])])])]),t._v(" "),s("template",{slot:"thead"},[s("vs-th",{attrs:{"sort-key":"title"}},[t._v("Product")]),t._v(" "),s("vs-th",[t._v("Producent")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"sold_quantity"}},[t._v("Items sold")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"sold_total"}},[t._v("Total")])],1)],2)],1)],1):t._e()],2)},[],!1,null,null,null);e.default=h.exports}}]);
//# sourceMappingURL=43.js.map