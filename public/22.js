(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"/u9t":function(t,e,s){"use strict";var o=s("dNjG"),n=s("zuR4"),i={props:{},data:function(){return{instance:"",items:[],per_page:20,pagination:{currentPage:1,nextPageUrl:"",totalPages:1},search:"",sortKey:"",sortOrder:"",API:o.a}},watch:{"pagination.currentPage":function(t,e){this.getItems()},search:function(){this.getItems()}},methods:{setInstance:function(t){this.instance=t},getItems:function(t){var e=this,s=this.instance,o={params:{per_page:this.per_page,sort_key:"created_at",sort_order:"desc"}};void 0!==t&&(o.params=t),""!==this.search&&(o.params.search=this.search,this.pagination.currentPage=1);var i=this.API[s].list,a=this.pagination.currentPage;""!==this.pagination.nextPageUrl&&""===this.search&&(i=i+"?page="+a),n.a.get(i,o).then((function(t){e.items=t.data.data,e.pagination.nextPageUrl=t.data.next_page_url,e.pagination.totalPages=t.data.last_page}))},handleSort:function(t,e){var s={sort_key:t,sort_order:e?"desc":"asc"};this.getItems(s)},deleteItem:function(t){var e=this,s=this.instance;n.a.delete(this.API[s].delete+"/"+t).then((function(t){"success"===t.data&&(e.showNotification("success","request.deletedSuccess","success"),e.getItems())})).catch((function(t){e.showNotification("error","request.error","danger")}))},getTableTitle:function(){return this.$t("tables."+this.instance+".title")},getColumnTitle:function(t){return this.$t("models."+this.instance+".properties."+t)},getPropertyTitle:function(t){return this.$t("models."+this.instance+".properties."+t)},convertDate:function(t){var e=new Date(t),s=e.getDate(),o=e.getMonth()+1;return s<10&&(s="0"+s),o<10&&(o="0"+o),s+"."+o+"."+e.getFullYear()},showNotification:function(t,e,s,o,n){var i="",a=1;n&&(a=2),i=o?this.$tc("models."+o+".title",a):this.$tc("models."+this.instance+".title",a);var r=this.$t("messages."+t),c=this.$tc("messages."+e,a,{instance:i});this.$vs.notify({title:r,text:c,color:s})},showDeleteAlert:function(t){var e=this.deleteItem.bind(null,t),s=this.$tc("models."+this.instance+".title",1),o=this.$t("messages.confirmation.delete",{instance:s});this.$vs.dialog({color:"primary",title:"Confirm",text:o,accept:e})}},mounted:function(){}};e.a=i},"5HYW":function(t,e,s){"use strict";s("EP4G")},DvXq:function(t,e,s){"use strict";s.r(e);var o=s("zuR4"),n=s("/u9t"),i={components:{Datepicker:s("+jP+").a},mixins:[n.a],data:function(){return{instance:"newsletterSubscription",instanceSlug:"subscriptions",downloadSubscriptionsPopup:{active:!1,from:new Date,to:new Date}}},methods:{showSubscriptionsPopup:function(){this.downloadSubscriptionsPopup.active=!0},downloadSubscriptions:function(){var t={from:this.convertDate(this.downloadSubscriptionsPopup.from),to:this.convertDate(this.downloadSubscriptionsPopup.to)};Object(o.a)({method:"post",url:"/dashboard/subscriptions/download",responseType:"blob"},t).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=e,s.setAttribute("download","newsletter_subscriptions.csv"),document.body.appendChild(s),s.click()}))}},created:function(){this.setInstance(this.instance)},mounted:function(){this.getItems()}},a=(s("5HYW"),s("KHd+")),r=Object(a.a)(i,(function(){var t=this,e=t._self._c;return e("div",[e("vs-table",{attrs:{"max-items":t.per_page,sst:!0,data:t.items,noDataText:t.$t("messages.notFound")},on:{sort:t.handleSort},scopedSlots:t._u([{key:"default",fn:function(s){var o=s.data;return t._l(o,(function(s,o){return e("vs-tr",{key:o},[e("vs-td",[e("span",{staticClass:"text-sm"},[t._v(t._s(s.email))])]),t._v(" "),e("vs-td",[e("vs-button",{attrs:{color:"danger",icon:"delete"},on:{click:function(e){return t.showDeleteAlert(s.id)}}})],1)],1)}))}}])},[e("template",{slot:"header"},[e("div",{staticClass:"vx-row w-full pb-3 m-0"},[e("div",{staticClass:"vx-col flex items-center w-1/2 p-0"},[e("h3",{staticClass:"mb-0 mr-3"},[t._v("\n                        "+t._s(t.getTableTitle())+"\n                    ")]),t._v(" "),e("vs-button",{on:{click:t.showSubscriptionsPopup}},[t._v(t._s(t.$t("actions.export")))])],1),t._v(" "),e("div",{staticClass:"vx-col flex items-center justify-end w-1/2 p-0"},[e("vs-input",{staticClass:"w-full",attrs:{icon:"search",placeholder:t.$t("actions.search")},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)])]),t._v(" "),e("template",{slot:"thead"},[e("vs-th",{attrs:{"sort-key":"email"}},[t._v("\n                "+t._s(t.getColumnTitle("email"))+"\n            ")]),t._v(" "),e("vs-th",[t._v("\n                "+t._s(t.getColumnTitle("actions"))+"\n            ")])],1)],2),t._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col flex justify-end items-center w-full p-3"},[e("vs-pagination",{attrs:{total:t.pagination.totalPages},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)]),t._v(" "),e("vs-popup",{attrs:{title:t.$t("modals.downloadSubscriptions.title"),active:t.downloadSubscriptionsPopup.active},on:{"update:active":function(e){return t.$set(t.downloadSubscriptionsPopup,"active",e)}}},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-1/2 mb-3 overflow-visible"},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.$t("modals.downloadSubscriptions.properties.from")))]),t._v(" "),e("datepicker",{attrs:{format:"dd.MM.yy"},model:{value:t.downloadSubscriptionsPopup.from,callback:function(e){t.$set(t.downloadSubscriptionsPopup,"from",e)},expression:"downloadSubscriptionsPopup.from"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-1/2 mb-3 overflow-visible"},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.$t("modals.downloadSubscriptions.properties.to")))]),t._v(" "),e("datepicker",{attrs:{format:"dd.MM.yy"},model:{value:t.downloadSubscriptionsPopup.to,callback:function(e){t.$set(t.downloadSubscriptionsPopup,"to",e)},expression:"downloadSubscriptionsPopup.to"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-full"},[e("vs-button",{on:{click:t.downloadSubscriptions}},[t._v(t._s(t.$t("actions.download")))])],1)])])],1)}),[],!1,null,null,null);e.default=r.exports},EP4G:function(t,e,s){var o=s("cVJB");"string"==typeof o&&(o=[[t.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(o,n);o.locals&&(t.exports=o.locals)},cVJB:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,".vs-popup--content{overflow:visible}",""])}}]);
//# sourceMappingURL=22.js.map