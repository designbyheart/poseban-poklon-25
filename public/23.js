(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"/u9t":function(t,e,s){"use strict";var a=s("dNjG"),o=s("vDqi"),n=s.n(o),i={props:{},data:function(){return{instance:"",items:[],per_page:20,pagination:{currentPage:1,nextPageUrl:"",totalPages:1},search:"",sortKey:"",sortOrder:"",API:a.a}},watch:{"pagination.currentPage":function(t,e){this.getItems()},search:function(){this.getItems()}},methods:{setInstance:function(t){this.instance=t},getItems:function(t){var e=this,s=this.instance,a={params:{per_page:this.per_page,sort_key:"created_at",sort_order:"desc"}};void 0!==t&&(a.params=t),""!==this.search&&(a.params.search=this.search,this.pagination.currentPage=1);var o=this.API[s].list,i=this.pagination.currentPage;""!==this.pagination.nextPageUrl&&""===this.search&&(o=o+"?page="+i),n.a.get(o,a).then(function(t){e.items=t.data.data,e.pagination.nextPageUrl=t.data.next_page_url,e.pagination.totalPages=t.data.last_page})},handleSort:function(t,e){var s={sort_key:t,sort_order:e?"desc":"asc"};this.getItems(s)},deleteItem:function(t){var e=this,s=this.instance;n.a.delete(this.API[s].delete+"/"+t).then(function(t){"success"===t.data&&(e.showNotification("success","request.deletedSuccess","success"),e.getItems())}).catch(function(t){e.showNotification("error","request.error","danger")})},getTableTitle:function(){return this.$t("tables."+this.instance+".title")},getColumnTitle:function(t){return this.$t("models."+this.instance+".properties."+t)},getPropertyTitle:function(t){return this.$t("models."+this.instance+".properties."+t)},convertDate:function(t){var e=new Date(t),s=e.getDate(),a=e.getMonth()+1;return s<10&&(s="0"+s),a<10&&(a="0"+a),s+"."+a+"."+e.getFullYear()},showNotification:function(t,e,s,a,o){var n="",i=1;o&&(i=2),n=a?this.$tc("models."+a+".title",i):this.$tc("models."+this.instance+".title",i);var r=this.$t("messages."+t),c=this.$tc("messages."+e,i,{instance:n});this.$vs.notify({title:r,text:c,color:s})},showDeleteAlert:function(t){var e=this.deleteItem.bind(null,t),s=this.$tc("models."+this.instance+".title",1),a=this.$t("messages.confirmation.delete",{instance:s});this.$vs.dialog({color:"primary",title:"Confirm",text:a,accept:e})}},mounted:function(){}};e.a=i},"1XjX":function(t,e,s){"use strict";var a=s("Q1fg");s.n(a).a},Q1fg:function(t,e,s){var a=s("aqXo");"string"==typeof a&&(a=[[t.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,o);a.locals&&(t.exports=a.locals)},aqXo:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,"\n.vs-popup--content{\n\n    overflow: visible;\n}\n\n",""])},tvrC:function(t,e,s){"use strict";s.r(e);var a=s("vDqi"),o=s.n(a),n=s("/u9t"),i={components:{Datepicker:s("+jP+").a},mixins:[n.a],data:function(){return{instance:"user",instanceSlug:"users",userPopup:{active:!1,data:[]},downloadUsersPopup:{active:!1,from:new Date,to:new Date},roles:[{id:1,name:"user"},{id:2,name:"admin"},{id:3,name:"editor"}],statuses:[{value:!0,slug:"active"},{value:!1,slug:"suspended"}]}},methods:{showUserPopup:function(t){this.userPopup.data=Object.assign({},t),this.userPopup.active=!0},changeUserRole:function(t,e){var s=this.API.user.changeRole,a={user:t,role:e};o.a.post(s,a)},changeUserStatus:function(t){var e=this.API.user.changeStatus,s={user:t};o.a.post(e,s)},updateUser:function(){var t=this.userPopup.data,e=t.user_role_id,s=t.status,a=this.items.find(function(e){return e.id===t.id});if(void 0!==a)try{e!==a.user_role_id&&this.changeUserRole(t.id,e),s!=a.status&&this.changeUserStatus(t.id),this.showNotification("success","request.updatedSuccess","success"),this.getItems()}catch(t){this.showNotification("error","request.error","danger")}},isCurrentUser:function(t){return t===this.applicationParams.user.id},showDownloadPopup:function(){this.downloadUsersPopup.active=!0},downloadUsers:function(){var t={from:this.convertDate(this.downloadUsersPopup.from),to:this.convertDate(this.downloadUsersPopup.to)};o()({method:"post",url:"/dashboard/users/download",responseType:"blob"},t).then(function(t){var e=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=e,s.setAttribute("download","users.csv"),document.body.appendChild(s),s.click()})}},created:function(){this.setInstance(this.instance)},mounted:function(){this.getItems()}},r=(s("1XjX"),s("KHd+")),c=Object(r.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vs-table",{attrs:{"max-items":t.per_page,sst:!0,data:t.items,noDataText:t.$t("messages.notFound")},on:{sort:t.handleSort},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,function(e,a){return s("vs-tr",{key:a,class:[t.isCurrentUser(e.id)?"font-bold":""]},[s("vs-td",[t._v("\n                    "+t._s(e.name)+"\n                ")]),t._v(" "),s("vs-td",[t._v("\n                    "+t._s(e.email)+"\n                ")]),t._v(" "),s("vs-td",[t._v("\n                    "+t._s(e.role.name)+"\n                ")]),t._v(" "),s("vs-td",[e.status?s("vs-icon",{attrs:{icon:"check",color:"success",size:"medium"}}):s("vs-icon",{attrs:{icon:"close",color:"danger",size:"medium"}})],1),t._v(" "),s("vs-td",[t.isCurrentUser(e.id)?t._e():s("div",{staticClass:"flex"},[s("vs-button",{staticClass:"mr-2",attrs:{icon:"edit"},on:{click:function(s){return t.showUserPopup(e)}}}),t._v(" "),s("vs-button",{attrs:{color:"danger",icon:"delete"},on:{click:function(s){return t.showDeleteAlert(e.id)}}})],1)])],1)})}}])},[s("template",{slot:"header"},[s("div",{staticClass:"vx-row w-full pb-3 m-0"},[s("div",{staticClass:"vx-col flex items-center w-1/2 p-0"},[s("h3",{staticClass:"mb-0 mr-3"},[t._v("\n                        "+t._s(t.getTableTitle())+"\n                    ")]),t._v(" "),s("vs-button",{on:{click:t.showDownloadPopup}},[t._v(t._s(t.$t("actions.export")+" "+t.$tc("models.user.title",2)))])],1),t._v(" "),s("div",{staticClass:"vx-col flex items-center justify-end w-1/2 p-0"},[s("vs-input",{staticClass:"w-full",attrs:{icon:"search",placeholder:t.$t("actions.search")},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)])]),t._v(" "),s("template",{slot:"thead"},[s("vs-th",{attrs:{"sort-key":"name"}},[t._v("\n                "+t._s(t.getPropertyTitle("name"))+"\n            ")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"email"}},[t._v("\n                "+t._s(t.getPropertyTitle("email"))+"\n            ")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"user_role_id"}},[t._v("\n                "+t._s(t.getPropertyTitle("role"))+"\n            ")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"status"}},[t._v("\n                "+t._s(t.getPropertyTitle("status"))+"\n            ")]),t._v(" "),s("vs-th",[t._v("\n                "+t._s(t.$t("actions.title"))+"\n            ")])],1)],2),t._v(" "),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col flex justify-end items-center w-full p-3"},[s("vs-pagination",{attrs:{total:t.pagination.totalPages},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)]),t._v(" "),s("vs-popup",{attrs:{title:t.$t("actions.edit")+" "+t.$tc("models.user.title",1),active:t.userPopup.active},on:{"update:active":function(e){return t.$set(t.userPopup,"active",e)}}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-1/2 mb-3"},[s("p",{staticClass:"font-bold text-sm mb-2"},[t._v(t._s(t.getPropertyTitle("name")))]),t._v(" "),s("p",[t._v(t._s(t.userPopup.data.name))])]),t._v(" "),s("div",{staticClass:"vx-col w-1/2 mb-3"},[s("p",{staticClass:"font-bold text-sm mb-2"},[t._v(t._s(t.getPropertyTitle("email")))]),t._v(" "),s("p",[t._v(t._s(t.userPopup.data.email))])]),t._v(" "),t.userPopup.active?s("div",{staticClass:"vx-col w-1/2 mb-3"},[s("p",{staticClass:"font-bold text-sm mb-2"},[t._v(t._s(t.getPropertyTitle("role")))]),t._v(" "),s("vs-select",{attrs:{"is-selected":t.userPopup.data.user_role_id},on:{"update:isSelected":function(e){return t.$set(t.userPopup.data,"user_role_id",e)},"update:is-selected":function(e){return t.$set(t.userPopup.data,"user_role_id",e)}},model:{value:t.userPopup.data.user_role_id,callback:function(e){t.$set(t.userPopup.data,"user_role_id",e)},expression:"userPopup.data.user_role_id"}},t._l(t.roles,function(t,e){return s("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})}),1)],1):t._e(),t._v(" "),t.userPopup.active?s("div",{staticClass:"vx-col w-1/2 mb-3"},[s("p",{staticClass:"font-bold text-sm mb-2"},[t._v(t._s(t.getPropertyTitle("status")))]),t._v(" "),s("vs-select",{attrs:{"is-selected":t.userPopup.data.status},on:{"update:isSelected":function(e){return t.$set(t.userPopup.data,"status",e)},"update:is-selected":function(e){return t.$set(t.userPopup.data,"status",e)}},model:{value:t.userPopup.data.status,callback:function(e){t.$set(t.userPopup.data,"status",e)},expression:"userPopup.data.status"}},t._l(t.statuses,function(e,a){return s("vs-select-item",{key:a,attrs:{value:e.value,text:t.getPropertyTitle("statuses."+e.slug)}})}),1)],1):t._e(),t._v(" "),s("div",{staticClass:"vx-col w-full"},[s("vs-button",{on:{click:t.updateUser}},[t._v(t._s(t.$t("actions.update")))])],1)])]),t._v(" "),s("vs-popup",{attrs:{title:t.$t("modals.downloadUsers.title"),active:t.downloadUsersPopup.active},on:{"update:active":function(e){return t.$set(t.downloadUsersPopup,"active",e)}}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-1/2 mb-3 overflow-visible"},[s("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.$t("modals.downloadUsers.properties.from")))]),t._v(" "),s("datepicker",{attrs:{format:"dd.MM.yy"},model:{value:t.downloadUsersPopup.from,callback:function(e){t.$set(t.downloadUsersPopup,"from",e)},expression:"downloadUsersPopup.from"}})],1),t._v(" "),s("div",{staticClass:"vx-col w-1/2 mb-3 overflow-visible"},[s("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.$t("modals.downloadUsers.properties.to")))]),t._v(" "),s("datepicker",{attrs:{format:"dd.MM.yy"},model:{value:t.downloadUsersPopup.to,callback:function(e){t.$set(t.downloadUsersPopup,"to",e)},expression:"downloadUsersPopup.to"}})],1),t._v(" "),s("div",{staticClass:"vx-col w-full"},[s("vs-button",{on:{click:t.downloadUsers}},[t._v(t._s(t.$t("actions.download")))])],1)])])],1)},[],!1,null,null,null);e.default=c.exports}}]);
//# sourceMappingURL=23.js.map