(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"5jC+":function(t,e,s){"use strict";s("9vlm")},"9vlm":function(t,e,s){var o=s("d6o1");"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(o,r);o.locals&&(t.exports=o.locals)},HjUk:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var o=s("XuX8"),r=new(s.n(o).a);e.b=r},PBQz:function(t,e,s){"use strict";s.r(e);var o=s("zuR4"),r=s("vfHp"),a=s("Snq/"),i=s.n(a),c={mixins:[r.a],components:{vSelect:i.a},props:{formModel:{type:String,default:"order"},indexRoute:{type:String,default:"orders"}},data:function(){return{order:{},getOrderComplete:!1,orderForm:{},orderItems:[],orderStatuses:[],editDetails:!1,shippingMethods:[],paymentMethods:[],itemPopup:{active:!1,data:{}},itemForm:{active:!1,data:{}},itemModel:{order_id:"",product_id:"",product_quantity:1,personal_message:[{text:""}]},voucherPopup:{active:!1,data:{title:"",description:"",personal_message:"",additional_info:"",location:"",duration:"",visitors:"",dress_code:"",weather:"",voucher_code:""}},sendVoucherPopup:{active:!1,data:{id:null,customer_email:"",paper:""},paperOptions:[{name:"A4",value:"a4"},{name:"A5",value:"a5"}]},defaultCurrency:applicationParams.defaultCurrency}},methods:{getOrder:function(){var t=this,e={params:{id:this.$route.params.id}},s=this.API[this.instance].single;o.a.get(s,e).then((function(e){t.order=e.data,t.setOrderForm(),t.orderItems=t.order.items,t.itemPopup.active&&t.updateItemPopupData()}))},updateOrder:function(){var t=this;this.editDetails=!1,this.orderForm.created_at=this.convertDate(this.orderForm.created_at);var e=this.$route.params.id,s=this.API[this.instance].update+"/"+e,r=this.orderForm;o.a.put(s,r).then((function(e){"success"===e.data&&(t.showNotification("success","request.updatedSuccess","success"),t.getOrder())})).catch((function(e){t.showNotification("error","request.error","danger")}))},deleteOrder:function(){var t=this,e=this.$route.params.id,s=this.API[this.instance].delete+"/"+e;o.a.delete(s).then((function(e){"success"===e.data&&(t.showNotification("success","request.deletedSuccess","success"),t.returnToIndex())})).catch((function(e){t.showNotification("error","request.error","danger")}))},setOrderForm:function(){var t=this,e={customer_name:this.order.customer_name,customer_surname:this.order.customer_surname,customer_email:this.order.customer_email,customer_phone:this.order.customer_phone,rec_email:this.order.rec_email,rec_name:this.order.rec_name,rec_surname:this.order.rec_surname,rec_phone:this.order.rec_phone,address_one:this.order.address_one,address_two:this.order.address_two,city:this.order.city,zip_code:this.order.zip_code,country:this.order.country,comment:this.order.comment,created_at:this.convertDate(this.order.created_at),order_status_id:this.order.order_status_id,shipping_method_id:this.order.shipping_method_id,payment_method_id:this.order.payment_method_id};this.orderForm=e,this.$nextTick((function(){t.getOrderComplete=!0}))},editOrderDetails:function(){this.editDetails?this.editDetails=!1:this.editDetails=!0},billingDetails:function(){var t="",e=this.order;return null!==e.customer_name&&(t+=e.customer_name+" "),null!==e.customer_surname&&(t+=e.customer_surname),null!==e.customer_phone&&(t+=", "+e.customer_phone),null!==e.customer_email&&(t+=", "+e.customer_email),t},createItem:function(){var t=this,e=this.API.orderItem.create,s=this.itemForm.data;if(s.personal_message.length<s.product_quantity)for(var r=s.personal_message.length;r<s.product_quantity;r++)s.personal_message.push({text:""});s.personal_message=JSON.stringify(s.personal_message),o.a.post(e,s).then((function(e){"success"===e.data&&(t.showNotification("success","request.addedSuccess","success","orderItem"),t.itemForm.active=!1,t.getOrder())})).catch((function(e){t.showNotification("error","request.error","danger")}))},editItem:function(t){this.itemPopup.data=this.orderItems[t],this.itemPopup.data.personal_message=JSON.parse(this.itemPopup.data.personal_message),this.itemPopup.active=!0},updateItem:function(){var t=this,e=Object.assign({},this.itemPopup.data),s=e.id;this.normalizeMessagesQuantity(e),e.personal_message=JSON.stringify(e.personal_message);var r=this.API.orderItem.update+"/"+s,a=e;o.a.put(r,a).then((function(e){"success"===e.data&&(t.showNotification("success","request.updatedSuccess","success","orderItem"),t.getOrder())})).catch((function(e){t.showNotification("error","request.error","danger")}))},deleteItem:function(t){var e=this,s=this.API.orderItem.delete+"/"+t;o.a.delete(s).then((function(t){"success"===t.data&&(e.showNotification("success","request.deletedSuccess","success","orderItem"),e.itemPopup.active&&(e.itemPopup.active=!1),e.getOrder())})).catch((function(t){e.showNotification("error","request.error","danger")}))},normalizeMessagesQuantity:function(t){if(t.personal_message.length>t.product_quantity){var e=t.personal_message.length-t.product_quantity,s=t.product_quantity-1;t.personal_message.splice(s,e)}else if(t.personal_message.length<t.product_quantity)for(var o=t.product_quantity-t.personal_message.length,r=0;r<o;r++)t.personal_message.push({text:""})},showItemForm:function(){this.setItemForm(),this.itemForm.data.order_id=this.$route.params.id,this.getProducts(),this.itemForm.active=!0},setItemForm:function(){this.itemForm.data=Object.assign({},this.itemModel)},updateItemPopupData:function(){var t=this.itemPopup,e=this.order.items.find((function(e){return e.id===t.data.id}));this.itemPopup.data=Object.assign({},e),this.itemPopup.data.personal_message=JSON.parse(e.personal_message)},showVoucherForm:function(t){var e=this.itemPopup.data.vouchers.find((function(e){return e.id===t}));this.setVoucherForm(e),this.voucherPopup.active=!0},setVoucherForm:function(t){this.voucherPopup.data.id=t.id,this.voucherPopup.data.order_item_id=t.order_item_id,this.voucherPopup.data.title=t.title,this.voucherPopup.data.description=t.description,this.voucherPopup.data.personal_message=t.personal_message,this.voucherPopup.data.additional_info=t.additional_info,this.voucherPopup.data.location=t.location,this.voucherPopup.data.visitors=t.visitors,this.voucherPopup.data.duration=t.duration,this.voucherPopup.data.dress_code=t.dress_code,this.voucherPopup.data.za_gledaoce=t.za_gledaoce,this.voucherPopup.data.weather=t.weather,this.voucherPopup.data.voucher_code=t.voucher_code},updateVoucher:function(){var t=this,e=this.voucherPopup.data,s=e.id,r=this.API.voucher.update+"/"+s,a=e;o.a.put(r,a).then((function(e){"success"===e.data&&(t.showNotification("success","request.updatedSuccess","success","voucher"),t.voucherPopup.active=!1,t.getOrder())})).catch((function(e){t.showNotification("error","request.error","danger")}))},generateVouchers:function(){var t=this,e=this.$route.params.id,s=this.API.voucher.generate,r={order_id:e};o.a.post(s,r).then((function(e){"success"===e.data&&(t.showNotification("success","request.generatedSuccess","success","voucher"),t.getOrder())})).catch((function(e){t.showNotification("error","request.error","danger")}))},deleteVoucher:function(t){var e=this,s=this.API.voucher.delete+"/"+t;o.a.delete(s).then((function(s){if("success"===s.data){e.showNotification("success","request.deletedSuccess","success","voucher");var o=e.itemPopup.data.vouchers.find((function(e){return e.id===t})),r=e.itemPopup.data.vouchers.indexOf(o);e.itemPopup.data.vouchers.splice(r,1),e.getOrder()}})).catch((function(t){e.showNotification("error","request.error","danger")}))},printVoucherLink:function(t,e){return this.API.voucher.print+"/"+t+"?paper_size="+e},returnToIndex:function(){var t=this;setTimeout((function(){t.redirectToIndex(t.indexRoute),t.setModel()}),500)},showDeleteAlert:function(t,e){var s={order:this.deleteOrder.bind(null),orderItem:this.deleteItem.bind(null,e),voucher:this.deleteVoucher.bind(null,e)},o=this.$tc("models."+t+".title",1),r=this.$t("messages.confirmation.delete",{instance:o});this.$vs.dialog({color:"primary",title:"Confirm",text:r,accept:s[t]})},showSendPopup:function(t){this.sendVoucherPopup.data.voucher_id=t,this.sendVoucherPopup.data.customer_email=this.order.rec_email,this.sendVoucherPopup.data.paper=this.sendVoucherPopup.paperOptions[0].value,this.sendVoucherPopup.active=!0},sendVoucher:function(){var t=this,e=this.API.voucher.send,s=this.sendVoucherPopup.data;o.a.post(e,s).then((function(e){"success"===e.data&&t.showNotification("success","request.sentSuccess","success")})).catch((function(e){t.showNotification("error","request.error","danger")}))}},mounted:function(){this.getOrder(),this.getOrderStatuses(),this.getShippingMethods(),this.getPaymentMethods()},created:function(){this.setInstance(this.formModel)}},n=(s("5jC+"),s("KHd+")),l=Object(n.a)(c,(function(){var t=this,e=t._self._c;return t.getOrderComplete?e("div",[e("vx-card",{staticClass:"mb-3",attrs:{noShadow:"",cardBorder:""}},[e("div",{staticClass:"vx-row w-full py-2 mb-3"},[e("div",{staticClass:"vx-col w-1/2 flex items-center"},[e("h3",{staticClass:"mr-3"},[t._v("\n                    "+t._s(t.$t("forms.order.titles.edit",{number:t.order.id}))+"\n                ")]),t._v(" "),t.editDetails?t._e():e("vs-button",{staticClass:"mr-3",attrs:{icon:"edit",size:"small"},on:{click:function(e){return t.editOrderDetails()}}},[t._v(t._s(t.$t("actions.edit")))]),t._v(" "),t.editDetails?e("vs-button",{staticClass:"mr-3",attrs:{icon:"clear",size:"small",color:"danger"},on:{click:function(e){return t.editOrderDetails()}}},[t._v(t._s(t.$t("actions.cancel")))]):t._e(),t._v(" "),e("vs-button",{attrs:{type:"border",size:"small",color:"danger",to:{name:"orders"}}},[t._v(t._s(t.$t("actions.back")))])],1),t._v(" "),e("div",{staticClass:"vx-col w-1/2 flex items-center justify-end"},[e("vs-button",{attrs:{size:"small",color:"danger",icon:"delete"},on:{click:function(e){return t.showDeleteAlert("order")}}},[t._v(t._s(t.$t("actions.delete")))])],1)]),t._v(" "),e("div",{staticClass:"vx-row w-full"},[e("div",{staticClass:"vx-col w-1/3"},[e("p",{staticClass:"font-bold mb-3"},[t._v(t._s(t.$t("forms.order.sections.general")))]),t._v(" "),e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("date")))]),t._v(" "),t.editDetails?t._e():e("p",[t._v("\n                        "+t._s(t.convertDate(t.order.created_at,"d/m/y","."))+"\n                    ")]),t._v(" "),t.editDetails?e("datepicker",{attrs:{format:"dd.MM.yyyy"},model:{value:t.orderForm.created_at,callback:function(e){t.$set(t.orderForm,"created_at",e)},expression:"orderForm.created_at"}}):t._e()],1),t._v(" "),e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("status")))]),t._v(" "),!t.editDetails&&t.order.status?e("p",[t._v("\n                        "+t._s(t.order.status.title)+"\n                    ")]):t._e(),t._v(" "),t.editDetails?e("vs-select",{staticClass:"w-full",model:{value:t.orderForm.order_status_id,callback:function(e){t.$set(t.orderForm,"order_status_id",e)},expression:"orderForm.order_status_id"}},t._l(t.orderStatuses,(function(t,s){return e("vs-select-item",{key:s,attrs:{value:t.id,text:t.title}})})),1):t._e()],1),t._v(" "),t.editDetails?e("div",{staticClass:"button-container mb-3"},[e("vs-button",{staticClass:"w-full",on:{click:t.updateOrder}},[t._v(t._s(t.$t("forms.order.actions.updateDetails")))])],1):t._e()]),t._v(" "),e("div",{staticClass:"vx-col w-1/3"},[e("p",{staticClass:"font-bold mb-3"},[t._v("\n                    "+t._s(t.$t("forms.order.sections.shipping"))+"\n                ")]),t._v(" "),e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("shippingMethod")))]),t._v(" "),!t.editDetails&&t.order.shipping_method?e("p",[t._v("\n                        "+t._s(t.order.shipping_method.name)+"\n                    ")]):t._e(),t._v(" "),t.editDetails?e("vs-select",{staticClass:"w-full",model:{value:t.orderForm.shipping_method_id,callback:function(e){t.$set(t.orderForm,"shipping_method_id",e)},expression:"orderForm.shipping_method_id"}},t._l(t.shippingMethods,(function(t,s){return e("vs-select-item",{key:s,attrs:{value:t.id,text:t.name}})})),1):t._e()],1),t._v(" "),e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("addressLabel")))]),t._v(" "),t.editDetails?t._e():e("p",[t._v("\n                        "+t._s(t.buildAddress(t.order))+"\n                    ")]),t._v(" "),t.editDetails?e("div",{staticClass:"address-form"},[e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"text",label:t.getPropertyTitle("customerName")},model:{value:t.orderForm.customer_name,callback:function(e){t.$set(t.orderForm,"customer_name",e)},expression:"orderForm.customer_name"}}),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"text",label:t.getPropertyTitle("customerSurname")},model:{value:t.orderForm.customer_surname,callback:function(e){t.$set(t.orderForm,"customer_surname",e)},expression:"orderForm.customer_surname"}}),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"text",label:t.getPropertyTitle("addressOne")},model:{value:t.orderForm.address_one,callback:function(e){t.$set(t.orderForm,"address_one",e)},expression:"orderForm.address_one"}}),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"text",label:t.getPropertyTitle("addressTwo")},model:{value:t.orderForm.address_two,callback:function(e){t.$set(t.orderForm,"address_two",e)},expression:"orderForm.address_two"}}),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"text",label:t.getPropertyTitle("postCode")},model:{value:t.orderForm.zip_code,callback:function(e){t.$set(t.orderForm,"zip_code",e)},expression:"orderForm.zip_code"}}),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"text",label:t.getPropertyTitle("city")},model:{value:t.orderForm.city,callback:function(e){t.$set(t.orderForm,"city",e)},expression:"orderForm.city"}}),t._v(" "),e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.getPropertyTitle("country")},model:{value:t.orderForm.country,callback:function(e){t.$set(t.orderForm,"country",e)},expression:"orderForm.country"}})],1):t._e()]),t._v(" "),e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("email")))]),t._v(" "),t.editDetails?t._e():e("p",[t._v("\n                        "+t._s(t.order.rec_email)+"\n                    ")]),t._v(" "),t.editDetails?e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"email",label:t.getPropertyTitle("email")},model:{value:t.orderForm.rec_email,callback:function(e){t.$set(t.orderForm,"rec_email",e)},expression:"orderForm.rec_email"}}):t._e()],1),t._v(" "),e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("phone")))]),t._v(" "),t.editDetails?t._e():e("p",[t._v("\n                        "+t._s(t.order.rec_phone)+"\n                    ")]),t._v(" "),t.editDetails?e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"tel",label:t.getPropertyTitle("phone")},model:{value:t.orderForm.rec_phone,callback:function(e){t.$set(t.orderForm,"rec_phone",e)},expression:"orderForm.rec_phone"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"vx-col w-1/3"},[e("p",{staticClass:"font-bold mb-3"},[t._v("\n                    "+t._s(t.$t("forms.order.sections.payment"))+"\n                ")]),t._v(" "),e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("paymentMethod")))]),t._v(" "),!t.editDetails&&t.order.payment_method?e("p",[t._v("\n                        "+t._s(t.order.payment_method.name)+"\n                    ")]):t._e(),t._v(" "),t.editDetails?e("vs-select",{staticClass:"w-full",model:{value:t.orderForm.payment_method_id,callback:function(e){t.$set(t.orderForm,"payment_method_id",e)},expression:"orderForm.payment_method_id"}},t._l(t.paymentMethods,(function(t,s){return e("vs-select-item",{key:s,attrs:{value:t.id,text:t.name}})})),1):t._e()],1),t._v(" "),t.editDetails?t._e():e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("customer")))]),t._v(" "),e("p",[t._v(t._s(t.billingDetails()))])]),t._v(" "),t.editDetails?e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("customerName")))]),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"email",label:t.getPropertyTitle("customerName")},model:{value:t.orderForm.customer_name,callback:function(e){t.$set(t.orderForm,"customer_name",e)},expression:"orderForm.customer_name"}})],1):t._e(),t._v(" "),t.editDetails?e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("customerSurname")))]),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"email",label:t.getPropertyTitle("customerSurname")},model:{value:t.orderForm.customer_surname,callback:function(e){t.$set(t.orderForm,"customer_surname",e)},expression:"orderForm.customer_surname"}})],1):t._e(),t._v(" "),t.editDetails?e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("phone")))]),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"email",label:t.getPropertyTitle("phone")},model:{value:t.orderForm.customer_phone,callback:function(e){t.$set(t.orderForm,"customer_phone",e)},expression:"orderForm.customer_phone"}})],1):t._e(),t._v(" "),t.editDetails?e("div",{staticClass:"info-row mb-3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("email")))]),t._v(" "),e("vs-input",{staticClass:"w-full mb-2",attrs:{type:"email",label:t.getPropertyTitle("email")},model:{value:t.orderForm.customer_email,callback:function(e){t.$set(t.orderForm,"customer_email",e)},expression:"orderForm.customer_email"}})],1):t._e()])]),t._v(" "),e("div",{staticClass:"vx-row w-full"},[e("div",{staticClass:"vx-col w-1/3"}),t._v(" "),e("div",{staticClass:"vx-col w-2/3"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("comment")))]),t._v(" "),t.editDetails?t._e():e("p",[t._v("\n                    "+t._s(t.order.comment)+"\n                ")]),t._v(" "),t.editDetails?e("vs-textarea",{model:{value:t.orderForm.comment,callback:function(e){t.$set(t.orderForm,"comment",e)},expression:"orderForm.comment"}}):t._e()],1)])]),t._v(" "),e("vx-card",{attrs:{title:t.$t("forms.order.sections.products"),noShadow:"",cardBorder:""}},[e("vs-table",{attrs:{data:t.orderItems},scopedSlots:t._u([{key:"default",fn:function(s){var o=s.data;return[t._l(o,(function(s,r){return e("vs-tr",{key:r},[e("vs-td",{attrs:{data:o[r].product.title}},[t._v("\n                        "+t._s(o[r].product.title)+"\n                    ")]),t._v(" "),e("vs-td",{attrs:{data:o[r].product_price}},[t._v("\n                        "+t._s(o[r].product_price+" "+t.defaultCurrency)+"\n                    ")]),t._v(" "),e("vs-td",[t._v("\n                        "+t._s(o[r].product_total-o[r].box_total+" "+t.defaultCurrency)+"\n                    ")]),t._v(" "),e("vs-td",{attrs:{data:o[r].product_quantity}},[t._v("\n                        "+t._s(o[r].product_quantity)+"\n                    ")]),t._v(" "),e("vs-td",{attrs:{data:o[r].box_count}},[t._v("\n                        "+t._s(o[r].box_count)+"\n                    ")]),t._v(" "),e("vs-td",{attrs:{data:o[r].box_total}},[t._v("\n                        "+t._s(o[r].box_total+" "+t.defaultCurrency)+"\n                    ")]),t._v(" "),e("vs-td",{attrs:{data:o[r].product_total}},[t._v("\n                        "+t._s(o[r].product_total+" "+t.defaultCurrency)+"\n                    ")]),t._v(" "),e("vs-td",[e("div",{staticClass:"flex"},[e("vs-button",{staticClass:"mr-2",attrs:{size:"small",icon:"edit",type:"border"},on:{click:function(e){return t.editItem(r)}}}),t._v(" "),e("vs-button",{attrs:{size:"small",color:"danger",icon:"delete",type:"border"},on:{click:function(e){return t.showDeleteAlert("orderItem",o[r].id)}}})],1)])],1)})),t._v(" "),e("vs-tr",[e("vs-td",{staticClass:"align-bottom",attrs:{colspan:"3"}},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.getPropertyTitle("shippingLabel")))]),t._v("\n                        "+t._s(t.order.shipping_method.name)+"\n                    ")]),t._v(" "),e("vs-td",{staticClass:"align-bottom",attrs:{colspan:"4"}},[t._v("\n                        "+t._s(t.order.shipping_method.cost+" "+t.defaultCurrency)+"\n                    ")]),t._v(" "),e("vs-td")],1),t._v(" "),null!==t.order.coupon_code?e("vs-tr",[e("vs-td",{staticClass:"align-bottom",attrs:{colspan:"8"}},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.getPropertyTitle("couponLabel")))]),t._v("\n                        "+t._s(t.order.coupon_code)+"\n                    ")])],1):t._e(),t._v(" "),null!==t.order.giftcard_code?e("vs-tr",[e("vs-td",{staticClass:"align-bottom",attrs:{colspan:"8"}},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.getPropertyTitle("giftCardLabel")))]),t._v("\n                        "+t._s(t.order.giftcard_code)+"\n                    ")])],1):t._e(),t._v(" "),e("vs-tr",[e("vs-td",{staticClass:"align-middle",attrs:{colspan:"3"}},[e("p",{staticClass:"text-sm text-right font-bold"},[t._v(t._s(t.getPropertyTitle("subtotal")))])]),t._v(" "),e("vs-td",{staticClass:"align-middle",attrs:{colspan:"5"}},[t._v("\n                        "+t._s(t.order.subtotal+" "+t.defaultCurrency)+"\n                    ")])],1),t._v(" "),e("vs-tr",[e("vs-td",{staticClass:"align-middle",attrs:{colspan:"3"}},[e("p",{staticClass:"text-sm text-right font-bold"},[t._v(t._s(t.getPropertyTitle("discount")))])]),t._v(" "),e("vs-td",{staticClass:"align-middle",attrs:{colspan:"4"}},[t._v("\n                        "+t._s(t.order.discount+" "+t.defaultCurrency)+"\n                    ")]),t._v(" "),e("vs-td")],1),t._v(" "),e("vs-tr",[e("vs-td",{staticClass:"align-middle",attrs:{colspan:"3"}},[e("p",{staticClass:"text-sm text-right font-bold"},[t._v(t._s(t.getPropertyTitle("total")))])]),t._v(" "),e("vs-td",{staticClass:"align-middle",attrs:{colspan:"4"}},[t._v("\n                        "+t._s(t.order.total+" "+t.defaultCurrency)+"\n                    ")]),t._v(" "),e("vs-td")],1)]}}],null,!1,1155281133)},[e("template",{slot:"thead"},[e("vs-th",[t._v("\n                    "+t._s(t.getPropertyTitle("product.title"))+"\n                ")]),t._v(" "),e("vs-th",[t._v("\n                    "+t._s(t.getPropertyTitle("product.price"))+"\n                ")]),t._v(" "),e("vs-th",[t._v("\n                    "+t._s(t.getPropertyTitle("product_total"))+"\n                ")]),t._v(" "),e("vs-th",[t._v("\n                    "+t._s(t.getPropertyTitle("product.quantity"))+"\n                ")]),t._v(" "),e("vs-th",[t._v("\n                    "+t._s(t.getPropertyTitle("box_count"))+"\n                ")]),t._v(" "),e("vs-th",[t._v("\n                    "+t._s(t.getPropertyTitle("box_total"))+"\n                ")]),t._v(" "),e("vs-th",[t._v("\n                    "+t._s(t.getPropertyTitle("product.total"))+"\n                ")]),t._v(" "),e("vs-th")],1)],2),t._v(" "),e("div",{staticClass:"vx-row w-full m-0"},[e("div",{staticClass:"vx-col w-1/2 pt-3 flex"},[e("vs-button",{staticClass:"mr-2",on:{click:t.showItemForm}},[t._v(t._s(t.$t("forms.order.actions.addItems")))]),t._v(" "),e("vs-button",{attrs:{type:"border"},on:{click:t.generateVouchers}},[t._v(t._s(t.$t("forms.order.actions.generateVouchers")))])],1)]),t._v(" "),t.itemPopup.active?e("vs-popup",{staticClass:"order-item-edit",attrs:{title:"Order item details",active:t.itemPopup.active},on:{"update:active":function(e){return t.$set(t.itemPopup,"active",e)}}},[e("div",{staticClass:"vx-row w-full mx-0 mb-3 flex-no-wrap"},[e("div",{staticClass:"vx-col w-2/6"},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.getPropertyTitle("product.label")))]),t._v(" "),e("div",{staticClass:"h-10 flex items-center"},[e("p",[t._v(t._s(t.itemPopup.data.product.title))])])]),t._v(" "),e("div",{staticClass:"vx-col w-1/6"},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.getPropertyTitle("product.price")))]),t._v(" "),e("div",{staticClass:"h-10 flex items-center"},[e("p",[t._v(t._s(t.itemPopup.data.product_price+" "+t.defaultCurrency))])])]),t._v(" "),e("div",{staticClass:"vx-col w-1/6"},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.getPropertyTitle("product.quantity")))]),t._v(" "),e("div",{staticClass:"h-10 flex items-center"},[e("vs-input-number",{staticClass:"w-1/2",attrs:{min:"1"},model:{value:t.itemPopup.data.product_quantity,callback:function(e){t.$set(t.itemPopup.data,"product_quantity",e)},expression:"itemPopup.data.product_quantity"}})],1)]),t._v(" "),e("div",{staticClass:"vx-col w-1/6"},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.getPropertyTitle("product.total")))]),t._v(" "),e("div",{staticClass:"h-10 flex items-center"},[e("p",[t._v(t._s(t.itemPopup.data.product_quantity*t.itemPopup.data.product_price+" "+t.defaultCurrency))])])]),t._v(" "),e("div",{staticClass:"vx-col w-1/6"},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.$t("actions.title")))]),t._v(" "),e("div",{staticClass:"h-10 flex items-center"},[e("vs-button",{staticClass:"mr-2",attrs:{icon:"save",size:"small"},on:{click:t.updateItem}},[t._v(t._s(t.$t("actions.save")))]),t._v(" "),e("vs-button",{attrs:{icon:"delete",size:"small",color:"danger"},on:{click:function(e){return t.showDeleteAlert("orderItem",t.itemPopup.data.id)}}},[t._v(t._s(t.$t("actions.delete")))])],1)])]),t._v(" "),t.itemPopup.data.vouchers.length?e("div",{staticClass:"vx-row mx-0"},[e("div",{staticClass:"vx-col w-full"},[e("p",{staticClass:"text-sm font-bold mb-2"},[t._v(t._s(t.getPropertyTitle("voucher.label")))]),t._v(" "),e("div",{staticClass:"table-container"},[e("vs-table",{attrs:{data:t.itemPopup.data.vouchers},scopedSlots:t._u([{key:"default",fn:function(s){var o=s.data;return t._l(o,(function(s,o){return e("vs-tr",{key:o},[e("vs-td",{attrs:{data:s.voucher_code}},[t._v("\n                                        "+t._s(s.voucher_code)+"\n                                    ")]),t._v(" "),e("vs-td",{attrs:{data:s.end_date}},[t._v("\n                                        "+t._s(t.convertDate(s.end_date,"d/m/y","."))+"\n                                    ")]),t._v(" "),e("vs-td",[e("div",{staticClass:"flex"},[e("vs-button",{staticClass:"mr-2",attrs:{size:"small",color:"success",icon:"send"},on:{click:function(e){return t.showSendPopup(s.id)}}},[t._v(t._s(t.$t("actions.send")))]),t._v(" "),e("vs-button",{staticClass:"mr-2",attrs:{size:"small",color:"primary",icon:"print",href:t.printVoucherLink(s.id,"a4"),target:"_blank"}},[t._v("A4")]),t._v(" "),e("vs-button",{staticClass:"mr-2",attrs:{size:"small",color:"primary",icon:"print",href:t.printVoucherLink(s.id,"a5"),target:"_blank"}},[t._v("A5")]),t._v(" "),e("vs-button",{staticClass:"mr-2",attrs:{size:"small",type:"border",icon:"edit"},on:{click:function(e){return t.showVoucherForm(s.id)}}},[t._v(t._s(t.$t("actions.edit")))]),t._v(" "),e("vs-button",{attrs:{size:"small",color:"danger",icon:"delete"},on:{click:function(e){return t.showDeleteAlert("voucher",s.id)}}},[t._v(t._s(t.$t("actions.delete")))])],1)])],1)}))}}],null,!1,441262089)},[e("template",{slot:"thead"},[e("vs-th",[t._v("\n                                    "+t._s(t.getPropertyTitle("voucher.code"))+"\n                                ")]),t._v(" "),e("vs-th",[t._v("\n                                    "+t._s(t.getPropertyTitle("voucher.validTo"))+"\n                                ")]),t._v(" "),e("vs-th",[t._v("\n                                    "+t._s(t.$t("actions.title"))+"\n                                ")])],1)],2)],1)]),t._v(" "),e("vs-popup",{attrs:{title:t.$t("actions.edit")+" "+t.$tc("models.voucher.title",1)+" #"+t.voucherPopup.data.voucher_code,active:t.voucherPopup.active},on:{"update:active":function(e){return t.$set(t.voucherPopup,"active",e)}}},[e("div",{staticClass:"vx-row w-full p-0 mx-0"},[e("div",{staticClass:"vx-col w-full mb-3"},[e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.$t("models.voucher.properties.title")},model:{value:t.voucherPopup.data.title,callback:function(e){t.$set(t.voucherPopup.data,"title",e)},expression:"voucherPopup.data.title"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-full mb-3"},[e("p",{staticClass:"text-sm mb-2"},[t._v(t._s(t.$t("models.voucher.properties.description")))]),t._v(" "),e("vs-textarea",{model:{value:t.voucherPopup.data.description,callback:function(e){t.$set(t.voucherPopup.data,"description",e)},expression:"voucherPopup.data.description"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-full mb-3"},[e("p",{staticClass:"text-sm mb-2"},[t._v(t._s(t.$t("models.voucher.properties.personalMessage")))]),t._v(" "),e("vs-textarea",{model:{value:t.voucherPopup.data.personal_message,callback:function(e){t.$set(t.voucherPopup.data,"personal_message",e)},expression:"voucherPopup.data.personal_message"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-full mb-3"},[e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.$t("models.voucher.properties.additionalInformation")},model:{value:t.voucherPopup.data.additional_info,callback:function(e){t.$set(t.voucherPopup.data,"additional_info",e)},expression:"voucherPopup.data.additional_info"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-full mb-3"},[e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.$t("models.voucher.properties.location")},model:{value:t.voucherPopup.data.location,callback:function(e){t.$set(t.voucherPopup.data,"location",e)},expression:"voucherPopup.data.location"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-1/2 mb-3"},[e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.$t("models.voucher.properties.duration")},model:{value:t.voucherPopup.data.duration,callback:function(e){t.$set(t.voucherPopup.data,"duration",e)},expression:"voucherPopup.data.duration"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-1/2 mb-3"},[e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.$t("models.voucher.properties.visitors")},model:{value:t.voucherPopup.data.visitors,callback:function(e){t.$set(t.voucherPopup.data,"visitors",e)},expression:"voucherPopup.data.visitors"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-1/2 mb-3"},[e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.$t("models.voucher.properties.dressCode")},model:{value:t.voucherPopup.data.dress_code,callback:function(e){t.$set(t.voucherPopup.data,"dress_code",e)},expression:"voucherPopup.data.dress_code"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-1/2 mb-3"},[e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.$t("models.voucher.properties.weather")},model:{value:t.voucherPopup.data.weather,callback:function(e){t.$set(t.voucherPopup.data,"weather",e)},expression:"voucherPopup.data.weather"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-1/2 mb-3"},[e("vs-input",{staticClass:"w-full",attrs:{type:"text",label:t.$t("models.voucher.properties.zaGledaoce")},model:{value:t.voucherPopup.data.za_gledaoce,callback:function(e){t.$set(t.voucherPopup.data,"za_gledaoce",e)},expression:"voucherPopup.data.za_gledaoce"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-full"},[e("vs-button",{on:{click:t.updateVoucher}},[t._v(t._s(t.$t("actions.update")))])],1)])])],1):t._e()]):t._e(),t._v(" "),e("vs-popup",{staticClass:"order-item-create",attrs:{title:t.$t("actions.add")+""+t.$tc("models.product.title",1),active:t.itemForm.active},on:{"update:active":function(e){return t.$set(t.itemForm,"active",e)}}},[e("div",{staticClass:"vx-row w-full mx-0"},[e("div",{staticClass:"vx-col w-full mb-3 p-0"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("product.label")))]),t._v(" "),e("v-select",{attrs:{label:"title",options:t.products,reduce:function(t){return t.id}},on:{search:t.searchProducts},model:{value:t.itemForm.data.product_id,callback:function(e){t.$set(t.itemForm.data,"product_id",e)},expression:"itemForm.data.product_id"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-full mb-3 p-0"},[e("p",{staticClass:"mb-2"},[t._v(t._s(t.getPropertyTitle("product.quantity")))]),t._v(" "),e("div",{staticClass:"flex items-center"},[e("vs-input-number",{attrs:{min:"1"},model:{value:t.itemForm.data.product_quantity,callback:function(e){t.$set(t.itemForm.data,"product_quantity",e)},expression:"itemForm.data.product_quantity"}})],1)]),t._v(" "),e("div",{staticClass:"vx-col w-full p-0"},[e("vs-button",{on:{click:t.createItem}},[t._v(t._s(t.$t("actions.add")))])],1)])]),t._v(" "),e("vs-popup",{attrs:{title:t.$t("forms.voucher.actions.send"),active:t.sendVoucherPopup.active},on:{"update:active":function(e){return t.$set(t.sendVoucherPopup,"active",e)}}},[e("div",{staticClass:"vx-row w-full px-0 mb-3"},[e("div",{staticClass:"vx-col w-2/3"},[e("p",{staticClass:"font-bold text-sm mb-2"},[t._v(t._s(t.getPropertyTitle("email")))]),t._v(" "),e("vs-input",{staticClass:"w-full",attrs:{type:"text"},model:{value:t.sendVoucherPopup.data.customer_email,callback:function(e){t.$set(t.sendVoucherPopup.data,"customer_email",e)},expression:"sendVoucherPopup.data.customer_email"}})],1),t._v(" "),e("div",{staticClass:"vx-col w-1/3"},[e("p",{staticClass:"font-bold text-sm mb-2"},[t._v(t._s(t.getPropertyTitle("voucher.paperSize")))]),t._v(" "),e("vs-select",{staticClass:"w-full",model:{value:t.sendVoucherPopup.data.paper,callback:function(e){t.$set(t.sendVoucherPopup.data,"paper",e)},expression:"sendVoucherPopup.data.paper"}},t._l(t.sendVoucherPopup.paperOptions,(function(t,s){return e("vs-select-item",{key:s,attrs:{value:t.value,text:t.name}})})),1)],1)]),t._v(" "),e("div",{staticClass:"vx-row w-full px-0"},[e("div",{staticClass:"vx-col w-full"},[e("vs-button",{on:{click:t.sendVoucher}},[t._v(t._s(t.$t("actions.send")))])],1)])])],1)],1):t._e()}),[],!1,null,null,null);e.default=l.exports},d6o1:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,"body .con-vs-popup.order-item-edit .vs-popup{width:100%!important}",""])},vfHp:function(t,e,s){"use strict";var o=s("zuR4"),r=(s("HjUk"),{components:{Datepicker:s("+jP+").a},props:{statuses:{type:Array,default:function(){return[{title:this.$t("statuses.general.published"),value:!0},{title:this.$t("statuses.general.hidden"),value:!1}]}}},data:function(){return{instance:"",model:{},products:[],producents:[],categories:[],banners:[],filters:[],attributes:[],selectedImages:[],shippingMethods:[],paymentMethods:[],orderStatuses:[]}},methods:{setInstance:function(t){this.instance=t},getFormTitle:function(t){return t?this.$t("forms."+this.instance+".titles.edit"):this.$t("forms."+this.instance+".titles.create")},getSectionTitle:function(t){return this.$t("forms."+this.instance+".sections."+t+".label")},getFormSectionTitle:function(t){return this.$t("models."+this.instance+".form."+t)},getPropertyTitle:function(t){return this.$t("models."+this.instance+".properties."+t)},getFieldLabel:function(t,e){return this.$t("forms."+this.instance+".sections."+t+".fields."+e)},getProducts:function(t){var e=this;o.a.get(this.API.product.list,t).then((function(t){e.products=t.data.data}))},getProducents:function(t){var e=this;o.a.get(this.API.producent.list,t).then((function(t){e.producents=t.data.data}))},getCategories:function(t){var e=this;o.a.get(this.API.category.list,t).then((function(t){e.categories=t.data.data}))},getBanners:function(t){var e=this;o.a.get(this.API.banner.list,t).then((function(t){e.banners=t.data.data}))},getFilters:function(t){var e=this;o.a.get(this.API.filter.list,t).then((function(t){e.filters=t.data.data}))},getAttributes:function(t){var e=this;o.a.get(this.API.attribute.list,t).then((function(t){e.attributes=t.data.data}))},getShippingMethods:function(){var t=this,e=this.API.shippingMethod.list,s=this.defaultSortParams();o.a.get(e,{params:s}).then((function(e){t.shippingMethods=e.data.data}))},getPaymentMethods:function(){var t=this,e=this.API.paymentMethod.list,s=this.defaultSortParams();o.a.get(e,{params:s}).then((function(e){t.paymentMethods=e.data.data}))},getOrderStatuses:function(){var t=this,e=this.API.orderStatus.list;o.a.get(e).then((function(e){t.orderStatuses=e.data.data}))},searchProducts:function(t,e){var s={params:{search:t}};this.getProducts(s)},searchCategories:function(t,e){var s={params:{search:t}};this.getCategories(s)},searchFilters:function(t,e){var s={params:{search:t}};this.getFilters(s)},showNotification:function(t,e,s,o,r){var a="",i=1;r&&(i=2),a=o?this.$tc("models."+o+".title",i):this.$tc("models."+this.instance+".title",i);var c=this.$t("messages."+t),n=this.$tc("messages."+e,i,{instance:a});this.$vs.notify({title:c,text:n,color:s})},getOptions:function(t){return this[t]},normalizeData:function(t){var e=[];return t.forEach((function(t){e.push(t.id)})),e}},created:function(){},mounted:function(){}});e.a=r}}]);
//# sourceMappingURL=20.js.map