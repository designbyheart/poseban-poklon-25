(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"/u9t":function(t,e,s){"use strict";var a=s("dNjG"),i=s("zuR4"),n={props:{},data:function(){return{instance:"",items:[],per_page:20,pagination:{currentPage:1,nextPageUrl:"",totalPages:1},search:"",sortKey:"",sortOrder:"",API:a.a}},watch:{"pagination.currentPage":function(t,e){this.getItems()},search:function(){this.getItems()}},methods:{setInstance:function(t){this.instance=t},getItems:function(t){var e=this,s=this.instance,a={params:{per_page:this.per_page,sort_key:"created_at",sort_order:"desc"}};void 0!==t&&(a.params=t),""!==this.search&&(a.params.search=this.search,this.pagination.currentPage=1);var n=this.API[s].list,r=this.pagination.currentPage;""!==this.pagination.nextPageUrl&&""===this.search&&(n=n+"?page="+r),i.a.get(n,a).then((function(t){e.items=t.data.data,e.pagination.nextPageUrl=t.data.next_page_url,e.pagination.totalPages=t.data.last_page}))},handleSort:function(t,e){var s={sort_key:t,sort_order:e?"desc":"asc"};this.getItems(s)},deleteItem:function(t){var e=this,s=this.instance;i.a.delete(this.API[s].delete+"/"+t).then((function(t){"success"===t.data&&(e.showNotification("success","request.deletedSuccess","success"),e.getItems())})).catch((function(t){e.showNotification("error","request.error","danger")}))},getTableTitle:function(){return this.$t("tables."+this.instance+".title")},getColumnTitle:function(t){return this.$t("models."+this.instance+".properties."+t)},getPropertyTitle:function(t){return this.$t("models."+this.instance+".properties."+t)},convertDate:function(t){var e=new Date(t),s=e.getDate(),a=e.getMonth()+1;return s<10&&(s="0"+s),a<10&&(a="0"+a),s+"."+a+"."+e.getFullYear()},showNotification:function(t,e,s,a,i){var n="",r=1;i&&(r=2),n=a?this.$tc("models."+a+".title",r):this.$tc("models."+this.instance+".title",r);var o=this.$t("messages."+t),c=this.$tc("messages."+e,r,{instance:n});this.$vs.notify({title:o,text:c,color:s})},showDeleteAlert:function(t){var e=this.deleteItem.bind(null,t),s=this.$tc("models."+this.instance+".title",1),a=this.$t("messages.confirmation.delete",{instance:s});this.$vs.dialog({color:"primary",title:"Confirm",text:a,accept:e})}},mounted:function(){}};e.a=n},"48I2":function(t,e,s){"use strict";s.r(e);var a=s("zuR4"),i=s("/u9t"),n=s("Wz3/"),r=s.n(n),o={mixins:[i.a],components:{StarRating:r.a},data:function(){return{instance:"review",instanceSlug:"reviews",reviewPopup:{active:!1,data:{}}}},methods:{approveReview:function(t){var e=this,s=this.API.review.approve,i={id:t};a.a.post(s,i).then((function(t){"success"===t.data&&(e.showNotification("success","request.approvedSuccess","success"),e.getItems(e.per_page))})).catch((function(t){e.showNotification("error","request.error","danger")}))},openReviewPopup:function(t){var e=this.items.find((function(e){return e.id=t}));this.reviewPopup.data=e,this.reviewPopup.active=!0}},created:function(){this.setInstance(this.instance)},mounted:function(){this.getItems()}},c=s("KHd+"),l=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("vs-table",{attrs:{"max-items":t.per_page,sst:!0,data:t.items,noDataText:t.$t("messages.notFound")},on:{sort:t.handleSort},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.data;return t._l(a,(function(s,a){return e("vs-tr",{key:a},[e("vs-td",[e("p",{staticClass:"text-sm"},[t._v(t._s(s.product.title))])]),t._v(" "),e("vs-td",[e("p",{staticClass:"text-sm"},[t._v(t._s(s.user.email))])]),t._v(" "),e("vs-td",[e("star-rating",{attrs:{rating:s.rating,"read-only":!0,increment:.5,"star-size":15}})],1),t._v(" "),e("vs-td",[s.status?e("vs-icon",{attrs:{icon:"check",color:"success",size:"small"}}):t._e(),t._v(" "),s.status?t._e():e("vs-icon",{attrs:{icon:"close",color:"danger",size:"small"}})],1),t._v(" "),e("vs-td",[e("p",{staticClass:"text-sm"},[t._v(t._s(t.convertDate(s.created_at)))])]),t._v(" "),e("vs-td",[e("div",{staticClass:"flex"},[e("vs-button",{staticClass:"text-sm mr-2",attrs:{color:"primary",icon:"remove_red_eye",type:"border"},on:{click:function(e){return t.openReviewPopup(s.id)}}}),t._v(" "),e("vs-button",{attrs:{color:"danger",icon:"delete"},on:{click:function(e){return t.showDeleteAlert(s.id)}}})],1)])],1)}))}}])},[e("template",{slot:"header"},[e("div",{staticClass:"vx-row w-full pb-3 m-0"},[e("div",{staticClass:"vx-col flex items-center w-1/2 p-0"},[e("h3",{staticClass:"mb-0 mr-3"},[t._v("\n                        "+t._s(t.getTableTitle())+"\n                    ")])]),t._v(" "),e("div",{staticClass:"vx-col flex items-center justify-end w-1/2 p-0"},[e("vs-input",{staticClass:"w-full",attrs:{icon:"search",placeholder:t.$t("actions.search")},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)])]),t._v(" "),e("template",{slot:"thead"},[e("vs-th",{attrs:{"sort-key":"product_id"}},[t._v("\n                "+t._s(t.getPropertyTitle("product"))+"\n            ")]),t._v(" "),e("vs-th",{attrs:{"sort-key":"user_id"}},[t._v("\n                "+t._s(t.getPropertyTitle("user"))+"\n            ")]),t._v(" "),e("vs-th",{attrs:{"sort-key":"rating"}},[t._v("\n                "+t._s(t.getPropertyTitle("rating"))+"\n            ")]),t._v(" "),e("vs-th",{attrs:{"sort-key":"status"}},[t._v("\n                "+t._s(t.getPropertyTitle("status"))+"\n            ")]),t._v(" "),e("vs-th",{attrs:{"sort-key":"created_at"}},[t._v("\n                "+t._s(t.getPropertyTitle("createdAt"))+"\n            ")]),t._v(" "),e("vs-th",[t._v("\n                "+t._s(t.$t("actions.title"))+"\n            ")])],1)],2),t._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col flex justify-end items-center w-full p-3"},[e("vs-pagination",{attrs:{total:t.pagination.totalPages},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)]),t._v(" "),t.reviewPopup.active?e("vs-popup",{attrs:{title:t.$t("actions.view")+" "+t.$tc("models.review.title",1),active:t.reviewPopup.active},on:{"update:active":function(e){return t.$set(t.reviewPopup,"active",e)}}},[e("div",{staticClass:"vx-row w-full px-0 mb-6"},[e("div",{staticClass:"vx-col w-full"},[e("p",{staticClass:"font-bold"},[t._v(t._s(t.getPropertyTitle("user")))])]),t._v(" "),e("div",{staticClass:"vx-col w-1/2"},[e("p",[t._v(t._s(t.reviewPopup.data.user.name))])]),t._v(" "),e("div",{staticClass:"vx-col w-1/2"},[e("p",[t._v(t._s(t.reviewPopup.data.user.email))])])]),t._v(" "),e("div",{staticClass:"vx-row w-full px-0 mb-6"},[e("div",{staticClass:"vx-col w-full"},[e("p",{staticClass:"font-bold"},[t._v(t._s(t.getPropertyTitle("createdAt")))])]),t._v(" "),e("div",{staticClass:"vx-col w-full"},[e("p",[t._v(t._s(t.convertDate(t.reviewPopup.data.created_at)))])])]),t._v(" "),e("div",{staticClass:"vx-row w-full px-0 mb-6"},[e("div",{staticClass:"vx-col w-full"},[e("p",{staticClass:"font-bold"},[t._v(t._s(t.getPropertyTitle("content")))])]),t._v(" "),e("div",{staticClass:"vx-col w-full"},[e("p",[t._v(t._s(t.reviewPopup.data.content))])])]),t._v(" "),e("div",{staticClass:"vx-row w-full px-0"},[e("div",{staticClass:"vx-col w-full"},[e("vs-button",{on:{click:function(e){return t.approveReview(t.reviewPopup.data.id)}}},[t._v(t._s(t.$t("actions.approve")))]),t._v(" "),e("vs-button",{attrs:{color:"danger"},on:{click:function(e){return t.showDeleteAlert(t.reviewPopup.data.id)}}},[t._v(t._s(t.$t("actions.delete")))])],1)])]):t._e()],1)}),[],!1,null,null,null);e.default=l.exports}}]);
//# sourceMappingURL=38.js.map