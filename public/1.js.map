{"version":3,"sources":["webpack:///./node_modules/filepond/dist/filepond.min.css","webpack:///./node_modules/vue-filepond/dist/vue-filepond.js","webpack:///./node_modules/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js","webpack:///./node_modules/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js","webpack:///./node_modules/filepond/dist/filepond.min.css?4e9b","webpack:///./node_modules/filepond/dist/filepond.js"],"names":["module","exports","push","i","_vue","_filepond","Object","defineProperty","value","setOptions","undefined","obj","_vue2","__esModule","default","filteredComponentMethods","isSupported","supported","getNativeConstructorFromType","type","string","String","boolean","Boolean","array","Array","function","Function","int","Number","serverapi","object","props","events","watch","instances","globalOptions","options","assign","forEach","instance","registerPlugin","apply","arguments","length","_loop","prop","test","OptionTypes","this","_pond","component","name","render","h","attrs","id","className","required","multiple","allowMultiple","accept","acceptedFileTypes","capture","captureMethod","mounted","_this","_element","$el","querySelector","reduce","_len","args","_key","$emit","getFiles","substr","concat","$attrs","create","$options","propsData","keys","filter","key","includes","destroyed","_this2","detached","offsetParent","MutationObserver","mutations","observer","removedNode","removedNodes","contains","disconnect","call","observe","document","documentElement","childList","subtree","destroy","index","indexOf","splice","plugin","_ref","addFilter","utils","Type","isString","replaceInString","guesstimateMimeType","getExtensionFromFilename","getFilenameFromURL","isValidMimeType","acceptedTypes","userInputType","some","acceptedType","wildcard","exec","pop","slice","validateFile","item","typeDetector","filename","extension","getItemType","Promise","resolve","reject","then","detectedType","catch","map","file","_ref2","query","_ref3","validationResult","handleRejection","acceptedFileTypesMapped","acceptedFileType","label","acceptedFileTypesMappedUnique","status","main","sub","allTypes","join","allButLastType","lastType","allowFileTypeValidation","BOOLEAN","ARRAY","labelFileTypeNotAllowed","STRING","fileValidateTypeLabelExpectedTypes","fileValidateTypeLabelExpectedTypesMap","OBJECT","fileValidateTypeDetectType","FUNCTION","window","dispatchEvent","CustomEvent","detail","factory","toNaturalFileSize","sizeMax","size","sizeMin","fileFilter","filesize","totalSizeMax","total","fileSize","allowFileSizeValidation","maxFileSize","INT","minFileSize","maxTotalFileSize","fileValidateSizeFilter","labelMinFileSizeExceeded","labelMinFileSize","labelMaxFileSizeExceeded","labelMaxFileSize","labelMaxTotalFileSizeExceeded","labelMaxTotalFileSize","content","transform","locals","isNode","HTMLElement","createStore","initialState","queries","actions","state","actionQueue","dispatchQueue","getState","processActionQueue","queue","processDispatchQueue","data","dispatch","isBlocking","hidden","actionHandlers","str","_queryHandles","queryHandles","api","action","forin","cb","hasOwnProperty","createObject","definition","property","attr","node","getAttribute","hasAttribute","setAttribute","ns","svgElements","isSVGElement","tag","createElement","attributes","element","createElementNS","appendChild","parent","child","children","insertBefore","appendChildView","childViews","view","removeChildView","parentNode","removeChild","IS_BROWSER","isBrowser","getChildCount","el","childNodes","getViewRect","elementRect","offset","scale","left","top","right","width","bottom","height","rect","inner","outer","childView","isRectIgnored","childViewRect","expandRect","calculateRectSize","marginBottom","marginRight","isNumber","thereYet","position","destination","velocity","errorMargin","Math","abs","easeInOutQuad","t","animator","spring","_ref$stiffness","stiffness","_ref$damping","damping","_ref$mass","mass","target","resting","interpolate","ts","skipToEndState","onupdate","oncomplete","setTarget","set","get","tween","p","_ref$duration","duration","_ref$easing","easing","_ref$delay","delay","start","reverse","createAnimator","category","def","addGetSet","overwrite","isArray","o","getter","setter","isDefined","defaults","opacity","scaleX","scaleY","translateX","translateY","rotateX","rotateY","rotateZ","originX","originY","propsHaveChanged","currentProps","newProps","applyStyles","perspective","transforms","styles","elementCurrentStyle","style","cssText","Mixins","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","initialProps","getRect","write","listeners","viewState","add","fn","addEventListener","remove","removeEventListener","removeEvent","on","off","findIndex","event","animations","animation","apis","updateRect","layoutCalculated","paddingTop","parseInt","marginTop","marginLeft","offsetLeft","offsetTop","offsetWidth","offsetHeight","scrollTop","createView","_ref$tag","_ref$name","_ref$attributes","_ref$read","read","_ref$write","_ref$create","_ref$destroy","_ref$filterFrameActio","filterFrameActionsForChild","_ref$didCreateView","didCreateView","_ref$didWriteView","didWriteView","_ref$ignoreRect","ignoreRect","_ref$ignoreRectUpdate","ignoreRectUpdate","_ref$mixins","mixins","store","getComputedStyle","frameRect","isResting","activeMixins","ref","writers","readers","destroyers","getElement","getChildViews","getReference","createChildView","getStyle","_read","root","internalAPI","reader","_write","frameActions","shouldOptimize","writer","timestamp","mixin","_destroy","destroyer","sharedAPIDefinition","internalAPIDefinition","is","needle","linkView","unlinkView","registerWriter","registerReader","registerDestroyer","invalidateLayout","externalAPIDefinition","mixinAPIDefinition","sort","a","b","mixinAPI","childCount","createRoute","routes","_ref$actions","newNode","referenceNode","insertAfter","nextSibling","isEmpty","trim","toString","isBoolean","toBoolean","toNumber","replace","toInt","toFloat","parseFloat","isInt","isFinite","floor","toBytes","base","naturalFileSize","isFunction","methods","process","patch","revert","fetch","restore","load","createAction","outline","method","timeout","headers","url","withCredentials","onload","ondata","onerror","parts","split","header","isObject","getType","isNull","isAPI","conversionTable","splitter","number","float","bytes","self","levels","level","shift","toFunctionReference","JSON","parse","e","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","option","createOptions","currentValue","optionDefinition","enumerable","createInitialState","items","listUpdateTimeout","itemUpdateTimeout","processingQueue","fromCamels","separator","part","toLowerCase","createOptionAPI","toUpperCase","createOptionActions","createOptionQueries","InteractionMethod","getUniqueId","random","substring","_AwaitValue","wrapped","_AsyncGenerator","gen","front","back","resume","arg","result","wrappedAwait","settle","done","err","next","_invoke","request","return","_objectWithoutProperties","source","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","_toConsumableArray","arr","arr2","_arrayWithoutHoles","_iterableToArray","TypeError","_nonIterableSpread","iter","Symbol","iterator","from","asyncIterator","throw","decimalSeparator","thousandsStringWithSeparator","arrayRemove","listener","_fire","sync","setTimeout","run","fireSync","fire","_len2","_key2","onOnce","_cb","copyObjectPropertiesToObject","src","getOwnPropertyNames","getOwnPropertyDescriptor","PRIVATE","createItemAPI","removeReleasedItems","released","ItemStatus","INIT","IDLE","PROCESSING_QUEUED","PROCESSING","PROCESSING_COMPLETE","PROCESSING_ERROR","PROCESSING_REVERT_ERROR","LOADING","LOAD_ERROR","FileOrigin","INPUT","LIMBO","LOCAL","getNonNumeric","getDecimalSeparator","toLocaleString","NUMBER","ACTION","SERVER_API","REGEX","filters","applyFilterChain","matchingFilters","f","initialFilter","current","error","applyFilters","getOptions","defaultOptions","disabled","allowSyncAcceptAttribute","allowDrop","allowBrowse","allowPaste","allowReplace","allowRevert","allowRemove","allowProcess","allowReorder","allowDirectoriesOnly","storeAsFile","forceRevert","maxFiles","checkValidity","itemInsertLocationFreedom","itemInsertLocation","itemInsertInterval","dropOnPage","dropOnElement","dropValidation","ignoredFiles","instantUpload","maxParallelUploads","allowMinimumUploadDuration","chunkUploads","chunkForce","chunkSize","chunkRetryDelays","server","fileSizeBase","labelFileSizeBytes","labelFileSizeKilobytes","labelFileSizeMegabytes","labelFileSizeGigabytes","labelDecimalSeparator","labelThousandsSeparator","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","iconRemove","iconProcess","iconRetry","iconUndo","iconDone","oninit","onwarning","onactivatefile","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onreorderfiles","beforeDropFile","beforeAddFile","beforeRemoveFile","beforePrepareFile","stylePanelLayout","stylePanelAspectRatio","styleItemPanelAspectRatio","styleButtonRemoveItemPosition","styleButtonProcessItemPosition","styleLoadIndicatorPosition","styleProgressIndicatorPosition","styleButtonRemoveItemAlign","files","credits","getItemByQuery","find","getNumericAspectRatioFromString","aspectRatio","getActiveItems","archived","Status","EMPTY","ERROR","BUSY","READY","res","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","isItemInBusyState","isItemInReadyState","isAsync","GET_STATUS","GET_ITEM","GET_ACTIVE_ITEM","GET_ACTIVE_ITEMS","GET_ITEMS","GET_ITEM_NAME","GET_ITEM_SIZE","GET_STYLES","GET_PANEL_ASPECT_RATIO","GET_ITEM_PANEL_ASPECT_RATIO","GET_ITEMS_BY_STATUS","GET_TOTAL_ITEMS","SHOULD_UPDATE_FILE_INPUT","dataTransfer","DataTransfer","File","canUpdateFileInput","IS_ASYNC","GET_FILE_SIZE_LABELS","labelBytes","labelKilobytes","labelMegabytes","labelGigabytes","limit","min","max","isBase64DataURI","guesstimateExtension","subtype","leftPad","padding","getDateString","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getFileFromBlob","blob","lastModifiedDate","_relativePath","createBlob","arrayBuffer","mimeType","BB","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","bb","append","getBlob","Blob","getMimeTypeFromBase64DataURI","dataURI","getBlobFromBase64DataURI","byteString","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","getBlobFromByteStringWithMimeType","atob","getBase64DataFromBase64DataURI","getByteStringFromBase64DataURI","getFileNameFromHeader","matches","decodeURI","getFileSizeFromHeader","match","getTranfserIdFromHeader","getFileInfoFromHeaders","info","rows","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","createFileLoader","fetchFn","complete","progress","loadURL","now","response","body","code","computable","fileinfo","setSource","getProgress","abort","isGet","sendRequest","onheaders","onprogress","ontimeout","onabort","aborted","xhr","headersReceived","encodeURI","encodeURIComponent","stringify","XMLHttpRequest","upload","lengthComputable","loaded","onreadystatechange","readyState","open","unescape","setRequestHeader","responseType","send","createResponse","createTimeoutResponse","getAllResponseHeaders","hasQS","buildURL","createFetchFunction","apiUrl","statusText","ChunkStatus","processFileChunked","metadata","transfer","chunks","chunkTransferId","chunkServer","serverId","fd","getResponseHeader","lastChunkIndex","retries","requestUrl","requestParams","canProcessChunk","chunk","processChunk","processChunks","updateTotalProgress","retryProcessChunk","every","clearTimeout","totalBytesTransfered","totalSize","formData","FormData","requestTransferId","createFileProcessorFunction","canChunkUpload","shouldChunkUpload","willChunkUpload","createRevertFunction","uniqueFileId","getRandomNumber","createFileProcessor","processFn","perceivedProgress","perceivedPerformanceUpdater","perceivedDuration","clear","getDuration","progressFn","completeFn","tickMin","tickMax","tick","runtime","createPerceivedPerformanceUpdater","transferId","reset","getFilenameWithoutExtension","lastIndexOf","createFileStub","isFile","deepCloneObject","v","getItemById","itemId","getItemIndexByQuery","fetchBlob","getDomainFromURL","location","protocol","dynamicLabel","listUpdated","optionalPromise","params","sortItems","compare","getItemByQueryFromState","itemHandler","_ref$success","success","_ref$failure","failure","ABORT_ALL","freeze","abortLoad","abortProcessing","DID_SET_FILES","_ref2$value","activeItems","interactionMethod","DID_UPDATE_ITEM_METADATA","change","silent","origin","serverFileReference","doUpload","shouldPrepareOutput","MOVE_ITEM","_ref4","currentIndex","SORT","_ref5","ADD_ITEMS","_ref6","_ref6$success","_ref6$failure","insertLocation","totalItems","promises","all","ADD_ITEM","_ref7","_ref7$index","_ref7$success","_ref7$failure","_ref7$options","count","maxFileCount","hasRoomForItem","_item","frozen","processingAborted","activeLoader","activeProcessor","abortProcessingRequestComplete","setStatus","getFileExtension","getFileType","getFileSize","getFile","loader","meta","retryLoad","processor","onprocess","console","requestProcessing","revertFileUpload","serverTransferId","_setMetadata","last","getMetadata","filenameWithoutExtension","fileExtension","fileType","relativePath","setMetadata","extend","handler","itemAPI","release","archive","setFile","createItem","arrayInsert","insertItem","mainStatus","handleAdd","shouldAdd","loadComplete","_ref8","href","isExternalURL","REQUEST_PREPARE_OUTPUT","_ref9","_ref9$failure","COMPLETE_LOAD_ITEM","_ref10","RETRY_ITEM_LOAD","REQUEST_ITEM_PREPARE","_success","output","REQUEST_ITEM_PROCESSING","processNow","PROCESS_ITEM","processNext","queueEntry","itemReference","noop","createProcessorFunction","RETRY_ITEM_PROCESSING","REQUEST_REMOVE_ITEM","shouldRemove","RELEASE_ITEM","REMOVE_ITEM","removeFromView","ABORT_ITEM_LOAD","ABORT_ITEM_PROCESSING","REQUEST_REVERT_ITEM_PROCESSING","handleRevert","shouldRevert","requestRemoveResult","REVERT_ITEM_PROCESSING","isMockItem","SET_OPTIONS","_ref11","optionKeys","prioritizedOptionKeys","PrioritizedOptions","createElement$1","tagName","text","textNode","nodeValue","createTextNode","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","PI","x","cos","y","sin","percentageArc","to","arcSweep","startAngle","endAngle","end","describeArc","progressIndicator","spin","svg","path","align","dataset","ringStrokeWidth","ringFrom","ringTo","coordinates","fileActionButton","innerHTML","icon","isDisabled","shouldDisable","removeAttribute","_options$labelBytes","_options$labelKilobyt","_options$labelMegabyt","_options$labelGigabyt","KB","MB","GB","round","removeDecimalsWhenZero","decimalCount","toFixed","updateFile","fileName","updateFileSizeOnError","fileInfo","DID_LOAD_ITEM","DID_UPDATE_ITEM_META","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_INVALID","toPercentage","didSetItemLoadProgress","title","fileStatus","DID_REVERT_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_ABORT_ITEM_PROCESSING","DID_COMPLETE_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_UPDATE_ITEM_LOAD_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_PROCESSING_REVERT_ERROR","DID_THROW_ITEM_REMOVE_ERROR","Buttons","AbortItemLoad","RetryItemLoad","RemoveItem","ProcessItem","AbortItemProcessing","RetryItemProcessing","RevertItemProcessing","ButtonKeys","calculateFileInfoOffset","getRemoveIndicatorAligment","buttonRect","buttonRemoveItem","calculateButtonWidth","buttonAbortItemLoad","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","DefaultStyle","buttonRetryItemLoad","buttonProcessItem","buttonAbortItemProcessing","buttonRetryItemProcessing","buttonRevertItemProcessing","loadProgressIndicator","processProgressIndicator","processingCompleteIndicator","IdleStyle","ProcessingStyle","StyleMap","DID_START_ITEM_LOAD","DID_START_ITEM_REMOVE","DID_LOAD_LOCAL_ITEM","DID_START_ITEM_PROCESSING","processingCompleteIndicatorView","route","DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING","DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD","DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL","buttonAbortItemRemoval","_ref12","buttonFilter","LocalButtons","prev","curr","alignRemoveItemButton","enabledButtons","_map","buttonView","classList","stopPropagation","loadIndicatorView","progressIndicatorView","activeStyles","stylesToApply","defaultStyles","control","fileWrapper","PANEL_SPRING_PROPS","createSection","section","viewConstructor","panel","heightCurrent","scalable","topRect","bottomRect","center","ITEM_TRANSLATE_SPRING","StateMap","route$1","DID_UPDATE_PANEL_HEIGHT","write$4","DID_GRAB_ITEM","dragOrigin","DID_DRAG_ITEM","dragState","DID_DROP_ITEM","dragOffset","currentState","filepondItemState","container","handleClick","markedForRemoval","isPrimary","removedActivateListener","pageX","pageY","dragCenter","offsetX","offsetY","itemIds","prevIndex","setIndex","getIndex","getItemIndex","drag","preventDefault","drop","cancel","getItemsPerRow","horizontalSpace","itemWidth","getItemIndexByPosition","positionInView","l","itemRect","itemHorizontalMargin","itemsPerRow","childMid","itemVerticalMargin","itemHeight","_index","itemTop","itemRight","itemBottom","dropAreaDimensions","val","setDimensions","moveItem","vx","vy","spawnDate","introItemView","getItemHeight","route$2","DID_ADD_ITEM","addIndex","cooldown","dist","lastItemSpanwDate","DID_REMOVE_ITEM","numItems","oldIndex","dragPosition","dragHeight","dragWidth","cols","setHeight","setWidth","getGridIndex","getHeight","getWidth","getColIndex","visibleChildren","idx","childHeight","childBottom","childTop","list","dragCoordinates","dragIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","visualHeight","prevX","prevY","visualIndex","indexX","indexY","vectorX","sign","vectorY","route$3","DID_DRAG","scopeLeft","scopeTop","DID_END_DRAG","listScroller","overflowing","overflow","newHeight","attrToggle","enabledValue","setAcceptedFileTypes","toggleAllowMultiple","toggleDirectoryFilter","toggleDisabled","doesAllowBrowse","disableField","toggleRequired","setCaptureMethod","updateRequiredStatus","hasInvalidField","setCustomValidity","browser","handleChange","webkitRelativePath","input","form","resetFileInput","DID_SET_DISABLED","DID_SET_ALLOW_BROWSE","DID_SET_ALLOW_DIRECTORIES_ONLY","DID_SET_ALLOW_MULTIPLE","DID_SET_ACCEPTED_FILE_TYPES","DID_SET_CAPTURE_METHOD","DID_SET_REQUIRED","Key","updateLabelValue","clickable","dropLabel","handleKeyDown","keyCode","click","caption","DID_SET_LABEL_IDLE","route$4","addBlob","DID_DROP","drip","setInputFiles","getField","fields","syncFieldPositionsWithItems","didReorderItems","write$8","shouldUseFileInput","dataContainer","field","fileItem","DID_DEFINE_VALUE","DID_PREPARE_OUTPUT","DID_REORDER_ITEMS","DID_SORT_ITEMS","legend","textContent","images","text$1","zip","epub","requestDataTransferItems","links","getLinks","hasFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","entry","getAsEntry","isDirectory","kind","isDirectoryEntry","getFilesInDirectory","getAsFile","dirCounter","fileCounter","resolveIfDone","readEntries","dirEntry","directoryReader","createReader","readBatch","entries","correctedFile","correctMissingFileType","fullPath","webkitGetAsEntry","getLinksFromTransferMetaData","getLinksFromTransferURLData","getData","dragNDropObservers","eventPosition","pageLeft","pageTop","layerX","layerY","getDragNDropObserver","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","handlers","createHandler","addListener","client","isEventTarget","elementAtPosition","point","elementFromPoint","getRootNode","pageXOffset","pageYOffset","initialTarget","setDropEffect","effect","dropEffect","onenter","overDropTarget","filterElement","onexit","ondrag","allowdrop","allowsTransfer","ondrop","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","_options$filterItems","filterItems","scopeToObserve","createDragNDropClient","lastState","filteredItems","ondragend","ondragstart","updateHopperState","hopperState","listening","listeners$1","handlePaste","activeEl","activeElement","nodeName","inScope","clipboardData","createPaster","listen","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","message","listModified","clear$1","isUsingFilePond","itemProcessedUndo","itemError","assistant","toCamels","RegExp","charAt","debounce","func","interval","immidiateOnly","prevent","calculateListItemMargin","calculateListHeight","visual","bounds","scrollList","itemList","newItem","removedItem","verticalItemCount","ceil","calculateRootBoundingBoxHeight","measureHeight","cappedHeight","maxHeight","fixedHeight","exceedsMaxFiles","maxItems","totalBrowseItems","getDragIndex","toggleDrop","isAllowed","enabled","hopper","toggleBrowse","togglePaste","paster","route$5","DID_SET_ALLOW_DROP","DID_SET_ALLOW_PASTE","measure","widthPrevious","widthUpdated","updateHistory","previousAspectRatio","canHover","matchMedia","hasPointerEvents","passive","frag","tabIndex","rel","_root$ref","isMultiItem","atMaxCapacity","addAction","listItemMargin","listHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","_listAvailableHeight","isCappedHeight","panelHeight","_listAvailableHeight2","itemMargin","createApp","initialOptions","originalElement","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","readWriteApi","innerWidth","routeActionsToEvents","createEvent","eventRoutes","DID_DESTROY","DID_INIT","DID_THROW_MAX_FILES","DID_INIT_ITEM","DID_COMPLETE_ITEM_PROCESSING_ALL","DID_UPDATE_ITEMS","DID_ACTIVATE_ITEM","exposeEvent","pond","bubbles","cancelable","composed","filtered","prepareFile","addFile","addFiles","isFilePondFile","removeFile","sources","lastArgument","processFile","prepareFiles","processFiles","_len3","_key3","removeFiles","_len4","_key4","mappedQueries","q","moveFile","browse","appendTo","replaceElement","restoreElement","isAttachedTo","createAppObject","customOptions","app","attributeNameToPropertyName","attributeName","mapObject","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","attribute","createAppAtElement","mergedOptions","attributeOptions","querySelectorAll","createApp$1","PRIVATE_METHODS","createAppAPI","replacements","createWorker","workerBlob","workerURL","URL","createObjectURL","worker","Worker","post","transferList","onmessage","postMessage","terminate","revokeObjectURL","loadImage","img","Image","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","additionalOptions","pluginOutline","views","operamini","CSS","navigator","userAgent","apps","FileStatus","fps","painter","requestTick","cancelTick","setTimerType","performance","requestAnimationFrame","cancelAnimationFrame","delta","createPainter","updateOptionTypes","hook","indexToRemove","context","newHook","plugins","opts"],"mappings":"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","file":"1.js","sourcesContent":["exports = module.exports = require(\"../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*!\\n * FilePond 4.32.7\\n * Licensed under MIT, https://opensource.org/licenses/MIT/\\n * Please visit https://pqina.nl/filepond/ for details.\\n */.filepond--assistant{position:absolute;overflow:hidden;height:1px;width:1px;padding:0;border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);white-space:nowrap}.filepond--browser.filepond--browser{position:absolute;margin:0;padding:0;left:1em;top:1.75em;width:calc(100% - 2em);opacity:0;font-size:0}.filepond--data{width:0;height:0;padding:0;margin:0;border:none;visibility:hidden;contain:strict}.filepond--data,.filepond--drip{position:absolute;pointer-events:none}.filepond--drip{top:0;left:0;right:0;bottom:0;overflow:hidden;opacity:.1;border-radius:.5em;background:rgba(0,0,0,.01)}.filepond--drip-blob{-webkit-transform-origin:center center;transform-origin:center center;width:8em;height:8em;margin-left:-4em;margin-top:-4em;background:#292625;border-radius:50%}.filepond--drip-blob,.filepond--drop-label{position:absolute;top:0;left:0;will-change:transform,opacity}.filepond--drop-label{right:0;margin:0;color:#4f4f4f;display:flex;justify-content:center;align-items:center;height:0;-webkit-user-select:none;-ms-user-select:none;user-select:none}.filepond--drop-label.filepond--drop-label label{display:block;margin:0;padding:.5em}.filepond--drop-label label{cursor:default;font-size:.875em;font-weight:400;text-align:center;line-height:1.5}.filepond--label-action{text-decoration:underline;-webkit-text-decoration-skip:ink;text-decoration-skip-ink:auto;-webkit-text-decoration-color:#a7a4a4;text-decoration-color:#a7a4a4;cursor:pointer}.filepond--root[data-disabled] .filepond--drop-label label{opacity:.5}.filepond--file-action-button.filepond--file-action-button{font-size:1em;width:1.625em;height:1.625em;font-family:inherit;line-height:inherit;margin:0;padding:0;border:none;outline:none;will-change:transform,opacity}.filepond--file-action-button.filepond--file-action-button span{position:absolute;overflow:hidden;height:1px;width:1px;padding:0;border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);white-space:nowrap}.filepond--file-action-button.filepond--file-action-button svg{width:100%;height:100%}.filepond--file-action-button.filepond--file-action-button:after{position:absolute;left:-.75em;right:-.75em;top:-.75em;bottom:-.75em;content:\\\"\\\"}.filepond--file-action-button{cursor:auto;color:#fff;border-radius:50%;background-color:rgba(0,0,0,.5);background-image:none;box-shadow:0 0 0 0 hsla(0,0%,100%,0);transition:box-shadow .25s ease-in}.filepond--file-action-button:focus,.filepond--file-action-button:hover{box-shadow:0 0 0 .125em hsla(0,0%,100%,.9)}.filepond--file-action-button[disabled]{color:hsla(0,0%,100%,.5);background-color:rgba(0,0,0,.25)}.filepond--file-action-button[hidden]{display:none}.filepond--action-edit-item.filepond--action-edit-item{width:2em;height:2em;padding:.1875em}.filepond--action-edit-item.filepond--action-edit-item[data-align*=center]{margin-left:-.1875em}.filepond--action-edit-item.filepond--action-edit-item[data-align*=bottom]{margin-bottom:-.1875em}.filepond--action-edit-item-alt{border:none;line-height:inherit;background:transparent;font-family:inherit;color:inherit;outline:none;padding:0;margin:0 0 0 .25em;pointer-events:all;position:absolute}.filepond--action-edit-item-alt svg{width:1.3125em;height:1.3125em}.filepond--action-edit-item-alt span{font-size:0;opacity:0}.filepond--file-info{position:static;display:flex;flex-direction:column;align-items:flex-start;flex:1;margin:0 .5em 0 0;min-width:0;will-change:transform,opacity;pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.filepond--file-info *{margin:0}.filepond--file-info .filepond--file-info-main{font-size:.75em;line-height:1.2;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:100%}.filepond--file-info .filepond--file-info-sub{font-size:.625em;opacity:.5;transition:opacity .25s ease-in-out;white-space:nowrap}.filepond--file-info .filepond--file-info-sub:empty{display:none}.filepond--file-status{position:static;display:flex;flex-direction:column;align-items:flex-end;flex-grow:0;flex-shrink:0;margin:0;min-width:2.25em;text-align:right;will-change:transform,opacity;pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.filepond--file-status *{margin:0;white-space:nowrap}.filepond--file-status .filepond--file-status-main{font-size:.75em;line-height:1.2}.filepond--file-status .filepond--file-status-sub{font-size:.625em;opacity:.5;transition:opacity .25s ease-in-out}.filepond--file-wrapper.filepond--file-wrapper{border:none;margin:0;padding:0;min-width:0;height:100%}.filepond--file-wrapper.filepond--file-wrapper>legend{position:absolute;overflow:hidden;height:1px;width:1px;padding:0;border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);white-space:nowrap}.filepond--file{position:static;display:flex;height:100%;align-items:flex-start;padding:.5625em;color:#fff;border-radius:.5em}.filepond--file .filepond--file-status{margin-left:auto;margin-right:2.25em}.filepond--file .filepond--processing-complete-indicator{pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;z-index:3}.filepond--file .filepond--file-action-button,.filepond--file .filepond--processing-complete-indicator,.filepond--file .filepond--progress-indicator{position:absolute}.filepond--file [data-align*=left]{left:.5625em}.filepond--file [data-align*=right]{right:.5625em}.filepond--file [data-align*=center]{left:calc(50% - .8125em)}.filepond--file [data-align*=bottom]{bottom:1.125em}.filepond--file [data-align=center]{top:calc(50% - .8125em)}.filepond--file .filepond--progress-indicator{margin-top:.1875em}.filepond--file .filepond--progress-indicator[data-align*=right]{margin-right:.1875em}.filepond--file .filepond--progress-indicator[data-align*=left]{margin-left:.1875em}[data-filepond-item-state*=error] .filepond--file-info,[data-filepond-item-state*=invalid] .filepond--file-info,[data-filepond-item-state=cancelled] .filepond--file-info{margin-right:2.25em}[data-filepond-item-state~=processing] .filepond--file-status-sub{opacity:0}[data-filepond-item-state~=processing] .filepond--action-abort-item-processing~.filepond--file-status .filepond--file-status-sub{opacity:.5}[data-filepond-item-state=processing-error] .filepond--file-status-sub{opacity:0}[data-filepond-item-state=processing-error] .filepond--action-retry-item-processing~.filepond--file-status .filepond--file-status-sub{opacity:.5}[data-filepond-item-state=processing-complete] .filepond--action-revert-item-processing svg{-webkit-animation:fall .5s linear .125s both;animation:fall .5s linear .125s both}[data-filepond-item-state=processing-complete] .filepond--file-status-sub{opacity:.5}[data-filepond-item-state=processing-complete] .filepond--file-info-sub,[data-filepond-item-state=processing-complete] .filepond--processing-complete-indicator:not([style*=hidden])~.filepond--file-status .filepond--file-status-sub{opacity:0}[data-filepond-item-state=processing-complete] .filepond--action-revert-item-processing~.filepond--file-info .filepond--file-info-sub{opacity:.5}[data-filepond-item-state*=error] .filepond--file-wrapper,[data-filepond-item-state*=error] .filepond--panel,[data-filepond-item-state*=invalid] .filepond--file-wrapper,[data-filepond-item-state*=invalid] .filepond--panel{-webkit-animation:shake .65s linear both;animation:shake .65s linear both}[data-filepond-item-state*=busy] .filepond--progress-indicator svg{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes shake{10%,90%{-webkit-transform:translateX(-.0625em);transform:translateX(-.0625em)}20%,80%{-webkit-transform:translateX(.125em);transform:translateX(.125em)}30%,50%,70%{-webkit-transform:translateX(-.25em);transform:translateX(-.25em)}40%,60%{-webkit-transform:translateX(.25em);transform:translateX(.25em)}}@keyframes shake{10%,90%{-webkit-transform:translateX(-.0625em);transform:translateX(-.0625em)}20%,80%{-webkit-transform:translateX(.125em);transform:translateX(.125em)}30%,50%,70%{-webkit-transform:translateX(-.25em);transform:translateX(-.25em)}40%,60%{-webkit-transform:translateX(.25em);transform:translateX(.25em)}}@-webkit-keyframes fall{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}70%{opacity:1;-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}to{-webkit-transform:scale(1);transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}}@keyframes fall{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}70%{opacity:1;-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}to{-webkit-transform:scale(1);transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}}.filepond--hopper[data-hopper-state=drag-over]>*{pointer-events:none}.filepond--hopper[data-hopper-state=drag-over]:after{content:\\\"\\\";position:absolute;left:0;top:0;right:0;bottom:0;z-index:100}.filepond--progress-indicator{z-index:103}.filepond--file-action-button{z-index:102}.filepond--file-status{z-index:101}.filepond--file-info{z-index:100}.filepond--item{position:absolute;top:0;left:0;right:0;z-index:1;padding:0;margin:.25em;will-change:transform,opacity;touch-action:auto}.filepond--item>.filepond--panel{z-index:-1}.filepond--item>.filepond--panel .filepond--panel-bottom{box-shadow:0 .0625em .125em -.0625em rgba(0,0,0,.25)}.filepond--item>.filepond--file-wrapper,.filepond--item>.filepond--panel{transition:opacity .15s ease-out}.filepond--item[data-drag-state]{cursor:-webkit-grab;cursor:grab}.filepond--item[data-drag-state]>.filepond--panel{transition:box-shadow .125s ease-in-out;box-shadow:0 0 0 transparent}.filepond--item[data-drag-state=drag]{cursor:-webkit-grabbing;cursor:grabbing}.filepond--item[data-drag-state=drag]>.filepond--panel{box-shadow:0 .125em .3125em rgba(0,0,0,.325)}.filepond--item[data-drag-state]:not([data-drag-state=idle]){z-index:2}.filepond--item-panel{background-color:#64605e}[data-filepond-item-state=processing-complete] .filepond--item-panel{background-color:#369763}[data-filepond-item-state*=error] .filepond--item-panel,[data-filepond-item-state*=invalid] .filepond--item-panel{background-color:#c44e47}.filepond--item-panel{border-radius:.5em;transition:background-color .25s}.filepond--list-scroller{position:absolute;top:0;left:0;right:0;margin:0;will-change:transform}.filepond--list-scroller[data-state=overflow] .filepond--list{bottom:0;right:0}.filepond--list-scroller[data-state=overflow]{overflow-y:scroll;overflow-x:hidden;-webkit-overflow-scrolling:touch;-webkit-mask:linear-gradient(180deg,#000 calc(100% - .5em),transparent);mask:linear-gradient(180deg,#000 calc(100% - .5em),transparent)}.filepond--list-scroller::-webkit-scrollbar{background:transparent}.filepond--list-scroller::-webkit-scrollbar:vertical{width:1em}.filepond--list-scroller::-webkit-scrollbar:horizontal{height:0}.filepond--list-scroller::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.3);border-radius:99999px;border:.3125em solid transparent;background-clip:content-box}.filepond--list.filepond--list{position:absolute;top:0;margin:0;padding:0;list-style-type:none;will-change:transform}.filepond--list{left:.75em;right:.75em}.filepond--root[data-style-panel-layout~=integrated]{width:100%;height:100%;max-width:none;margin:0}.filepond--root[data-style-panel-layout~=circle] .filepond--panel-root,.filepond--root[data-style-panel-layout~=integrated] .filepond--panel-root{border-radius:0}.filepond--root[data-style-panel-layout~=circle] .filepond--panel-root>*,.filepond--root[data-style-panel-layout~=integrated] .filepond--panel-root>*{display:none}.filepond--root[data-style-panel-layout~=circle] .filepond--drop-label,.filepond--root[data-style-panel-layout~=integrated] .filepond--drop-label{bottom:0;height:auto;display:flex;justify-content:center;align-items:center;z-index:7}.filepond--root[data-style-panel-layout~=circle] .filepond--item-panel,.filepond--root[data-style-panel-layout~=integrated] .filepond--item-panel{display:none}.filepond--root[data-style-panel-layout~=compact] .filepond--list-scroller,.filepond--root[data-style-panel-layout~=integrated] .filepond--list-scroller{overflow:hidden;height:100%;margin-top:0;margin-bottom:0}.filepond--root[data-style-panel-layout~=compact] .filepond--list,.filepond--root[data-style-panel-layout~=integrated] .filepond--list{left:0;right:0;height:100%}.filepond--root[data-style-panel-layout~=compact] .filepond--item,.filepond--root[data-style-panel-layout~=integrated] .filepond--item{margin:0}.filepond--root[data-style-panel-layout~=compact] .filepond--file-wrapper,.filepond--root[data-style-panel-layout~=integrated] .filepond--file-wrapper{height:100%}.filepond--root[data-style-panel-layout~=compact] .filepond--drop-label,.filepond--root[data-style-panel-layout~=integrated] .filepond--drop-label{z-index:7}.filepond--root[data-style-panel-layout~=circle]{border-radius:99999rem;overflow:hidden}.filepond--root[data-style-panel-layout~=circle]>.filepond--panel{border-radius:inherit}.filepond--root[data-style-panel-layout~=circle] .filepond--file-info,.filepond--root[data-style-panel-layout~=circle] .filepond--file-status,.filepond--root[data-style-panel-layout~=circle]>.filepond--panel>*{display:none}.filepond--root[data-style-panel-layout~=circle] .filepond--action-edit-item{opacity:1!important;visibility:visible!important}@media not all and (min-resolution:0.001dpcm){@supports (-webkit-appearance:none) and (stroke-color:transparent){.filepond--root[data-style-panel-layout~=circle]{will-change:transform}}}.filepond--panel-root{border-radius:.5em;background-color:#f1f0ef}.filepond--panel{position:absolute;left:0;top:0;right:0;margin:0;height:100%!important;pointer-events:none}.filepond-panel:not([data-scalable=false]){height:auto!important}.filepond--panel[data-scalable=false]>div{display:none}.filepond--panel[data-scalable=true]{-webkit-transform-style:preserve-3d;transform-style:preserve-3d;background-color:transparent!important;border:none!important}.filepond--panel-bottom,.filepond--panel-center,.filepond--panel-top{position:absolute;left:0;top:0;right:0;margin:0;padding:0}.filepond--panel-bottom,.filepond--panel-top{height:.5em}.filepond--panel-top{border-bottom-left-radius:0!important;border-bottom-right-radius:0!important;border-bottom:none!important}.filepond--panel-top:after{content:\\\"\\\";position:absolute;height:2px;left:0;right:0;bottom:-1px;background-color:inherit}.filepond--panel-bottom,.filepond--panel-center{will-change:transform;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform-origin:left top;transform-origin:left top;-webkit-transform:translate3d(0,.5em,0);transform:translate3d(0,.5em,0)}.filepond--panel-bottom{border-top-left-radius:0!important;border-top-right-radius:0!important;border-top:none!important}.filepond--panel-bottom:before{content:\\\"\\\";position:absolute;height:2px;left:0;right:0;top:-1px;background-color:inherit}.filepond--panel-center{height:100px!important;border-top:none!important;border-bottom:none!important;border-radius:0!important}.filepond--panel-center:not([style]){visibility:hidden}.filepond--progress-indicator{position:static;width:1.25em;height:1.25em;color:#fff;margin:0;pointer-events:none;will-change:transform,opacity}.filepond--progress-indicator svg{width:100%;height:100%;vertical-align:top;transform-box:fill-box}.filepond--progress-indicator path{fill:none;stroke:currentColor}.filepond--list-scroller{z-index:6}.filepond--drop-label{z-index:5}.filepond--drip{z-index:3}.filepond--root>.filepond--panel{z-index:2}.filepond--browser{z-index:1}.filepond--root{box-sizing:border-box;position:relative;margin-bottom:1em;font-size:1rem;line-height:normal;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:450;text-align:left;text-rendering:optimizeLegibility;direction:ltr;contain:layout style size}.filepond--root *{box-sizing:inherit;line-height:inherit}.filepond--root :not(text){font-size:inherit}.filepond--root[data-disabled]{pointer-events:none}.filepond--root[data-disabled] .filepond--list-scroller{pointer-events:all}.filepond--root[data-disabled] .filepond--list{pointer-events:none}.filepond--root .filepond--drop-label{min-height:4.75em}.filepond--root .filepond--list-scroller{margin-top:1em;margin-bottom:1em}.filepond--root .filepond--credits{position:absolute;right:0;opacity:.4;line-height:.85;font-size:11px;color:inherit;text-decoration:none;z-index:3;bottom:-14px}.filepond--root .filepond--credits[style]{top:0;bottom:auto;margin-top:14px}\", \"\"]);\n\n// exports\n","/*!\n * vue-filepond v5.1.3\n * A handy FilePond adapter component for Vue\n * \n * Copyright (c) 2019 PQINA\n * https://pqina.nl/filepond\n * \n * Licensed under the MIT license.\n */\n\n(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define('vueFilePond', ['exports', 'vue', 'filepond'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(exports, require('vue'), require('filepond'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod.exports, global.Vue, global.FilePond);\n        global.vueFilePond = mod.exports;\n    }\n})(this, function (exports, _vue, _filepond) {\n    'use strict';\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n    exports.setOptions = undefined;\n\n    var _vue2 = _interopRequireDefault(_vue);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    // Methods not made available to the component\n    var filteredComponentMethods = ['setOptions', 'on', 'off', 'onOnce', 'appendTo', 'insertAfter', 'insertBefore', 'isAttachedTo', 'replaceElement', 'restoreElement', 'destroy'];\n\n    // Test if is supported on this client\n    var isSupported = (0, _filepond.supported)();\n\n    // Setup initial prop types and update when plugins are added\n    var getNativeConstructorFromType = function getNativeConstructorFromType(type) {\n        return {\n            string: String,\n            boolean: Boolean,\n            array: Array,\n            function: Function,\n            int: Number,\n            serverapi: Object,\n            object: Object\n        }[type];\n    };\n\n    // Activated props\n    var props = {};\n\n    // Events that need to be mapped to emitters\n    var events = [];\n\n    // Props to watch\n    var watch = {};\n\n    // all active instances\n    var instances = [];\n\n    // global options\n    var globalOptions = {};\n    var setOptions = exports.setOptions = function setOptions(options) {\n        globalOptions = Object.assign(globalOptions, options);\n        instances.forEach(function (instance) {\n            instance.setOptions(globalOptions);\n        });\n    };\n\n    exports.default = function () {\n\n        // register plugins in FilePond\n        _filepond.registerPlugin.apply(undefined, arguments);\n\n        // build events and props array\n        events.length = 0;\n\n        var _loop = function _loop(prop) {\n            // don't add events to the props array\n            if (/^on/.test(prop)) {\n                events.push(prop);\n                return 'continue';\n            }\n\n            // get property type ( can be either a String or the type defined within FilePond )\n            props[prop] = [String, getNativeConstructorFromType(_filepond.OptionTypes[prop])];\n\n            // setup watcher\n            watch[prop] = function (value) {\n                this._pond[prop] = value;\n            };\n        };\n\n        for (var prop in _filepond.OptionTypes) {\n            var _ret = _loop(prop);\n\n            if (_ret === 'continue') continue;\n        }\n\n        // create \n        return _vue2.default.component('FilePond', {\n            name: 'FilePond',\n            props: props,\n            watch: watch,\n            render: function render(h) {\n                return h('div', {\n                    'class': {\n                        'filepond--wrapper': true\n                    }\n                }, [h('input', {\n                    attrs: {\n                        id: this.id,\n                        name: this.name,\n                        type: 'file',\n                        'class': this.className,\n                        required: this.required,\n                        multiple: this.allowMultiple,\n                        accept: this.acceptedFileTypes,\n                        capture: this.captureMethod\n                    }\n                })]);\n            },\n\n\n            // Will setup FilePond instance when mounted\n            mounted: function mounted() {\n                var _this = this;\n\n                // exit here if not supported\n                if (!isSupported) {\n                    return;\n                }\n\n                // get pond element\n                this._element = this.$el.querySelector('input');\n\n                // Map FilePond callback methods to Vue $emitters\n                var options = events.reduce(function (obj, value) {\n                    obj[value] = function () {\n                        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                            args[_key] = arguments[_key];\n                        }\n\n                        _this.$emit('input', _this._pond ? _this._pond.getFiles() : []);\n                        _this.$emit.apply(_this, [value.substr(2)].concat(args));\n                    };\n                    return obj;\n                }, {});\n\n                // Scoop up attributes that might not have been caught by Vue ( because the props object is extended dynamically )\n                var attrs = Object.assign({}, this.$attrs);\n\n                // Create our pond\n                this._pond = (0, _filepond.create)(this._element, Object.assign({}, globalOptions, options, attrs, this.$options.propsData));\n\n                // Copy instance method references to component instance\n                Object.keys(this._pond).filter(function (key) {\n                    return !filteredComponentMethods.includes(key);\n                }).forEach(function (key) {\n                    _this[key] = _this._pond[key];\n                });\n\n                // Add to instances so we can apply global options when used\n                instances.push(this._pond);\n            },\n\n\n            // Will clean up FilePond instance when unmounted\n            destroyed: function destroyed() {\n                var _this2 = this;\n\n                // reference to detached method\n                var detached = this.$options.detached;\n\n                // no longer attached, clean up\n\n                if (!this.$el.offsetParent) {\n                    detached.call(this);\n                    return;\n                }\n\n                // if we're still attached it's likely a transition is running, we need to \n                // determine the moment when we're no longer attached to the DOM so we can \n                // clean up properly\n                var mutationHandler = function mutationHandler(mutations, observer) {\n                    var removedNodes = (mutations[0] || {}).removedNodes || [];\n                    var removedNode = removedNodes[0];\n                    if (!removedNode || !removedNode.contains(_this2.$el)) return;\n                    observer.disconnect();\n                    detached.call(_this2);\n                };\n\n                // start observing parent element for changes to the DOM\n                var observer = new MutationObserver(mutationHandler);\n                observer.observe(document.documentElement, { childList: true, subtree: true });\n            },\n\n\n            // called when the component root node has been detached\n            detached: function detached() {\n\n                // exit when no pond defined\n                if (!this._pond) return;\n\n                // bye bye pond\n                this._pond.destroy();\n\n                // remove from instances\n                var index = instances.indexOf(this._pond);\n                if (index >= 0) {\n                    instances.splice(index, 1);\n                }\n\n                // clear reference\n                this._pond = null;\n            }\n        });\n    };\n});\n\n\n","/*!\n * FilePondPluginFileValidateType 1.2.9\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginFileValidateType = factory()));\n})(this, function() {\n    'use strict';\n\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        // get quick reference to Type utils\n        var Type = utils.Type,\n            isString = utils.isString,\n            replaceInString = utils.replaceInString,\n            guesstimateMimeType = utils.guesstimateMimeType,\n            getExtensionFromFilename = utils.getExtensionFromFilename,\n            getFilenameFromURL = utils.getFilenameFromURL;\n\n        var mimeTypeMatchesWildCard = function mimeTypeMatchesWildCard(mimeType, wildcard) {\n            var mimeTypeGroup = (/^[^/]+/.exec(mimeType) || []).pop(); // image/png -> image\n            var wildcardGroup = wildcard.slice(0, -2); // image/* -> image\n            return mimeTypeGroup === wildcardGroup;\n        };\n\n        var isValidMimeType = function isValidMimeType(acceptedTypes, userInputType) {\n            return acceptedTypes.some(function(acceptedType) {\n                // accepted is wildcard mime type\n                if (/\\*$/.test(acceptedType)) {\n                    return mimeTypeMatchesWildCard(userInputType, acceptedType);\n                }\n\n                // is normal mime type\n                return acceptedType === userInputType;\n            });\n        };\n\n        var getItemType = function getItemType(item) {\n            // if the item is a url we guess the mime type by the extension\n            var type = '';\n            if (isString(item)) {\n                var filename = getFilenameFromURL(item);\n                var extension = getExtensionFromFilename(filename);\n                if (extension) {\n                    type = guesstimateMimeType(extension);\n                }\n            } else {\n                type = item.type;\n            }\n\n            return type;\n        };\n\n        var validateFile = function validateFile(item, acceptedFileTypes, typeDetector) {\n            // no types defined, everything is allowed \\o/\n            if (acceptedFileTypes.length === 0) {\n                return true;\n            }\n\n            // gets the item type\n            var type = getItemType(item);\n\n            // no type detector, test now\n            if (!typeDetector) {\n                return isValidMimeType(acceptedFileTypes, type);\n            }\n\n            // use type detector\n            return new Promise(function(resolve, reject) {\n                typeDetector(item, type)\n                    .then(function(detectedType) {\n                        if (isValidMimeType(acceptedFileTypes, detectedType)) {\n                            resolve();\n                        } else {\n                            reject();\n                        }\n                    })\n                    .catch(reject);\n            });\n        };\n\n        var applyMimeTypeMap = function applyMimeTypeMap(map) {\n            return function(acceptedFileType) {\n                return map[acceptedFileType] === null\n                    ? false\n                    : map[acceptedFileType] || acceptedFileType;\n            };\n        };\n\n        // setup attribute mapping for accept\n        addFilter('SET_ATTRIBUTE_TO_OPTION_MAP', function(map) {\n            return Object.assign(map, {\n                accept: 'acceptedFileTypes',\n            });\n        });\n\n        // filtering if an item is allowed in hopper\n        addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n            var query = _ref2.query;\n            // if we are not doing file type validation exit\n            if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n                return true;\n            }\n\n            // we validate the file against the accepted file types\n            return validateFile(file, query('GET_ACCEPTED_FILE_TYPES'));\n        });\n\n        // called for each file that is loaded\n        // right before it is set to the item state\n        // should return a promise\n        addFilter('LOAD_FILE', function(file, _ref3) {\n            var query = _ref3.query;\n            return new Promise(function(resolve, reject) {\n                if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n                    resolve(file);\n                    return;\n                }\n\n                var acceptedFileTypes = query('GET_ACCEPTED_FILE_TYPES');\n\n                // custom type detector method\n                var typeDetector = query('GET_FILE_VALIDATE_TYPE_DETECT_TYPE');\n\n                // if invalid, exit here\n                var validationResult = validateFile(file, acceptedFileTypes, typeDetector);\n\n                var handleRejection = function handleRejection() {\n                    var acceptedFileTypesMapped = acceptedFileTypes\n                        .map(\n                            applyMimeTypeMap(\n                                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP')\n                            )\n                        )\n                        .filter(function(label) {\n                            return label !== false;\n                        });\n\n                    var acceptedFileTypesMappedUnique = acceptedFileTypesMapped.filter(function(\n                        item,\n                        index\n                    ) {\n                        return acceptedFileTypesMapped.indexOf(item) === index;\n                    });\n\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_FILE_TYPE_NOT_ALLOWED'),\n                            sub: replaceInString(\n                                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES'),\n                                {\n                                    allTypes: acceptedFileTypesMappedUnique.join(', '),\n                                    allButLastType: acceptedFileTypesMappedUnique\n                                        .slice(0, -1)\n                                        .join(', '),\n                                    lastType:\n                                        acceptedFileTypesMappedUnique[\n                                            acceptedFileTypesMappedUnique.length - 1\n                                        ],\n                                }\n                            ),\n                        },\n                    });\n                };\n\n                // has returned new filename immidiately\n                if (typeof validationResult === 'boolean') {\n                    if (!validationResult) {\n                        return handleRejection();\n                    }\n                    return resolve(file);\n                }\n\n                // is promise\n                validationResult\n                    .then(function() {\n                        resolve(file);\n                    })\n                    .catch(handleRejection);\n            });\n        });\n\n        // expose plugin\n        return {\n            // default options\n            options: {\n                // Enable or disable file type validation\n                allowFileTypeValidation: [true, Type.BOOLEAN],\n\n                // What file types to accept\n                acceptedFileTypes: [[], Type.ARRAY],\n                // - must be comma separated\n                // - mime types: image/png, image/jpeg, image/gif\n                // - extensions: .png, .jpg, .jpeg ( not enabled yet )\n                // - wildcards: image/*\n\n                // label to show when a type is not allowed\n                labelFileTypeNotAllowed: ['File is of invalid type', Type.STRING],\n\n                // nicer label\n                fileValidateTypeLabelExpectedTypes: [\n                    'Expects {allButLastType} or {lastType}',\n                    Type.STRING,\n                ],\n\n                // map mime types to extensions\n                fileValidateTypeLabelExpectedTypesMap: [{}, Type.OBJECT],\n\n                // Custom function to detect type of file\n                fileValidateTypeDetectType: [null, Type.FUNCTION],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","/*!\n * FilePondPluginFileValidateSize 2.2.8\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginFileValidateSize = factory()));\n})(this, function() {\n    'use strict';\n\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        // get quick reference to Type utils\n        var Type = utils.Type,\n            replaceInString = utils.replaceInString,\n            toNaturalFileSize = utils.toNaturalFileSize;\n\n        // filtering if an item is allowed in hopper\n        addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n            var query = _ref2.query;\n            if (!query('GET_ALLOW_FILE_SIZE_VALIDATION')) {\n                return true;\n            }\n\n            var sizeMax = query('GET_MAX_FILE_SIZE');\n            if (sizeMax !== null && file.size > sizeMax) {\n                return false;\n            }\n\n            var sizeMin = query('GET_MIN_FILE_SIZE');\n            if (sizeMin !== null && file.size < sizeMin) {\n                return false;\n            }\n\n            return true;\n        });\n\n        // called for each file that is loaded\n        // right before it is set to the item state\n        // should return a promise\n        addFilter('LOAD_FILE', function(file, _ref3) {\n            var query = _ref3.query;\n            return new Promise(function(resolve, reject) {\n                // if not allowed, all fine, exit\n                if (!query('GET_ALLOW_FILE_SIZE_VALIDATION')) {\n                    return resolve(file);\n                }\n\n                // check if file should be filtered\n                var fileFilter = query('GET_FILE_VALIDATE_SIZE_FILTER');\n                if (fileFilter && !fileFilter(file)) {\n                    return resolve(file);\n                }\n\n                // reject or resolve based on file size\n                var sizeMax = query('GET_MAX_FILE_SIZE');\n                if (sizeMax !== null && file.size > sizeMax) {\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_MAX_FILE_SIZE_EXCEEDED'),\n                            sub: replaceInString(query('GET_LABEL_MAX_FILE_SIZE'), {\n                                filesize: toNaturalFileSize(\n                                    sizeMax,\n                                    '.',\n                                    query('GET_FILE_SIZE_BASE'),\n                                    query('GET_FILE_SIZE_LABELS', query)\n                                ),\n                            }),\n                        },\n                    });\n\n                    return;\n                }\n\n                // reject or resolve based on file size\n                var sizeMin = query('GET_MIN_FILE_SIZE');\n                if (sizeMin !== null && file.size < sizeMin) {\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_MIN_FILE_SIZE_EXCEEDED'),\n                            sub: replaceInString(query('GET_LABEL_MIN_FILE_SIZE'), {\n                                filesize: toNaturalFileSize(\n                                    sizeMin,\n                                    '.',\n                                    query('GET_FILE_SIZE_BASE'),\n                                    query('GET_FILE_SIZE_LABELS', query)\n                                ),\n                            }),\n                        },\n                    });\n\n                    return;\n                }\n\n                // returns the current option value\n                var totalSizeMax = query('GET_MAX_TOTAL_FILE_SIZE');\n                if (totalSizeMax !== null) {\n                    // get the current total file size\n                    var currentTotalSize = query('GET_ACTIVE_ITEMS').reduce(function(total, item) {\n                        return total + item.fileSize;\n                    }, 0);\n\n                    // get the size of the new file\n                    if (currentTotalSize > totalSizeMax) {\n                        reject({\n                            status: {\n                                main: query('GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED'),\n                                sub: replaceInString(query('GET_LABEL_MAX_TOTAL_FILE_SIZE'), {\n                                    filesize: toNaturalFileSize(\n                                        totalSizeMax,\n                                        '.',\n                                        query('GET_FILE_SIZE_BASE'),\n                                        query('GET_FILE_SIZE_LABELS', query)\n                                    ),\n                                }),\n                            },\n                        });\n\n                        return;\n                    }\n                }\n\n                // file is fine, let's pass it back\n                resolve(file);\n            });\n        });\n\n        return {\n            options: {\n                // Enable or disable file type validation\n                allowFileSizeValidation: [true, Type.BOOLEAN],\n\n                // Max individual file size in bytes\n                maxFileSize: [null, Type.INT],\n\n                // Min individual file size in bytes\n                minFileSize: [null, Type.INT],\n\n                // Max total file size in bytes\n                maxTotalFileSize: [null, Type.INT],\n\n                // Filter the files that need to be validated for size\n                fileValidateSizeFilter: [null, Type.FUNCTION],\n\n                // error labels\n                labelMinFileSizeExceeded: ['File is too small', Type.STRING],\n                labelMinFileSize: ['Minimum file size is {filesize}', Type.STRING],\n\n                labelMaxFileSizeExceeded: ['File is too large', Type.STRING],\n                labelMaxFileSize: ['Maximum file size is {filesize}', Type.STRING],\n\n                labelMaxTotalFileSizeExceeded: ['Maximum total size exceeded', Type.STRING],\n                labelMaxTotalFileSize: ['Maximum total file size is {filesize}', Type.STRING],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","\nvar content = require(\"!!../../css-loader/index.js??ref--24-1!../../postcss-loader/src/index.js??ref--24-2!./filepond.min.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../css-loader/index.js??ref--24-1!../../postcss-loader/src/index.js??ref--24-2!./filepond.min.css\", function() {\n\t\tvar newContent = require(\"!!../../css-loader/index.js??ref--24-1!../../postcss-loader/src/index.js??ref--24-2!./filepond.min.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*!\n * FilePond 4.32.7\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? factory(exports)\n        : typeof define === 'function' && define.amd\n        ? define(['exports'], factory)\n        : ((global = global || self), factory((global.FilePond = {})));\n})(this, function(exports) {\n    'use strict';\n\n    var isNode = function isNode(value) {\n        return value instanceof HTMLElement;\n    };\n\n    var createStore = function createStore(initialState) {\n        var queries = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var actions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        // internal state\n        var state = Object.assign({}, initialState);\n\n        // contains all actions for next frame, is clear when actions are requested\n        var actionQueue = [];\n        var dispatchQueue = [];\n\n        // returns a duplicate of the current state\n        var getState = function getState() {\n            return Object.assign({}, state);\n        };\n\n        // returns a duplicate of the actions array and clears the actions array\n        var processActionQueue = function processActionQueue() {\n            // create copy of actions queue\n            var queue = [].concat(actionQueue);\n\n            // clear actions queue (we don't want no double actions)\n            actionQueue.length = 0;\n\n            return queue;\n        };\n\n        // processes actions that might block the main UI thread\n        var processDispatchQueue = function processDispatchQueue() {\n            // create copy of actions queue\n            var queue = [].concat(dispatchQueue);\n\n            // clear actions queue (we don't want no double actions)\n            dispatchQueue.length = 0;\n\n            // now dispatch these actions\n            queue.forEach(function(_ref) {\n                var type = _ref.type,\n                    data = _ref.data;\n                dispatch(type, data);\n            });\n        };\n\n        // adds a new action, calls its handler and\n        var dispatch = function dispatch(type, data, isBlocking) {\n            // is blocking action (should never block if document is hidden)\n            if (isBlocking && !document.hidden) {\n                dispatchQueue.push({ type: type, data: data });\n                return;\n            }\n\n            // if this action has a handler, handle the action\n            if (actionHandlers[type]) {\n                actionHandlers[type](data);\n            }\n\n            // now add action\n            actionQueue.push({\n                type: type,\n                data: data,\n            });\n        };\n\n        var query = function query(str) {\n            var _queryHandles;\n            for (\n                var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n                _key < _len;\n                _key++\n            ) {\n                args[_key - 1] = arguments[_key];\n            }\n            return queryHandles[str]\n                ? (_queryHandles = queryHandles)[str].apply(_queryHandles, args)\n                : null;\n        };\n\n        var api = {\n            getState: getState,\n            processActionQueue: processActionQueue,\n            processDispatchQueue: processDispatchQueue,\n            dispatch: dispatch,\n            query: query,\n        };\n\n        var queryHandles = {};\n        queries.forEach(function(query) {\n            queryHandles = Object.assign({}, query(state), {}, queryHandles);\n        });\n\n        var actionHandlers = {};\n        actions.forEach(function(action) {\n            actionHandlers = Object.assign({}, action(dispatch, query, state), {}, actionHandlers);\n        });\n\n        return api;\n    };\n\n    var defineProperty = function defineProperty(obj, property, definition) {\n        if (typeof definition === 'function') {\n            obj[property] = definition;\n            return;\n        }\n        Object.defineProperty(obj, property, Object.assign({}, definition));\n    };\n\n    var forin = function forin(obj, cb) {\n        for (var key in obj) {\n            if (!obj.hasOwnProperty(key)) {\n                continue;\n            }\n\n            cb(key, obj[key]);\n        }\n    };\n\n    var createObject = function createObject(definition) {\n        var obj = {};\n        forin(definition, function(property) {\n            defineProperty(obj, property, definition[property]);\n        });\n        return obj;\n    };\n\n    var attr = function attr(node, name) {\n        var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        if (value === null) {\n            return node.getAttribute(name) || node.hasAttribute(name);\n        }\n        node.setAttribute(name, value);\n    };\n\n    var ns = 'http://www.w3.org/2000/svg';\n    var svgElements = ['svg', 'path']; // only svg elements used\n\n    var isSVGElement = function isSVGElement(tag) {\n        return svgElements.includes(tag);\n    };\n\n    var createElement = function createElement(tag, className) {\n        var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        if (typeof className === 'object') {\n            attributes = className;\n            className = null;\n        }\n        var element = isSVGElement(tag)\n            ? document.createElementNS(ns, tag)\n            : document.createElement(tag);\n        if (className) {\n            if (isSVGElement(tag)) {\n                attr(element, 'class', className);\n            } else {\n                element.className = className;\n            }\n        }\n        forin(attributes, function(name, value) {\n            attr(element, name, value);\n        });\n        return element;\n    };\n\n    var appendChild = function appendChild(parent) {\n        return function(child, index) {\n            if (typeof index !== 'undefined' && parent.children[index]) {\n                parent.insertBefore(child, parent.children[index]);\n            } else {\n                parent.appendChild(child);\n            }\n        };\n    };\n\n    var appendChildView = function appendChildView(parent, childViews) {\n        return function(view, index) {\n            if (typeof index !== 'undefined') {\n                childViews.splice(index, 0, view);\n            } else {\n                childViews.push(view);\n            }\n\n            return view;\n        };\n    };\n\n    var removeChildView = function removeChildView(parent, childViews) {\n        return function(view) {\n            // remove from child views\n            childViews.splice(childViews.indexOf(view), 1);\n\n            // remove the element\n            if (view.element.parentNode) {\n                parent.removeChild(view.element);\n            }\n\n            return view;\n        };\n    };\n\n    var IS_BROWSER = (function() {\n        return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    })();\n    var isBrowser = function isBrowser() {\n        return IS_BROWSER;\n    };\n\n    var testElement = isBrowser() ? createElement('svg') : {};\n    var getChildCount =\n        'children' in testElement\n            ? function(el) {\n                  return el.children.length;\n              }\n            : function(el) {\n                  return el.childNodes.length;\n              };\n\n    var getViewRect = function getViewRect(elementRect, childViews, offset, scale) {\n        var left = offset[0] || elementRect.left;\n        var top = offset[1] || elementRect.top;\n        var right = left + elementRect.width;\n        var bottom = top + elementRect.height * (scale[1] || 1);\n\n        var rect = {\n            // the rectangle of the element itself\n            element: Object.assign({}, elementRect),\n\n            // the rectangle of the element expanded to contain its children, does not include any margins\n            inner: {\n                left: elementRect.left,\n                top: elementRect.top,\n                right: elementRect.right,\n                bottom: elementRect.bottom,\n            },\n\n            // the rectangle of the element expanded to contain its children including own margin and child margins\n            // margins will be added after we've recalculated the size\n            outer: {\n                left: left,\n                top: top,\n                right: right,\n                bottom: bottom,\n            },\n        };\n\n        // expand rect to fit all child rectangles\n        childViews\n            .filter(function(childView) {\n                return !childView.isRectIgnored();\n            })\n            .map(function(childView) {\n                return childView.rect;\n            })\n            .forEach(function(childViewRect) {\n                expandRect(rect.inner, Object.assign({}, childViewRect.inner));\n                expandRect(rect.outer, Object.assign({}, childViewRect.outer));\n            });\n\n        // calculate inner width and height\n        calculateRectSize(rect.inner);\n\n        // append additional margin (top and left margins are included in top and left automatically)\n        rect.outer.bottom += rect.element.marginBottom;\n        rect.outer.right += rect.element.marginRight;\n\n        // calculate outer width and height\n        calculateRectSize(rect.outer);\n\n        return rect;\n    };\n\n    var expandRect = function expandRect(parent, child) {\n        // adjust for parent offset\n        child.top += parent.top;\n        child.right += parent.left;\n        child.bottom += parent.top;\n        child.left += parent.left;\n\n        if (child.bottom > parent.bottom) {\n            parent.bottom = child.bottom;\n        }\n\n        if (child.right > parent.right) {\n            parent.right = child.right;\n        }\n    };\n\n    var calculateRectSize = function calculateRectSize(rect) {\n        rect.width = rect.right - rect.left;\n        rect.height = rect.bottom - rect.top;\n    };\n\n    var isNumber = function isNumber(value) {\n        return typeof value === 'number';\n    };\n\n    /**\n     * Determines if position is at destination\n     * @param position\n     * @param destination\n     * @param velocity\n     * @param errorMargin\n     * @returns {boolean}\n     */\n    var thereYet = function thereYet(position, destination, velocity) {\n        var errorMargin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.001;\n        return Math.abs(position - destination) < errorMargin && Math.abs(velocity) < errorMargin;\n    };\n\n    /**\n     * Spring animation\n     */\n    var spring =\n        // default options\n        function spring() // method definition\n        {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$stiffness = _ref.stiffness,\n                stiffness = _ref$stiffness === void 0 ? 0.5 : _ref$stiffness,\n                _ref$damping = _ref.damping,\n                damping = _ref$damping === void 0 ? 0.75 : _ref$damping,\n                _ref$mass = _ref.mass,\n                mass = _ref$mass === void 0 ? 10 : _ref$mass;\n            var target = null;\n            var position = null;\n            var velocity = 0;\n            var resting = false;\n\n            // updates spring state\n            var interpolate = function interpolate(ts, skipToEndState) {\n                // in rest, don't animate\n                if (resting) return;\n\n                // need at least a target or position to do springy things\n                if (!(isNumber(target) && isNumber(position))) {\n                    resting = true;\n                    velocity = 0;\n                    return;\n                }\n\n                // calculate spring force\n                var f = -(position - target) * stiffness;\n\n                // update velocity by adding force based on mass\n                velocity += f / mass;\n\n                // update position by adding velocity\n                position += velocity;\n\n                // slow down based on amount of damping\n                velocity *= damping;\n\n                // we've arrived if we're near target and our velocity is near zero\n                if (thereYet(position, target, velocity) || skipToEndState) {\n                    position = target;\n                    velocity = 0;\n                    resting = true;\n\n                    // we done\n                    api.onupdate(position);\n                    api.oncomplete(position);\n                } else {\n                    // progress update\n                    api.onupdate(position);\n                }\n            };\n\n            /**\n             * Set new target value\n             * @param value\n             */\n            var setTarget = function setTarget(value) {\n                // if currently has no position, set target and position to this value\n                if (isNumber(value) && !isNumber(position)) {\n                    position = value;\n                }\n\n                // next target value will not be animated to\n                if (target === null) {\n                    target = value;\n                    position = value;\n                }\n\n                // let start moving to target\n                target = value;\n\n                // already at target\n                if (position === target || typeof target === 'undefined') {\n                    // now resting as target is current position, stop moving\n                    resting = true;\n                    velocity = 0;\n\n                    // done!\n                    api.onupdate(position);\n                    api.oncomplete(position);\n\n                    return;\n                }\n\n                resting = false;\n            };\n\n            // need 'api' to call onupdate callback\n            var api = createObject({\n                interpolate: interpolate,\n                target: {\n                    set: setTarget,\n                    get: function get() {\n                        return target;\n                    },\n                },\n\n                resting: {\n                    get: function get() {\n                        return resting;\n                    },\n                },\n\n                onupdate: function onupdate(value) {},\n                oncomplete: function oncomplete(value) {},\n            });\n\n            return api;\n        };\n\n    var easeLinear = function easeLinear(t) {\n        return t;\n    };\n    var easeInOutQuad = function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    };\n\n    var tween =\n        // default values\n        function tween() // method definition\n        {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$duration = _ref.duration,\n                duration = _ref$duration === void 0 ? 500 : _ref$duration,\n                _ref$easing = _ref.easing,\n                easing = _ref$easing === void 0 ? easeInOutQuad : _ref$easing,\n                _ref$delay = _ref.delay,\n                delay = _ref$delay === void 0 ? 0 : _ref$delay;\n            var start = null;\n            var t;\n            var p;\n            var resting = true;\n            var reverse = false;\n            var target = null;\n\n            var interpolate = function interpolate(ts, skipToEndState) {\n                if (resting || target === null) return;\n\n                if (start === null) {\n                    start = ts;\n                }\n\n                if (ts - start < delay) return;\n\n                t = ts - start - delay;\n\n                if (t >= duration || skipToEndState) {\n                    t = 1;\n                    p = reverse ? 0 : 1;\n                    api.onupdate(p * target);\n                    api.oncomplete(p * target);\n                    resting = true;\n                } else {\n                    p = t / duration;\n                    api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n                }\n            };\n\n            // need 'api' to call onupdate callback\n            var api = createObject({\n                interpolate: interpolate,\n                target: {\n                    get: function get() {\n                        return reverse ? 0 : target;\n                    },\n                    set: function set(value) {\n                        // is initial value\n                        if (target === null) {\n                            target = value;\n                            api.onupdate(value);\n                            api.oncomplete(value);\n                            return;\n                        }\n\n                        // want to tween to a smaller value and have a current value\n                        if (value < target) {\n                            target = 1;\n                            reverse = true;\n                        } else {\n                            // not tweening to a smaller value\n                            reverse = false;\n                            target = value;\n                        }\n\n                        // let's go!\n                        resting = false;\n                        start = null;\n                    },\n                },\n\n                resting: {\n                    get: function get() {\n                        return resting;\n                    },\n                },\n\n                onupdate: function onupdate(value) {},\n                oncomplete: function oncomplete(value) {},\n            });\n\n            return api;\n        };\n\n    var animator = {\n        spring: spring,\n        tween: tween,\n    };\n\n    /*\n                       { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n                       { translation: { type: 'spring', ... }, ... }\n                       { translation: { x: { type: 'spring', ... } } }\n                      */\n    var createAnimator = function createAnimator(definition, category, property) {\n        // default is single definition\n        // we check if transform is set, if so, we check if property is set\n        var def =\n            definition[category] && typeof definition[category][property] === 'object'\n                ? definition[category][property]\n                : definition[category] || definition;\n\n        var type = typeof def === 'string' ? def : def.type;\n        var props = typeof def === 'object' ? Object.assign({}, def) : {};\n\n        return animator[type] ? animator[type](props) : null;\n    };\n\n    var addGetSet = function addGetSet(keys, obj, props) {\n        var overwrite = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        obj = Array.isArray(obj) ? obj : [obj];\n        obj.forEach(function(o) {\n            keys.forEach(function(key) {\n                var name = key;\n                var getter = function getter() {\n                    return props[key];\n                };\n                var setter = function setter(value) {\n                    return (props[key] = value);\n                };\n\n                if (typeof key === 'object') {\n                    name = key.key;\n                    getter = key.getter || getter;\n                    setter = key.setter || setter;\n                }\n\n                if (o[name] && !overwrite) {\n                    return;\n                }\n\n                o[name] = {\n                    get: getter,\n                    set: setter,\n                };\n            });\n        });\n    };\n\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // setup animators\n\n    var animations = function animations(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI;\n        // initial properties\n        var initialProps = Object.assign({}, viewProps);\n\n        // list of all active animations\n        var animations = [];\n\n        // setup animators\n        forin(mixinConfig, function(property, animation) {\n            var animator = createAnimator(animation);\n            if (!animator) {\n                return;\n            }\n\n            // when the animator updates, update the view state value\n            animator.onupdate = function(value) {\n                viewProps[property] = value;\n            };\n\n            // set animator target\n            animator.target = initialProps[property];\n\n            // when value is set, set the animator target value\n            var prop = {\n                key: property,\n                setter: function setter(value) {\n                    // if already at target, we done!\n                    if (animator.target === value) {\n                        return;\n                    }\n\n                    animator.target = value;\n                },\n                getter: function getter() {\n                    return viewProps[property];\n                },\n            };\n\n            // add getters and setters\n            addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n            // add it to the list for easy updating from the _write method\n            animations.push(animator);\n        });\n\n        // expose internal write api\n        return {\n            write: function write(ts) {\n                var skipToEndState = document.hidden;\n                var resting = true;\n                animations.forEach(function(animation) {\n                    if (!animation.resting) resting = false;\n                    animation.interpolate(ts, skipToEndState);\n                });\n                return resting;\n            },\n            destroy: function destroy() {},\n        };\n    };\n\n    var addEvent = function addEvent(element) {\n        return function(type, fn) {\n            element.addEventListener(type, fn);\n        };\n    };\n\n    var removeEvent = function removeEvent(element) {\n        return function(type, fn) {\n            element.removeEventListener(type, fn);\n        };\n    };\n\n    // mixin\n    var listeners = function listeners(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI,\n            viewState = _ref.viewState,\n            view = _ref.view;\n        var events = [];\n\n        var add = addEvent(view.element);\n        var remove = removeEvent(view.element);\n\n        viewExternalAPI.on = function(type, fn) {\n            events.push({\n                type: type,\n                fn: fn,\n            });\n\n            add(type, fn);\n        };\n\n        viewExternalAPI.off = function(type, fn) {\n            events.splice(\n                events.findIndex(function(event) {\n                    return event.type === type && event.fn === fn;\n                }),\n                1\n            );\n\n            remove(type, fn);\n        };\n\n        return {\n            write: function write() {\n                // not busy\n                return true;\n            },\n            destroy: function destroy() {\n                events.forEach(function(event) {\n                    remove(event.type, event.fn);\n                });\n            },\n        };\n    };\n\n    // add to external api and link to props\n\n    var apis = function apis(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewExternalAPI = _ref.viewExternalAPI;\n        addGetSet(mixinConfig, viewExternalAPI, viewProps);\n    };\n\n    var isDefined = function isDefined(value) {\n        return value != null;\n    };\n\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // set initial state based on props in viewProps\n    // apply as transforms each frame\n\n    var defaults = {\n        opacity: 1,\n        scaleX: 1,\n        scaleY: 1,\n        translateX: 0,\n        translateY: 0,\n        rotateX: 0,\n        rotateY: 0,\n        rotateZ: 0,\n        originX: 0,\n        originY: 0,\n    };\n\n    var styles = function styles(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI,\n            view = _ref.view;\n        // initial props\n        var initialProps = Object.assign({}, viewProps);\n\n        // current props\n        var currentProps = {};\n\n        // we will add those properties to the external API and link them to the viewState\n        addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n        // override rect on internal and external rect getter so it takes in account transforms\n        var getOffset = function getOffset() {\n            return [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n        };\n\n        var getScale = function getScale() {\n            return [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n        };\n        var getRect = function getRect() {\n            return view.rect\n                ? getViewRect(view.rect, view.childViews, getOffset(), getScale())\n                : null;\n        };\n        viewInternalAPI.rect = { get: getRect };\n        viewExternalAPI.rect = { get: getRect };\n\n        // apply view props\n        mixinConfig.forEach(function(key) {\n            viewProps[key] =\n                typeof initialProps[key] === 'undefined' ? defaults[key] : initialProps[key];\n        });\n\n        // expose api\n        return {\n            write: function write() {\n                // see if props have changed\n                if (!propsHaveChanged(currentProps, viewProps)) {\n                    return;\n                }\n\n                // moves element to correct position on screen\n                applyStyles(view.element, viewProps);\n\n                // store new transforms\n                Object.assign(currentProps, Object.assign({}, viewProps));\n\n                // no longer busy\n                return true;\n            },\n            destroy: function destroy() {},\n        };\n    };\n\n    var propsHaveChanged = function propsHaveChanged(currentProps, newProps) {\n        // different amount of keys\n        if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n            return true;\n        }\n\n        // lets analyze the individual props\n        for (var prop in newProps) {\n            if (newProps[prop] !== currentProps[prop]) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    var applyStyles = function applyStyles(element, _ref2) {\n        var opacity = _ref2.opacity,\n            perspective = _ref2.perspective,\n            translateX = _ref2.translateX,\n            translateY = _ref2.translateY,\n            scaleX = _ref2.scaleX,\n            scaleY = _ref2.scaleY,\n            rotateX = _ref2.rotateX,\n            rotateY = _ref2.rotateY,\n            rotateZ = _ref2.rotateZ,\n            originX = _ref2.originX,\n            originY = _ref2.originY,\n            width = _ref2.width,\n            height = _ref2.height;\n\n        var transforms = '';\n        var styles = '';\n\n        // handle transform origin\n        if (isDefined(originX) || isDefined(originY)) {\n            styles += 'transform-origin: ' + (originX || 0) + 'px ' + (originY || 0) + 'px;';\n        }\n\n        // transform order is relevant\n        // 0. perspective\n        if (isDefined(perspective)) {\n            transforms += 'perspective(' + perspective + 'px) ';\n        }\n\n        // 1. translate\n        if (isDefined(translateX) || isDefined(translateY)) {\n            transforms +=\n                'translate3d(' + (translateX || 0) + 'px, ' + (translateY || 0) + 'px, 0) ';\n        }\n\n        // 2. scale\n        if (isDefined(scaleX) || isDefined(scaleY)) {\n            transforms +=\n                'scale3d(' +\n                (isDefined(scaleX) ? scaleX : 1) +\n                ', ' +\n                (isDefined(scaleY) ? scaleY : 1) +\n                ', 1) ';\n        }\n\n        // 3. rotate\n        if (isDefined(rotateZ)) {\n            transforms += 'rotateZ(' + rotateZ + 'rad) ';\n        }\n\n        if (isDefined(rotateX)) {\n            transforms += 'rotateX(' + rotateX + 'rad) ';\n        }\n\n        if (isDefined(rotateY)) {\n            transforms += 'rotateY(' + rotateY + 'rad) ';\n        }\n\n        // add transforms\n        if (transforms.length) {\n            styles += 'transform:' + transforms + ';';\n        }\n\n        // add opacity\n        if (isDefined(opacity)) {\n            styles += 'opacity:' + opacity + ';';\n\n            // if we reach zero, we make the element inaccessible\n            if (opacity === 0) {\n                styles += 'visibility:hidden;';\n            }\n\n            // if we're below 100% opacity this element can't be clicked\n            if (opacity < 1) {\n                styles += 'pointer-events:none;';\n            }\n        }\n\n        // add height\n        if (isDefined(height)) {\n            styles += 'height:' + height + 'px;';\n        }\n\n        // add width\n        if (isDefined(width)) {\n            styles += 'width:' + width + 'px;';\n        }\n\n        // apply styles\n        var elementCurrentStyle = element.elementCurrentStyle || '';\n\n        // if new styles does not match current styles, lets update!\n        if (styles.length !== elementCurrentStyle.length || styles !== elementCurrentStyle) {\n            element.style.cssText = styles;\n            // store current styles so we can compare them to new styles later on\n            // _not_ getting the style value is faster\n            element.elementCurrentStyle = styles;\n        }\n    };\n\n    var Mixins = {\n        styles: styles,\n        listeners: listeners,\n        animations: animations,\n        apis: apis,\n    };\n\n    var updateRect = function updateRect() {\n        var rect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        if (!element.layoutCalculated) {\n            rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n            rect.marginTop = parseInt(style.marginTop, 10) || 0;\n            rect.marginRight = parseInt(style.marginRight, 10) || 0;\n            rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n            rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n            element.layoutCalculated = true;\n        }\n\n        rect.left = element.offsetLeft || 0;\n        rect.top = element.offsetTop || 0;\n        rect.width = element.offsetWidth || 0;\n        rect.height = element.offsetHeight || 0;\n\n        rect.right = rect.left + rect.width;\n        rect.bottom = rect.top + rect.height;\n\n        rect.scrollTop = element.scrollTop;\n\n        rect.hidden = element.offsetParent === null;\n\n        return rect;\n    };\n\n    var createView =\n        // default view definition\n        function createView() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$tag = _ref.tag,\n                tag = _ref$tag === void 0 ? 'div' : _ref$tag,\n                _ref$name = _ref.name,\n                name = _ref$name === void 0 ? null : _ref$name,\n                _ref$attributes = _ref.attributes,\n                attributes = _ref$attributes === void 0 ? {} : _ref$attributes,\n                _ref$read = _ref.read,\n                read = _ref$read === void 0 ? function() {} : _ref$read,\n                _ref$write = _ref.write,\n                write = _ref$write === void 0 ? function() {} : _ref$write,\n                _ref$create = _ref.create,\n                create = _ref$create === void 0 ? function() {} : _ref$create,\n                _ref$destroy = _ref.destroy,\n                destroy = _ref$destroy === void 0 ? function() {} : _ref$destroy,\n                _ref$filterFrameActio = _ref.filterFrameActionsForChild,\n                filterFrameActionsForChild =\n                    _ref$filterFrameActio === void 0\n                        ? function(child, actions) {\n                              return actions;\n                          }\n                        : _ref$filterFrameActio,\n                _ref$didCreateView = _ref.didCreateView,\n                didCreateView = _ref$didCreateView === void 0 ? function() {} : _ref$didCreateView,\n                _ref$didWriteView = _ref.didWriteView,\n                didWriteView = _ref$didWriteView === void 0 ? function() {} : _ref$didWriteView,\n                _ref$ignoreRect = _ref.ignoreRect,\n                ignoreRect = _ref$ignoreRect === void 0 ? false : _ref$ignoreRect,\n                _ref$ignoreRectUpdate = _ref.ignoreRectUpdate,\n                ignoreRectUpdate = _ref$ignoreRectUpdate === void 0 ? false : _ref$ignoreRectUpdate,\n                _ref$mixins = _ref.mixins,\n                mixins = _ref$mixins === void 0 ? [] : _ref$mixins;\n            return function(\n                // each view requires reference to store\n                store\n            ) {\n                var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                // root element should not be changed\n                var element = createElement(tag, 'filepond--' + name, attributes);\n\n                // style reference should also not be changed\n                var style = window.getComputedStyle(element, null);\n\n                // element rectangle\n                var rect = updateRect();\n                var frameRect = null;\n\n                // rest state\n                var isResting = false;\n\n                // pretty self explanatory\n                var childViews = [];\n\n                // loaded mixins\n                var activeMixins = [];\n\n                // references to created children\n                var ref = {};\n\n                // state used for each instance\n                var state = {};\n\n                // list of writers that will be called to update this view\n                var writers = [\n                    write, // default writer\n                ];\n\n                var readers = [\n                    read, // default reader\n                ];\n\n                var destroyers = [\n                    destroy, // default destroy\n                ];\n\n                // core view methods\n                var getElement = function getElement() {\n                    return element;\n                };\n                var getChildViews = function getChildViews() {\n                    return childViews.concat();\n                };\n                var getReference = function getReference() {\n                    return ref;\n                };\n                var createChildView = function createChildView(store) {\n                    return function(view, props) {\n                        return view(store, props);\n                    };\n                };\n                var getRect = function getRect() {\n                    if (frameRect) {\n                        return frameRect;\n                    }\n                    frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n                    return frameRect;\n                };\n                var getStyle = function getStyle() {\n                    return style;\n                };\n\n                /**\n                 * Read data from DOM\n                 * @private\n                 */\n                var _read = function _read() {\n                    frameRect = null;\n\n                    // read child views\n                    childViews.forEach(function(child) {\n                        return child._read();\n                    });\n\n                    var shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n                    if (shouldUpdate) {\n                        updateRect(rect, element, style);\n                    }\n\n                    // readers\n                    var api = { root: internalAPI, props: props, rect: rect };\n                    readers.forEach(function(reader) {\n                        return reader(api);\n                    });\n                };\n\n                /**\n                 * Write data to DOM\n                 * @private\n                 */\n                var _write = function _write(ts, frameActions, shouldOptimize) {\n                    // if no actions, we assume that the view is resting\n                    var resting = frameActions.length === 0;\n\n                    // writers\n                    writers.forEach(function(writer) {\n                        var writerResting = writer({\n                            props: props,\n                            root: internalAPI,\n                            actions: frameActions,\n                            timestamp: ts,\n                            shouldOptimize: shouldOptimize,\n                        });\n\n                        if (writerResting === false) {\n                            resting = false;\n                        }\n                    });\n\n                    // run mixins\n                    activeMixins.forEach(function(mixin) {\n                        // if one of the mixins is still busy after write operation, we are not resting\n                        var mixinResting = mixin.write(ts);\n                        if (mixinResting === false) {\n                            resting = false;\n                        }\n                    });\n\n                    // updates child views that are currently attached to the DOM\n                    childViews\n                        .filter(function(child) {\n                            return !!child.element.parentNode;\n                        })\n                        .forEach(function(child) {\n                            // if a child view is not resting, we are not resting\n                            var childResting = child._write(\n                                ts,\n                                filterFrameActionsForChild(child, frameActions),\n                                shouldOptimize\n                            );\n\n                            if (!childResting) {\n                                resting = false;\n                            }\n                        });\n\n                    // append new elements to DOM and update those\n                    childViews\n                        //.filter(child => !child.element.parentNode)\n                        .forEach(function(child, index) {\n                            // skip\n                            if (child.element.parentNode) {\n                                return;\n                            }\n\n                            // append to DOM\n                            internalAPI.appendChild(child.element, index);\n\n                            // call read (need to know the size of these elements)\n                            child._read();\n\n                            // re-call write\n                            child._write(\n                                ts,\n                                filterFrameActionsForChild(child, frameActions),\n                                shouldOptimize\n                            );\n\n                            // we just added somthing to the dom, no rest\n                            resting = false;\n                        });\n\n                    // update resting state\n                    isResting = resting;\n\n                    didWriteView({\n                        props: props,\n                        root: internalAPI,\n                        actions: frameActions,\n                        timestamp: ts,\n                    });\n\n                    // let parent know if we are resting\n                    return resting;\n                };\n\n                var _destroy = function _destroy() {\n                    activeMixins.forEach(function(mixin) {\n                        return mixin.destroy();\n                    });\n                    destroyers.forEach(function(destroyer) {\n                        destroyer({ root: internalAPI, props: props });\n                    });\n                    childViews.forEach(function(child) {\n                        return child._destroy();\n                    });\n                };\n\n                // sharedAPI\n                var sharedAPIDefinition = {\n                    element: {\n                        get: getElement,\n                    },\n\n                    style: {\n                        get: getStyle,\n                    },\n\n                    childViews: {\n                        get: getChildViews,\n                    },\n                };\n\n                // private API definition\n                var internalAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                    rect: {\n                        get: getRect,\n                    },\n\n                    // access to custom children references\n                    ref: {\n                        get: getReference,\n                    },\n\n                    // dom modifiers\n                    is: function is(needle) {\n                        return name === needle;\n                    },\n                    appendChild: appendChild(element),\n                    createChildView: createChildView(store),\n                    linkView: function linkView(view) {\n                        childViews.push(view);\n                        return view;\n                    },\n                    unlinkView: function unlinkView(view) {\n                        childViews.splice(childViews.indexOf(view), 1);\n                    },\n                    appendChildView: appendChildView(element, childViews),\n                    removeChildView: removeChildView(element, childViews),\n                    registerWriter: function registerWriter(writer) {\n                        return writers.push(writer);\n                    },\n                    registerReader: function registerReader(reader) {\n                        return readers.push(reader);\n                    },\n                    registerDestroyer: function registerDestroyer(destroyer) {\n                        return destroyers.push(destroyer);\n                    },\n                    invalidateLayout: function invalidateLayout() {\n                        return (element.layoutCalculated = false);\n                    },\n\n                    // access to data store\n                    dispatch: store.dispatch,\n                    query: store.query,\n                });\n\n                // public view API methods\n                var externalAPIDefinition = {\n                    element: {\n                        get: getElement,\n                    },\n\n                    childViews: {\n                        get: getChildViews,\n                    },\n\n                    rect: {\n                        get: getRect,\n                    },\n\n                    resting: {\n                        get: function get() {\n                            return isResting;\n                        },\n                    },\n\n                    isRectIgnored: function isRectIgnored() {\n                        return ignoreRect;\n                    },\n                    _read: _read,\n                    _write: _write,\n                    _destroy: _destroy,\n                };\n\n                // mixin API methods\n                var mixinAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                    rect: {\n                        get: function get() {\n                            return rect;\n                        },\n                    },\n                });\n\n                // add mixin functionality\n                Object.keys(mixins)\n                    .sort(function(a, b) {\n                        // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n                        if (a === 'styles') {\n                            return 1;\n                        } else if (b === 'styles') {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .forEach(function(key) {\n                        var mixinAPI = Mixins[key]({\n                            mixinConfig: mixins[key],\n                            viewProps: props,\n                            viewState: state,\n                            viewInternalAPI: internalAPIDefinition,\n                            viewExternalAPI: externalAPIDefinition,\n                            view: createObject(mixinAPIDefinition),\n                        });\n\n                        if (mixinAPI) {\n                            activeMixins.push(mixinAPI);\n                        }\n                    });\n\n                // construct private api\n                var internalAPI = createObject(internalAPIDefinition);\n\n                // create the view\n                create({\n                    root: internalAPI,\n                    props: props,\n                });\n\n                // append created child views to root node\n                var childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n                childViews.forEach(function(child, index) {\n                    internalAPI.appendChild(child.element, childCount + index);\n                });\n\n                // call did create\n                didCreateView(internalAPI);\n\n                // expose public api\n                return createObject(externalAPIDefinition);\n            };\n        };\n\n    var createPainter = function createPainter(read, write) {\n        var fps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n\n        var name = '__framePainter';\n\n        // set global painter\n        if (window[name]) {\n            window[name].readers.push(read);\n            window[name].writers.push(write);\n            return;\n        }\n\n        window[name] = {\n            readers: [read],\n            writers: [write],\n        };\n\n        var painter = window[name];\n\n        var interval = 1000 / fps;\n        var last = null;\n        var id = null;\n        var requestTick = null;\n        var cancelTick = null;\n\n        var setTimerType = function setTimerType() {\n            if (document.hidden) {\n                requestTick = function requestTick() {\n                    return window.setTimeout(function() {\n                        return tick(performance.now());\n                    }, interval);\n                };\n                cancelTick = function cancelTick() {\n                    return window.clearTimeout(id);\n                };\n            } else {\n                requestTick = function requestTick() {\n                    return window.requestAnimationFrame(tick);\n                };\n                cancelTick = function cancelTick() {\n                    return window.cancelAnimationFrame(id);\n                };\n            }\n        };\n\n        document.addEventListener('visibilitychange', function() {\n            if (cancelTick) cancelTick();\n            setTimerType();\n            tick(performance.now());\n        });\n\n        var tick = function tick(ts) {\n            // queue next tick\n            id = requestTick(tick);\n\n            // limit fps\n            if (!last) {\n                last = ts;\n            }\n\n            var delta = ts - last;\n\n            if (delta <= interval) {\n                // skip frame\n                return;\n            }\n\n            // align next frame\n            last = ts - (delta % interval);\n\n            // update view\n            painter.readers.forEach(function(read) {\n                return read();\n            });\n            painter.writers.forEach(function(write) {\n                return write(ts);\n            });\n        };\n\n        setTimerType();\n        tick(performance.now());\n\n        return {\n            pause: function pause() {\n                cancelTick(id);\n            },\n        };\n    };\n\n    var createRoute = function createRoute(routes, fn) {\n        return function(_ref) {\n            var root = _ref.root,\n                props = _ref.props,\n                _ref$actions = _ref.actions,\n                actions = _ref$actions === void 0 ? [] : _ref$actions,\n                timestamp = _ref.timestamp,\n                shouldOptimize = _ref.shouldOptimize;\n            actions\n                .filter(function(action) {\n                    return routes[action.type];\n                })\n                .forEach(function(action) {\n                    return routes[action.type]({\n                        root: root,\n                        props: props,\n                        action: action.data,\n                        timestamp: timestamp,\n                        shouldOptimize: shouldOptimize,\n                    });\n                });\n\n            if (fn) {\n                fn({\n                    root: root,\n                    props: props,\n                    actions: actions,\n                    timestamp: timestamp,\n                    shouldOptimize: shouldOptimize,\n                });\n            }\n        };\n    };\n\n    var insertBefore = function insertBefore(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode);\n    };\n\n    var insertAfter = function insertAfter(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n\n    var isArray = function isArray(value) {\n        return Array.isArray(value);\n    };\n\n    var isEmpty = function isEmpty(value) {\n        return value == null;\n    };\n\n    var trim = function trim(str) {\n        return str.trim();\n    };\n\n    var toString = function toString(value) {\n        return '' + value;\n    };\n\n    var toArray = function toArray(value) {\n        var splitter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n        if (isEmpty(value)) {\n            return [];\n        }\n        if (isArray(value)) {\n            return value;\n        }\n        return toString(value)\n            .split(splitter)\n            .map(trim)\n            .filter(function(str) {\n                return str.length;\n            });\n    };\n\n    var isBoolean = function isBoolean(value) {\n        return typeof value === 'boolean';\n    };\n\n    var toBoolean = function toBoolean(value) {\n        return isBoolean(value) ? value : value === 'true';\n    };\n\n    var isString = function isString(value) {\n        return typeof value === 'string';\n    };\n\n    var toNumber = function toNumber(value) {\n        return isNumber(value)\n            ? value\n            : isString(value)\n            ? toString(value).replace(/[a-z]+/gi, '')\n            : 0;\n    };\n\n    var toInt = function toInt(value) {\n        return parseInt(toNumber(value), 10);\n    };\n\n    var toFloat = function toFloat(value) {\n        return parseFloat(toNumber(value));\n    };\n\n    var isInt = function isInt(value) {\n        return isNumber(value) && isFinite(value) && Math.floor(value) === value;\n    };\n\n    var toBytes = function toBytes(value) {\n        var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        // is in bytes\n        if (isInt(value)) {\n            return value;\n        }\n\n        // is natural file size\n        var naturalFileSize = toString(value).trim();\n\n        // if is value in megabytes\n        if (/MB$/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n            return toInt(naturalFileSize) * base * base;\n        }\n\n        // if is value in kilobytes\n        if (/KB/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n            return toInt(naturalFileSize) * base;\n        }\n\n        return toInt(naturalFileSize);\n    };\n\n    var isFunction = function isFunction(value) {\n        return typeof value === 'function';\n    };\n\n    var toFunctionReference = function toFunctionReference(string) {\n        var ref = self;\n        var levels = string.split('.');\n        var level = null;\n        while ((level = levels.shift())) {\n            ref = ref[level];\n            if (!ref) {\n                return null;\n            }\n        }\n        return ref;\n    };\n\n    var methods = {\n        process: 'POST',\n        patch: 'PATCH',\n        revert: 'DELETE',\n        fetch: 'GET',\n        restore: 'GET',\n        load: 'GET',\n    };\n\n    var createServerAPI = function createServerAPI(outline) {\n        var api = {};\n\n        api.url = isString(outline) ? outline : outline.url || '';\n        api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n        api.headers = outline.headers ? outline.headers : {};\n\n        forin(methods, function(key) {\n            api[key] = createAction(key, outline[key], methods[key], api.timeout, api.headers);\n        });\n\n        // remove process if no url or process on outline\n        api.process = outline.process || isString(outline) || outline.url ? api.process : null;\n\n        // special treatment for remove\n        api.remove = outline.remove || null;\n\n        // remove generic headers from api object\n        delete api.headers;\n\n        return api;\n    };\n\n    var createAction = function createAction(name, outline, method, timeout, headers) {\n        // is explicitely set to null so disable\n        if (outline === null) {\n            return null;\n        }\n\n        // if is custom function, done! Dev handles everything.\n        if (typeof outline === 'function') {\n            return outline;\n        }\n\n        // build action object\n        var action = {\n            url: method === 'GET' || method === 'PATCH' ? '?' + name + '=' : '',\n            method: method,\n            headers: headers,\n            withCredentials: false,\n            timeout: timeout,\n            onload: null,\n            ondata: null,\n            onerror: null,\n        };\n\n        // is a single url\n        if (isString(outline)) {\n            action.url = outline;\n            return action;\n        }\n\n        // overwrite\n        Object.assign(action, outline);\n\n        // see if should reformat headers;\n        if (isString(action.headers)) {\n            var parts = action.headers.split(/:(.+)/);\n            action.headers = {\n                header: parts[0],\n                value: parts[1],\n            };\n        }\n\n        // if is bool withCredentials\n        action.withCredentials = toBoolean(action.withCredentials);\n\n        return action;\n    };\n\n    var toServerAPI = function toServerAPI(value) {\n        return createServerAPI(value);\n    };\n\n    var isNull = function isNull(value) {\n        return value === null;\n    };\n\n    var isObject = function isObject(value) {\n        return typeof value === 'object' && value !== null;\n    };\n\n    var isAPI = function isAPI(value) {\n        return (\n            isObject(value) &&\n            isString(value.url) &&\n            isObject(value.process) &&\n            isObject(value.revert) &&\n            isObject(value.restore) &&\n            isObject(value.fetch)\n        );\n    };\n\n    var getType = function getType(value) {\n        if (isArray(value)) {\n            return 'array';\n        }\n\n        if (isNull(value)) {\n            return 'null';\n        }\n\n        if (isInt(value)) {\n            return 'int';\n        }\n\n        if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n            return 'bytes';\n        }\n\n        if (isAPI(value)) {\n            return 'api';\n        }\n\n        return typeof value;\n    };\n\n    var replaceSingleQuotes = function replaceSingleQuotes(str) {\n        return str\n            .replace(/{\\s*'/g, '{\"')\n            .replace(/'\\s*}/g, '\"}')\n            .replace(/'\\s*:/g, '\":')\n            .replace(/:\\s*'/g, ':\"')\n            .replace(/,\\s*'/g, ',\"')\n            .replace(/'\\s*,/g, '\",');\n    };\n\n    var conversionTable = {\n        array: toArray,\n        boolean: toBoolean,\n        int: function int(value) {\n            return getType(value) === 'bytes' ? toBytes(value) : toInt(value);\n        },\n        number: toFloat,\n        float: toFloat,\n        bytes: toBytes,\n        string: function string(value) {\n            return isFunction(value) ? value : toString(value);\n        },\n        function: function _function(value) {\n            return toFunctionReference(value);\n        },\n        serverapi: toServerAPI,\n        object: function object(value) {\n            try {\n                return JSON.parse(replaceSingleQuotes(value));\n            } catch (e) {\n                return null;\n            }\n        },\n    };\n\n    var convertTo = function convertTo(value, type) {\n        return conversionTable[type](value);\n    };\n\n    var getValueByType = function getValueByType(newValue, defaultValue, valueType) {\n        // can always assign default value\n        if (newValue === defaultValue) {\n            return newValue;\n        }\n\n        // get the type of the new value\n        var newValueType = getType(newValue);\n\n        // is valid type?\n        if (newValueType !== valueType) {\n            // is string input, let's attempt to convert\n            var convertedValue = convertTo(newValue, valueType);\n\n            // what is the type now\n            newValueType = getType(convertedValue);\n\n            // no valid conversions found\n            if (convertedValue === null) {\n                throw 'Trying to assign value with incorrect type to \"' +\n                    option +\n                    '\", allowed type: \"' +\n                    valueType +\n                    '\"';\n            } else {\n                newValue = convertedValue;\n            }\n        }\n\n        // assign new value\n        return newValue;\n    };\n\n    var createOption = function createOption(defaultValue, valueType) {\n        var currentValue = defaultValue;\n        return {\n            enumerable: true,\n            get: function get() {\n                return currentValue;\n            },\n            set: function set(newValue) {\n                currentValue = getValueByType(newValue, defaultValue, valueType);\n            },\n        };\n    };\n\n    var createOptions = function createOptions(options) {\n        var obj = {};\n        forin(options, function(prop) {\n            var optionDefinition = options[prop];\n            obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n        });\n        return createObject(obj);\n    };\n\n    var createInitialState = function createInitialState(options) {\n        return {\n            // model\n            items: [],\n\n            // timeout used for calling update items\n            listUpdateTimeout: null,\n\n            // timeout used for stacking metadata updates\n            itemUpdateTimeout: null,\n\n            // queue of items waiting to be processed\n            processingQueue: [],\n\n            // options\n            options: createOptions(options),\n        };\n    };\n\n    var fromCamels = function fromCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n        return string\n            .split(/(?=[A-Z])/)\n            .map(function(part) {\n                return part.toLowerCase();\n            })\n            .join(separator);\n    };\n\n    var createOptionAPI = function createOptionAPI(store, options) {\n        var obj = {};\n        forin(options, function(key) {\n            obj[key] = {\n                get: function get() {\n                    return store.getState().options[key];\n                },\n                set: function set(value) {\n                    store.dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n                        value: value,\n                    });\n                },\n            };\n        });\n        return obj;\n    };\n\n    var createOptionActions = function createOptionActions(options) {\n        return function(dispatch, query, state) {\n            var obj = {};\n            forin(options, function(key) {\n                var name = fromCamels(key, '_').toUpperCase();\n\n                obj['SET_' + name] = function(action) {\n                    try {\n                        state.options[key] = action.value;\n                    } catch (e) {} // nope, failed\n\n                    // we successfully set the value of this option\n                    dispatch('DID_SET_' + name, { value: state.options[key] });\n                };\n            });\n            return obj;\n        };\n    };\n\n    var createOptionQueries = function createOptionQueries(options) {\n        return function(state) {\n            var obj = {};\n            forin(options, function(key) {\n                obj['GET_' + fromCamels(key, '_').toUpperCase()] = function(action) {\n                    return state.options[key];\n                };\n            });\n            return obj;\n        };\n    };\n\n    var InteractionMethod = {\n        API: 1,\n        DROP: 2,\n        BROWSE: 3,\n        PASTE: 4,\n        NONE: 5,\n    };\n\n    var getUniqueId = function getUniqueId() {\n        return Math.random()\n            .toString(36)\n            .substring(2, 11);\n    };\n\n    function _typeof(obj) {\n        if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n            _typeof = function(obj) {\n                return typeof obj;\n            };\n        } else {\n            _typeof = function(obj) {\n                return obj &&\n                    typeof Symbol === 'function' &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? 'symbol'\n                    : typeof obj;\n            };\n        }\n\n        return _typeof(obj);\n    }\n\n    var REACT_ELEMENT_TYPE;\n\n    function _jsx(type, props, key, children) {\n        if (!REACT_ELEMENT_TYPE) {\n            REACT_ELEMENT_TYPE =\n                (typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element')) ||\n                0xeac7;\n        }\n\n        var defaultProps = type && type.defaultProps;\n        var childrenLength = arguments.length - 3;\n\n        if (!props && childrenLength !== 0) {\n            props = {\n                children: void 0,\n            };\n        }\n\n        if (props && defaultProps) {\n            for (var propName in defaultProps) {\n                if (props[propName] === void 0) {\n                    props[propName] = defaultProps[propName];\n                }\n            }\n        } else if (!props) {\n            props = defaultProps || {};\n        }\n\n        if (childrenLength === 1) {\n            props.children = children;\n        } else if (childrenLength > 1) {\n            var childArray = new Array(childrenLength);\n\n            for (var i = 0; i < childrenLength; i++) {\n                childArray[i] = arguments[i + 3];\n            }\n\n            props.children = childArray;\n        }\n\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: type,\n            key: key === undefined ? null : '' + key,\n            ref: null,\n            props: props,\n            _owner: null,\n        };\n    }\n\n    function _asyncIterator(iterable) {\n        var method;\n\n        if (typeof Symbol !== 'undefined') {\n            if (Symbol.asyncIterator) {\n                method = iterable[Symbol.asyncIterator];\n                if (method != null) return method.call(iterable);\n            }\n\n            if (Symbol.iterator) {\n                method = iterable[Symbol.iterator];\n                if (method != null) return method.call(iterable);\n            }\n        }\n\n        throw new TypeError('Object is not async iterable');\n    }\n\n    function _AwaitValue(value) {\n        this.wrapped = value;\n    }\n\n    function _AsyncGenerator(gen) {\n        var front, back;\n\n        function send(key, arg) {\n            return new Promise(function(resolve, reject) {\n                var request = {\n                    key: key,\n                    arg: arg,\n                    resolve: resolve,\n                    reject: reject,\n                    next: null,\n                };\n\n                if (back) {\n                    back = back.next = request;\n                } else {\n                    front = back = request;\n                    resume(key, arg);\n                }\n            });\n        }\n\n        function resume(key, arg) {\n            try {\n                var result = gen[key](arg);\n                var value = result.value;\n                var wrappedAwait = value instanceof _AwaitValue;\n                Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n                    function(arg) {\n                        if (wrappedAwait) {\n                            resume('next', arg);\n                            return;\n                        }\n\n                        settle(result.done ? 'return' : 'normal', arg);\n                    },\n                    function(err) {\n                        resume('throw', err);\n                    }\n                );\n            } catch (err) {\n                settle('throw', err);\n            }\n        }\n\n        function settle(type, value) {\n            switch (type) {\n                case 'return':\n                    front.resolve({\n                        value: value,\n                        done: true,\n                    });\n                    break;\n\n                case 'throw':\n                    front.reject(value);\n                    break;\n\n                default:\n                    front.resolve({\n                        value: value,\n                        done: false,\n                    });\n                    break;\n            }\n\n            front = front.next;\n\n            if (front) {\n                resume(front.key, front.arg);\n            } else {\n                back = null;\n            }\n        }\n\n        this._invoke = send;\n\n        if (typeof gen.return !== 'function') {\n            this.return = undefined;\n        }\n    }\n\n    if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n        _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n            return this;\n        };\n    }\n\n    _AsyncGenerator.prototype.next = function(arg) {\n        return this._invoke('next', arg);\n    };\n\n    _AsyncGenerator.prototype.throw = function(arg) {\n        return this._invoke('throw', arg);\n    };\n\n    _AsyncGenerator.prototype.return = function(arg) {\n        return this._invoke('return', arg);\n    };\n\n    function _wrapAsyncGenerator(fn) {\n        return function() {\n            return new _AsyncGenerator(fn.apply(this, arguments));\n        };\n    }\n\n    function _awaitAsyncGenerator(value) {\n        return new _AwaitValue(value);\n    }\n\n    function _asyncGeneratorDelegate(inner, awaitWrap) {\n        var iter = {},\n            waiting = false;\n\n        function pump(key, value) {\n            waiting = true;\n            value = new Promise(function(resolve) {\n                resolve(inner[key](value));\n            });\n            return {\n                done: false,\n                value: awaitWrap(value),\n            };\n        }\n\n        if (typeof Symbol === 'function' && Symbol.iterator) {\n            iter[Symbol.iterator] = function() {\n                return this;\n            };\n        }\n\n        iter.next = function(value) {\n            if (waiting) {\n                waiting = false;\n                return value;\n            }\n\n            return pump('next', value);\n        };\n\n        if (typeof inner.throw === 'function') {\n            iter.throw = function(value) {\n                if (waiting) {\n                    waiting = false;\n                    throw value;\n                }\n\n                return pump('throw', value);\n            };\n        }\n\n        if (typeof inner.return === 'function') {\n            iter.return = function(value) {\n                return pump('return', value);\n            };\n        }\n\n        return iter;\n    }\n\n    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n        try {\n            var info = gen[key](arg);\n            var value = info.value;\n        } catch (error) {\n            reject(error);\n            return;\n        }\n\n        if (info.done) {\n            resolve(value);\n        } else {\n            Promise.resolve(value).then(_next, _throw);\n        }\n    }\n\n    function _asyncToGenerator(fn) {\n        return function() {\n            var self = this,\n                args = arguments;\n            return new Promise(function(resolve, reject) {\n                var gen = fn.apply(self, args);\n\n                function _next(value) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value);\n                }\n\n                function _throw(err) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n                }\n\n                _next(undefined);\n            });\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if ('value' in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n\n    function _defineEnumerableProperties(obj, descs) {\n        for (var key in descs) {\n            var desc = descs[key];\n            desc.configurable = desc.enumerable = true;\n            if ('value' in desc) desc.writable = true;\n            Object.defineProperty(obj, key, desc);\n        }\n\n        if (Object.getOwnPropertySymbols) {\n            var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n            for (var i = 0; i < objectSymbols.length; i++) {\n                var sym = objectSymbols[i];\n                var desc = descs[sym];\n                desc.configurable = desc.enumerable = true;\n                if ('value' in desc) desc.writable = true;\n                Object.defineProperty(obj, sym, desc);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defaults(obj, defaults) {\n        var keys = Object.getOwnPropertyNames(defaults);\n\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n            if (value && value.configurable && obj[key] === undefined) {\n                Object.defineProperty(obj, key, value);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defineProperty(obj, key, value) {\n        if (key in obj) {\n            Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n            });\n        } else {\n            obj[key] = value;\n        }\n\n        return obj;\n    }\n\n    function _extends() {\n        _extends =\n            Object.assign ||\n            function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n\n                    for (var key in source) {\n                        if (Object.prototype.hasOwnProperty.call(source, key)) {\n                            target[key] = source[key];\n                        }\n                    }\n                }\n\n                return target;\n            };\n\n        return _extends.apply(this, arguments);\n    }\n\n    function _objectSpread(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n            var ownKeys = Object.keys(source);\n\n            if (typeof Object.getOwnPropertySymbols === 'function') {\n                ownKeys = ownKeys.concat(\n                    Object.getOwnPropertySymbols(source).filter(function(sym) {\n                        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                    })\n                );\n            }\n\n            ownKeys.forEach(function(key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n\n        return target;\n    }\n\n    function ownKeys(object, enumerableOnly) {\n        var keys = Object.keys(object);\n\n        if (Object.getOwnPropertySymbols) {\n            var symbols = Object.getOwnPropertySymbols(object);\n            if (enumerableOnly)\n                symbols = symbols.filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n                });\n            keys.push.apply(keys, symbols);\n        }\n\n        return keys;\n    }\n\n    function _objectSpread2(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n\n            if (i % 2) {\n                ownKeys(source, true).forEach(function(key) {\n                    _defineProperty(target, key, source[key]);\n                });\n            } else if (Object.getOwnPropertyDescriptors) {\n                Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n            } else {\n                ownKeys(source).forEach(function(key) {\n                    Object.defineProperty(\n                        target,\n                        key,\n                        Object.getOwnPropertyDescriptor(source, key)\n                    );\n                });\n            }\n        }\n\n        return target;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function');\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true,\n            },\n        });\n        if (superClass) _setPrototypeOf(subClass, superClass);\n    }\n\n    function _inheritsLoose(subClass, superClass) {\n        subClass.prototype = Object.create(superClass.prototype);\n        subClass.prototype.constructor = subClass;\n        subClass.__proto__ = superClass;\n    }\n\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf\n            ? Object.getPrototypeOf\n            : function _getPrototypeOf(o) {\n                  return o.__proto__ || Object.getPrototypeOf(o);\n              };\n        return _getPrototypeOf(o);\n    }\n\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf =\n            Object.setPrototypeOf ||\n            function _setPrototypeOf(o, p) {\n                o.__proto__ = p;\n                return o;\n            };\n\n        return _setPrototypeOf(o, p);\n    }\n\n    function isNativeReflectConstruct() {\n        if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n        if (Reflect.construct.sham) return false;\n        if (typeof Proxy === 'function') return true;\n\n        try {\n            Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function _construct(Parent, args, Class) {\n        if (isNativeReflectConstruct()) {\n            _construct = Reflect.construct;\n        } else {\n            _construct = function _construct(Parent, args, Class) {\n                var a = [null];\n                a.push.apply(a, args);\n                var Constructor = Function.bind.apply(Parent, a);\n                var instance = new Constructor();\n                if (Class) _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            };\n        }\n\n        return _construct.apply(null, arguments);\n    }\n\n    function _isNativeFunction(fn) {\n        return Function.toString.call(fn).indexOf('[native code]') !== -1;\n    }\n\n    function _wrapNativeSuper(Class) {\n        var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n        _wrapNativeSuper = function _wrapNativeSuper(Class) {\n            if (Class === null || !_isNativeFunction(Class)) return Class;\n\n            if (typeof Class !== 'function') {\n                throw new TypeError('Super expression must either be null or a function');\n            }\n\n            if (typeof _cache !== 'undefined') {\n                if (_cache.has(Class)) return _cache.get(Class);\n\n                _cache.set(Class, Wrapper);\n            }\n\n            function Wrapper() {\n                return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n            }\n\n            Wrapper.prototype = Object.create(Class.prototype, {\n                constructor: {\n                    value: Wrapper,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true,\n                },\n            });\n            return _setPrototypeOf(Wrapper, Class);\n        };\n\n        return _wrapNativeSuper(Class);\n    }\n\n    function _instanceof(left, right) {\n        if (right != null && typeof Symbol !== 'undefined' && right[Symbol.hasInstance]) {\n            return !!right[Symbol.hasInstance](left);\n        } else {\n            return left instanceof right;\n        }\n    }\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule\n            ? obj\n            : {\n                  default: obj,\n              };\n    }\n\n    function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) {\n            return obj;\n        } else {\n            var newObj = {};\n\n            if (obj != null) {\n                for (var key in obj) {\n                    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                        var desc =\n                            Object.defineProperty && Object.getOwnPropertyDescriptor\n                                ? Object.getOwnPropertyDescriptor(obj, key)\n                                : {};\n\n                        if (desc.get || desc.set) {\n                            Object.defineProperty(newObj, key, desc);\n                        } else {\n                            newObj[key] = obj[key];\n                        }\n                    }\n                }\n            }\n\n            newObj.default = obj;\n            return newObj;\n        }\n    }\n\n    function _newArrowCheck(innerThis, boundThis) {\n        if (innerThis !== boundThis) {\n            throw new TypeError('Cannot instantiate an arrow function');\n        }\n    }\n\n    function _objectDestructuringEmpty(obj) {\n        if (obj == null) throw new TypeError('Cannot destructure undefined');\n    }\n\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null) return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n\n        for (i = 0; i < sourceKeys.length; i++) {\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            target[key] = source[key];\n        }\n\n        return target;\n    }\n\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null) return {};\n\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n\n        var key, i;\n\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n            for (i = 0; i < sourceSymbolKeys.length; i++) {\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0) continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n                target[key] = source[key];\n            }\n        }\n\n        return target;\n    }\n\n    function _assertThisInitialized(self) {\n        if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return self;\n    }\n\n    function _possibleConstructorReturn(self, call) {\n        if (call && (typeof call === 'object' || typeof call === 'function')) {\n            return call;\n        }\n\n        return _assertThisInitialized(self);\n    }\n\n    function _superPropBase(object, property) {\n        while (!Object.prototype.hasOwnProperty.call(object, property)) {\n            object = _getPrototypeOf(object);\n            if (object === null) break;\n        }\n\n        return object;\n    }\n\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.get) {\n            _get = Reflect.get;\n        } else {\n            _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                    return desc.get.call(receiver);\n                }\n\n                return desc.value;\n            };\n        }\n\n        return _get(target, property, receiver || target);\n    }\n\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.set) {\n            set = Reflect.set;\n        } else {\n            set = function set(target, property, value, receiver) {\n                var base = _superPropBase(target, property);\n\n                var desc;\n\n                if (base) {\n                    desc = Object.getOwnPropertyDescriptor(base, property);\n\n                    if (desc.set) {\n                        desc.set.call(receiver, value);\n                        return true;\n                    } else if (!desc.writable) {\n                        return false;\n                    }\n                }\n\n                desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n                if (desc) {\n                    if (!desc.writable) {\n                        return false;\n                    }\n\n                    desc.value = value;\n                    Object.defineProperty(receiver, property, desc);\n                } else {\n                    _defineProperty(receiver, property, value);\n                }\n\n                return true;\n            };\n        }\n\n        return set(target, property, value, receiver);\n    }\n\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n\n        if (!s && isStrict) {\n            throw new Error('failed to set property');\n        }\n\n        return value;\n    }\n\n    function _taggedTemplateLiteral(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        return Object.freeze(\n            Object.defineProperties(strings, {\n                raw: {\n                    value: Object.freeze(raw),\n                },\n            })\n        );\n    }\n\n    function _taggedTemplateLiteralLoose(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        strings.raw = raw;\n        return strings;\n    }\n\n    function _temporalRef(val, name) {\n        if (val === _temporalUndefined) {\n            throw new ReferenceError(name + ' is not defined - temporal dead zone');\n        } else {\n            return val;\n        }\n    }\n\n    function _readOnlyError(name) {\n        throw new Error('\"' + name + '\" is read-only');\n    }\n\n    function _classNameTDZError(name) {\n        throw new Error('Class \"' + name + '\" cannot be referenced in computed property keys.');\n    }\n\n    var _temporalUndefined = {};\n\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n    }\n\n    function _slicedToArrayLoose(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _nonIterableRest();\n    }\n\n    function _toArray(arr) {\n        return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n    }\n\n    function _toConsumableArray(arr) {\n        return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n    }\n\n    function _arrayWithoutHoles(arr) {\n        if (Array.isArray(arr)) {\n            for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n            return arr2;\n        }\n    }\n\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n\n    function _iterableToArray(iter) {\n        if (\n            Symbol.iterator in Object(iter) ||\n            Object.prototype.toString.call(iter) === '[object Arguments]'\n        )\n            return Array.from(iter);\n    }\n\n    function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally {\n            try {\n                if (!_n && _i['return'] != null) _i['return']();\n            } finally {\n                if (_d) throw _e;\n            }\n        }\n\n        return _arr;\n    }\n\n    function _iterableToArrayLimitLoose(arr, i) {\n        var _arr = [];\n\n        for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done; ) {\n            _arr.push(_step.value);\n\n            if (i && _arr.length === i) break;\n        }\n\n        return _arr;\n    }\n\n    function _nonIterableSpread() {\n        throw new TypeError('Invalid attempt to spread non-iterable instance');\n    }\n\n    function _nonIterableRest() {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n    }\n\n    function _skipFirstGeneratorNext(fn) {\n        return function() {\n            var it = fn.apply(this, arguments);\n            it.next();\n            return it;\n        };\n    }\n\n    function _toPrimitive(input, hint) {\n        if (typeof input !== 'object' || input === null) return input;\n        var prim = input[Symbol.toPrimitive];\n\n        if (prim !== undefined) {\n            var res = prim.call(input, hint || 'default');\n            if (typeof res !== 'object') return res;\n            throw new TypeError('@@toPrimitive must return a primitive value.');\n        }\n\n        return (hint === 'string' ? String : Number)(input);\n    }\n\n    function _toPropertyKey(arg) {\n        var key = _toPrimitive(arg, 'string');\n\n        return typeof key === 'symbol' ? key : String(key);\n    }\n\n    function _initializerWarningHelper(descriptor, context) {\n        throw new Error(\n            'Decorating class property failed. Please ensure that ' +\n                'proposal-class-properties is enabled and set to use loose mode. ' +\n                'To use proposal-class-properties in spec mode with decorators, wait for ' +\n                'the next major version of decorators in stage 2.'\n        );\n    }\n\n    function _initializerDefineProperty(target, property, descriptor, context) {\n        if (!descriptor) return;\n        Object.defineProperty(target, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            writable: descriptor.writable,\n            value: descriptor.initializer ? descriptor.initializer.call(context) : void 0,\n        });\n    }\n\n    function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n        var desc = {};\n        Object.keys(descriptor).forEach(function(key) {\n            desc[key] = descriptor[key];\n        });\n        desc.enumerable = !!desc.enumerable;\n        desc.configurable = !!desc.configurable;\n\n        if ('value' in desc || desc.initializer) {\n            desc.writable = true;\n        }\n\n        desc = decorators\n            .slice()\n            .reverse()\n            .reduce(function(desc, decorator) {\n                return decorator(target, property, desc) || desc;\n            }, desc);\n\n        if (context && desc.initializer !== void 0) {\n            desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n            desc.initializer = undefined;\n        }\n\n        if (desc.initializer === void 0) {\n            Object.defineProperty(target, property, desc);\n            desc = null;\n        }\n\n        return desc;\n    }\n\n    var id = 0;\n\n    function _classPrivateFieldLooseKey(name) {\n        return '__private_' + id++ + '_' + name;\n    }\n\n    function _classPrivateFieldLooseBase(receiver, privateKey) {\n        if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n            throw new TypeError('attempted to use private field on non-instance');\n        }\n\n        return receiver;\n    }\n\n    function _classPrivateFieldGet(receiver, privateMap) {\n        var descriptor = privateMap.get(receiver);\n\n        if (!descriptor) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        if (descriptor.get) {\n            return descriptor.get.call(receiver);\n        }\n\n        return descriptor.value;\n    }\n\n    function _classPrivateFieldSet(receiver, privateMap, value) {\n        var descriptor = privateMap.get(receiver);\n\n        if (!descriptor) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        if (descriptor.set) {\n            descriptor.set.call(receiver, value);\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            descriptor.value = value;\n        }\n\n        return value;\n    }\n\n    function _classPrivateFieldDestructureSet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        var descriptor = privateMap.get(receiver);\n\n        if (descriptor.set) {\n            if (!('__destrObj' in descriptor)) {\n                descriptor.__destrObj = {\n                    set value(v) {\n                        descriptor.set.call(receiver, v);\n                    },\n                };\n            }\n\n            return descriptor.__destrObj;\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            return descriptor;\n        }\n    }\n\n    function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return descriptor.value;\n    }\n\n    function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        if (!descriptor.writable) {\n            throw new TypeError('attempted to set read only private field');\n        }\n\n        descriptor.value = value;\n        return value;\n    }\n\n    function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return method;\n    }\n\n    function _classStaticPrivateMethodSet() {\n        throw new TypeError('attempted to set read only static private field');\n    }\n\n    function _decorate(decorators, factory, superClass, mixins) {\n        var api = _getDecoratorsApi();\n\n        if (mixins) {\n            for (var i = 0; i < mixins.length; i++) {\n                api = mixins[i](api);\n            }\n        }\n\n        var r = factory(function initialize(O) {\n            api.initializeInstanceElements(O, decorated.elements);\n        }, superClass);\n        var decorated = api.decorateClass(\n            _coalesceClassElements(r.d.map(_createElementDescriptor)),\n            decorators\n        );\n        api.initializeClassElements(r.F, decorated.elements);\n        return api.runClassFinishers(r.F, decorated.finishers);\n    }\n\n    function _getDecoratorsApi() {\n        _getDecoratorsApi = function() {\n            return api;\n        };\n\n        var api = {\n            elementsDefinitionOrder: [['method'], ['field']],\n            initializeInstanceElements: function(O, elements) {\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        if (element.kind === kind && element.placement === 'own') {\n                            this.defineClassElement(O, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            initializeClassElements: function(F, elements) {\n                var proto = F.prototype;\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        var placement = element.placement;\n\n                        if (\n                            element.kind === kind &&\n                            (placement === 'static' || placement === 'prototype')\n                        ) {\n                            var receiver = placement === 'static' ? F : proto;\n                            this.defineClassElement(receiver, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            defineClassElement: function(receiver, element) {\n                var descriptor = element.descriptor;\n\n                if (element.kind === 'field') {\n                    var initializer = element.initializer;\n                    descriptor = {\n                        enumerable: descriptor.enumerable,\n                        writable: descriptor.writable,\n                        configurable: descriptor.configurable,\n                        value: initializer === void 0 ? void 0 : initializer.call(receiver),\n                    };\n                }\n\n                Object.defineProperty(receiver, element.key, descriptor);\n            },\n            decorateClass: function(elements, decorators) {\n                var newElements = [];\n                var finishers = [];\n                var placements = {\n                    static: [],\n                    prototype: [],\n                    own: [],\n                };\n                elements.forEach(function(element) {\n                    this.addElementPlacement(element, placements);\n                }, this);\n                elements.forEach(function(element) {\n                    if (!_hasDecorators(element)) return newElements.push(element);\n                    var elementFinishersExtras = this.decorateElement(element, placements);\n                    newElements.push(elementFinishersExtras.element);\n                    newElements.push.apply(newElements, elementFinishersExtras.extras);\n                    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n                }, this);\n\n                if (!decorators) {\n                    return {\n                        elements: newElements,\n                        finishers: finishers,\n                    };\n                }\n\n                var result = this.decorateConstructor(newElements, decorators);\n                finishers.push.apply(finishers, result.finishers);\n                result.finishers = finishers;\n                return result;\n            },\n            addElementPlacement: function(element, placements, silent) {\n                var keys = placements[element.placement];\n\n                if (!silent && keys.indexOf(element.key) !== -1) {\n                    throw new TypeError('Duplicated element (' + element.key + ')');\n                }\n\n                keys.push(element.key);\n            },\n            decorateElement: function(element, placements) {\n                var extras = [];\n                var finishers = [];\n\n                for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n                    var keys = placements[element.placement];\n                    keys.splice(keys.indexOf(element.key), 1);\n                    var elementObject = this.fromElementDescriptor(element);\n                    var elementFinisherExtras = this.toElementFinisherExtras(\n                        (0, decorators[i])(elementObject) || elementObject\n                    );\n                    element = elementFinisherExtras.element;\n                    this.addElementPlacement(element, placements);\n\n                    if (elementFinisherExtras.finisher) {\n                        finishers.push(elementFinisherExtras.finisher);\n                    }\n\n                    var newExtras = elementFinisherExtras.extras;\n\n                    if (newExtras) {\n                        for (var j = 0; j < newExtras.length; j++) {\n                            this.addElementPlacement(newExtras[j], placements);\n                        }\n\n                        extras.push.apply(extras, newExtras);\n                    }\n                }\n\n                return {\n                    element: element,\n                    finishers: finishers,\n                    extras: extras,\n                };\n            },\n            decorateConstructor: function(elements, decorators) {\n                var finishers = [];\n\n                for (var i = decorators.length - 1; i >= 0; i--) {\n                    var obj = this.fromClassDescriptor(elements);\n                    var elementsAndFinisher = this.toClassDescriptor(\n                        (0, decorators[i])(obj) || obj\n                    );\n\n                    if (elementsAndFinisher.finisher !== undefined) {\n                        finishers.push(elementsAndFinisher.finisher);\n                    }\n\n                    if (elementsAndFinisher.elements !== undefined) {\n                        elements = elementsAndFinisher.elements;\n\n                        for (var j = 0; j < elements.length - 1; j++) {\n                            for (var k = j + 1; k < elements.length; k++) {\n                                if (\n                                    elements[j].key === elements[k].key &&\n                                    elements[j].placement === elements[k].placement\n                                ) {\n                                    throw new TypeError(\n                                        'Duplicated element (' + elements[j].key + ')'\n                                    );\n                                }\n                            }\n                        }\n                    }\n                }\n\n                return {\n                    elements: elements,\n                    finishers: finishers,\n                };\n            },\n            fromElementDescriptor: function(element) {\n                var obj = {\n                    kind: element.kind,\n                    key: element.key,\n                    placement: element.placement,\n                    descriptor: element.descriptor,\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                if (element.kind === 'field') obj.initializer = element.initializer;\n                return obj;\n            },\n            toElementDescriptors: function(elementObjects) {\n                if (elementObjects === undefined) return;\n                return _toArray(elementObjects).map(function(elementObject) {\n                    var element = this.toElementDescriptor(elementObject);\n                    this.disallowProperty(elementObject, 'finisher', 'An element descriptor');\n                    this.disallowProperty(elementObject, 'extras', 'An element descriptor');\n                    return element;\n                }, this);\n            },\n            toElementDescriptor: function(elementObject) {\n                var kind = String(elementObject.kind);\n\n                if (kind !== 'method' && kind !== 'field') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .kind property must be either \"method\" or' +\n                            ' \"field\", but a decorator created an element descriptor with' +\n                            ' .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                var key = _toPropertyKey(elementObject.key);\n\n                var placement = String(elementObject.placement);\n\n                if (placement !== 'static' && placement !== 'prototype' && placement !== 'own') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .placement property must be one of \"static\",' +\n                            ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n                            ' with .placement \"' +\n                            placement +\n                            '\"'\n                    );\n                }\n\n                var descriptor = elementObject.descriptor;\n                this.disallowProperty(elementObject, 'elements', 'An element descriptor');\n                var element = {\n                    kind: kind,\n                    key: key,\n                    placement: placement,\n                    descriptor: Object.assign({}, descriptor),\n                };\n\n                if (kind !== 'field') {\n                    this.disallowProperty(elementObject, 'initializer', 'A method descriptor');\n                } else {\n                    this.disallowProperty(\n                        descriptor,\n                        'get',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'set',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'value',\n                        'The property descriptor of a field descriptor'\n                    );\n                    element.initializer = elementObject.initializer;\n                }\n\n                return element;\n            },\n            toElementFinisherExtras: function(elementObject) {\n                var element = this.toElementDescriptor(elementObject);\n\n                var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n                var extras = this.toElementDescriptors(elementObject.extras);\n                return {\n                    element: element,\n                    finisher: finisher,\n                    extras: extras,\n                };\n            },\n            fromClassDescriptor: function(elements) {\n                var obj = {\n                    kind: 'class',\n                    elements: elements.map(this.fromElementDescriptor, this),\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                return obj;\n            },\n            toClassDescriptor: function(obj) {\n                var kind = String(obj.kind);\n\n                if (kind !== 'class') {\n                    throw new TypeError(\n                        'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n                            ' created a class descriptor with .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                this.disallowProperty(obj, 'key', 'A class descriptor');\n                this.disallowProperty(obj, 'placement', 'A class descriptor');\n                this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n                this.disallowProperty(obj, 'initializer', 'A class descriptor');\n                this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n                var finisher = _optionalCallableProperty(obj, 'finisher');\n\n                var elements = this.toElementDescriptors(obj.elements);\n                return {\n                    elements: elements,\n                    finisher: finisher,\n                };\n            },\n            runClassFinishers: function(constructor, finishers) {\n                for (var i = 0; i < finishers.length; i++) {\n                    var newConstructor = (0, finishers[i])(constructor);\n\n                    if (newConstructor !== undefined) {\n                        if (typeof newConstructor !== 'function') {\n                            throw new TypeError('Finishers must return a constructor.');\n                        }\n\n                        constructor = newConstructor;\n                    }\n                }\n\n                return constructor;\n            },\n            disallowProperty: function(obj, name, objectType) {\n                if (obj[name] !== undefined) {\n                    throw new TypeError(objectType + \" can't have a .\" + name + ' property.');\n                }\n            },\n        };\n        return api;\n    }\n\n    function _createElementDescriptor(def) {\n        var key = _toPropertyKey(def.key);\n\n        var descriptor;\n\n        if (def.kind === 'method') {\n            descriptor = {\n                value: def.value,\n                writable: true,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'get') {\n            descriptor = {\n                get: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'set') {\n            descriptor = {\n                set: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'field') {\n            descriptor = {\n                configurable: true,\n                writable: true,\n                enumerable: true,\n            };\n        }\n\n        var element = {\n            kind: def.kind === 'field' ? 'field' : 'method',\n            key: key,\n            placement: def.static ? 'static' : def.kind === 'field' ? 'own' : 'prototype',\n            descriptor: descriptor,\n        };\n        if (def.decorators) element.decorators = def.decorators;\n        if (def.kind === 'field') element.initializer = def.value;\n        return element;\n    }\n\n    function _coalesceGetterSetter(element, other) {\n        if (element.descriptor.get !== undefined) {\n            other.descriptor.get = element.descriptor.get;\n        } else {\n            other.descriptor.set = element.descriptor.set;\n        }\n    }\n\n    function _coalesceClassElements(elements) {\n        var newElements = [];\n\n        var isSameElement = function(other) {\n            return (\n                other.kind === 'method' &&\n                other.key === element.key &&\n                other.placement === element.placement\n            );\n        };\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var other;\n\n            if (element.kind === 'method' && (other = newElements.find(isSameElement))) {\n                if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n                    if (_hasDecorators(element) || _hasDecorators(other)) {\n                        throw new ReferenceError(\n                            'Duplicated methods (' + element.key + \") can't be decorated.\"\n                        );\n                    }\n\n                    other.descriptor = element.descriptor;\n                } else {\n                    if (_hasDecorators(element)) {\n                        if (_hasDecorators(other)) {\n                            throw new ReferenceError(\n                                \"Decorators can't be placed on different accessors with for \" +\n                                    'the same property (' +\n                                    element.key +\n                                    ').'\n                            );\n                        }\n\n                        other.decorators = element.decorators;\n                    }\n\n                    _coalesceGetterSetter(element, other);\n                }\n            } else {\n                newElements.push(element);\n            }\n        }\n\n        return newElements;\n    }\n\n    function _hasDecorators(element) {\n        return element.decorators && element.decorators.length;\n    }\n\n    function _isDataDescriptor(desc) {\n        return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n    }\n\n    function _optionalCallableProperty(obj, name) {\n        var value = obj[name];\n\n        if (value !== undefined && typeof value !== 'function') {\n            throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n        }\n\n        return value;\n    }\n\n    function _classPrivateMethodGet(receiver, privateSet, fn) {\n        if (!privateSet.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        return fn;\n    }\n\n    function _classPrivateMethodSet() {\n        throw new TypeError('attempted to reassign private method');\n    }\n\n    function _wrapRegExp(re, groups) {\n        _wrapRegExp = function(re, groups) {\n            return new BabelRegExp(re, groups);\n        };\n\n        var _RegExp = _wrapNativeSuper(RegExp);\n\n        var _super = RegExp.prototype;\n\n        var _groups = new WeakMap();\n\n        function BabelRegExp(re, groups) {\n            var _this = _RegExp.call(this, re);\n\n            _groups.set(_this, groups);\n\n            return _this;\n        }\n\n        _inherits(BabelRegExp, _RegExp);\n\n        BabelRegExp.prototype.exec = function(str) {\n            var result = _super.exec.call(this, str);\n\n            if (result) result.groups = buildGroups(result, this);\n            return result;\n        };\n\n        BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n            if (typeof substitution === 'string') {\n                var groups = _groups.get(this);\n\n                return _super[Symbol.replace].call(\n                    this,\n                    str,\n                    substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n                        return '$' + groups[name];\n                    })\n                );\n            } else if (typeof substitution === 'function') {\n                var _this = this;\n\n                return _super[Symbol.replace].call(this, str, function() {\n                    var args = [];\n                    args.push.apply(args, arguments);\n\n                    if (typeof args[args.length - 1] !== 'object') {\n                        args.push(buildGroups(args, _this));\n                    }\n\n                    return substitution.apply(this, args);\n                });\n            } else {\n                return _super[Symbol.replace].call(this, str, substitution);\n            }\n        };\n\n        function buildGroups(result, re) {\n            var g = _groups.get(re);\n\n            return Object.keys(g).reduce(function(groups, name) {\n                groups[name] = result[g[name]];\n                return groups;\n            }, Object.create(null));\n        }\n\n        return _wrapRegExp.apply(this, arguments);\n    }\n\n    var arrayRemove = function arrayRemove(arr, index) {\n        return arr.splice(index, 1);\n    };\n\n    var run = function run(cb, sync) {\n        if (sync) {\n            cb();\n        } else if (document.hidden) {\n            Promise.resolve(1).then(cb);\n        } else {\n            setTimeout(cb, 0);\n        }\n    };\n\n    var on = function on() {\n        var listeners = [];\n        var off = function off(event, cb) {\n            arrayRemove(\n                listeners,\n                listeners.findIndex(function(listener) {\n                    return listener.event === event && (listener.cb === cb || !cb);\n                })\n            );\n        };\n        var _fire = function fire(event, args, sync) {\n            listeners\n                .filter(function(listener) {\n                    return listener.event === event;\n                })\n                .map(function(listener) {\n                    return listener.cb;\n                })\n                .forEach(function(cb) {\n                    return run(function() {\n                        return cb.apply(void 0, _toConsumableArray(args));\n                    }, sync);\n                });\n        };\n        return {\n            fireSync: function fireSync(event) {\n                for (\n                    var _len = arguments.length,\n                        args = new Array(_len > 1 ? _len - 1 : 0),\n                        _key = 1;\n                    _key < _len;\n                    _key++\n                ) {\n                    args[_key - 1] = arguments[_key];\n                }\n                _fire(event, args, true);\n            },\n            fire: function fire(event) {\n                for (\n                    var _len2 = arguments.length,\n                        args = new Array(_len2 > 1 ? _len2 - 1 : 0),\n                        _key2 = 1;\n                    _key2 < _len2;\n                    _key2++\n                ) {\n                    args[_key2 - 1] = arguments[_key2];\n                }\n                _fire(event, args, false);\n            },\n            on: function on(event, cb) {\n                listeners.push({ event: event, cb: cb });\n            },\n            onOnce: function onOnce(event, _cb) {\n                listeners.push({\n                    event: event,\n                    cb: function cb() {\n                        off(event, _cb);\n                        _cb.apply(void 0, arguments);\n                    },\n                });\n            },\n            off: off,\n        };\n    };\n\n    var copyObjectPropertiesToObject = function copyObjectPropertiesToObject(\n        src,\n        target,\n        excluded\n    ) {\n        Object.getOwnPropertyNames(src)\n            .filter(function(property) {\n                return !excluded.includes(property);\n            })\n            .forEach(function(key) {\n                return Object.defineProperty(\n                    target,\n                    key,\n                    Object.getOwnPropertyDescriptor(src, key)\n                );\n            });\n    };\n\n    var PRIVATE = [\n        'fire',\n        'process',\n        'revert',\n        'load',\n        'on',\n        'off',\n        'onOnce',\n        'retryLoad',\n        'extend',\n        'archive',\n        'archived',\n        'release',\n        'released',\n        'requestProcessing',\n        'freeze',\n    ];\n\n    var createItemAPI = function createItemAPI(item) {\n        var api = {};\n        copyObjectPropertiesToObject(item, api, PRIVATE);\n        return api;\n    };\n\n    var removeReleasedItems = function removeReleasedItems(items) {\n        items.forEach(function(item, index) {\n            if (item.released) {\n                arrayRemove(items, index);\n            }\n        });\n    };\n\n    var ItemStatus = {\n        INIT: 1,\n        IDLE: 2,\n        PROCESSING_QUEUED: 9,\n        PROCESSING: 3,\n        PROCESSING_COMPLETE: 5,\n        PROCESSING_ERROR: 6,\n        PROCESSING_REVERT_ERROR: 10,\n        LOADING: 7,\n        LOAD_ERROR: 8,\n    };\n\n    var FileOrigin = {\n        INPUT: 1,\n        LIMBO: 2,\n        LOCAL: 3,\n    };\n\n    var getNonNumeric = function getNonNumeric(str) {\n        return /[^0-9]+/.exec(str);\n    };\n\n    var getDecimalSeparator = function getDecimalSeparator() {\n        return getNonNumeric((1.1).toLocaleString())[0];\n    };\n\n    var getThousandsSeparator = function getThousandsSeparator() {\n        // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n        // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n        var decimalSeparator = getDecimalSeparator();\n        var thousandsStringWithSeparator = (1000.0).toLocaleString();\n        var thousandsStringWithoutSeparator = (1000.0).toString();\n        if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n            return getNonNumeric(thousandsStringWithSeparator)[0];\n        }\n        return decimalSeparator === '.' ? ',' : '.';\n    };\n\n    var Type = {\n        BOOLEAN: 'boolean',\n        INT: 'int',\n        NUMBER: 'number',\n        STRING: 'string',\n        ARRAY: 'array',\n        OBJECT: 'object',\n        FUNCTION: 'function',\n        ACTION: 'action',\n        SERVER_API: 'serverapi',\n        REGEX: 'regex',\n    };\n\n    // all registered filters\n    var filters = [];\n\n    // loops over matching filters and passes options to each filter, returning the mapped results\n    var applyFilterChain = function applyFilterChain(key, value, utils) {\n        return new Promise(function(resolve, reject) {\n            // find matching filters for this key\n            var matchingFilters = filters\n                .filter(function(f) {\n                    return f.key === key;\n                })\n                .map(function(f) {\n                    return f.cb;\n                });\n\n            // resolve now\n            if (matchingFilters.length === 0) {\n                resolve(value);\n                return;\n            }\n\n            // first filter to kick things of\n            var initialFilter = matchingFilters.shift();\n\n            // chain filters\n            matchingFilters\n                .reduce(\n                    // loop over promises passing value to next promise\n                    function(current, next) {\n                        return current.then(function(value) {\n                            return next(value, utils);\n                        });\n                    },\n\n                    // call initial filter, will return a promise\n                    initialFilter(value, utils)\n\n                    // all executed\n                )\n                .then(function(value) {\n                    return resolve(value);\n                })\n                .catch(function(error) {\n                    return reject(error);\n                });\n        });\n    };\n\n    var applyFilters = function applyFilters(key, value, utils) {\n        return filters\n            .filter(function(f) {\n                return f.key === key;\n            })\n            .map(function(f) {\n                return f.cb(value, utils);\n            });\n    };\n\n    // adds a new filter to the list\n    var addFilter = function addFilter(key, cb) {\n        return filters.push({ key: key, cb: cb });\n    };\n\n    var extendDefaultOptions = function extendDefaultOptions(additionalOptions) {\n        return Object.assign(defaultOptions, additionalOptions);\n    };\n\n    var getOptions = function getOptions() {\n        return Object.assign({}, defaultOptions);\n    };\n\n    var setOptions = function setOptions(opts) {\n        forin(opts, function(key, value) {\n            // key does not exist, so this option cannot be set\n            if (!defaultOptions[key]) {\n                return;\n            }\n            defaultOptions[key][0] = getValueByType(\n                value,\n                defaultOptions[key][0],\n                defaultOptions[key][1]\n            );\n        });\n    };\n\n    // default options on app\n    var defaultOptions = {\n        // the id to add to the root element\n        id: [null, Type.STRING],\n\n        // input field name to use\n        name: ['filepond', Type.STRING],\n\n        // disable the field\n        disabled: [false, Type.BOOLEAN],\n\n        // classname to put on wrapper\n        className: [null, Type.STRING],\n\n        // is the field required\n        required: [false, Type.BOOLEAN],\n\n        // Allow media capture when value is set\n        captureMethod: [null, Type.STRING],\n        // - \"camera\", \"microphone\" or \"camcorder\",\n        // - Does not work with multiple on apple devices\n        // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n        // sync `acceptedFileTypes` property with `accept` attribute\n        allowSyncAcceptAttribute: [true, Type.BOOLEAN],\n\n        // Feature toggles\n        allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n        allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n        allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n        allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n        allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n        allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n        allowRemove: [true, Type.BOOLEAN], // Allow user to remove a file\n        allowProcess: [true, Type.BOOLEAN], // Allows user to process a file, when set to false, this removes the file upload button\n        allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n        allowDirectoriesOnly: [false, Type.BOOLEAN], // Allow only selecting directories with browse (no support for filtering dnd at this point)\n\n        // Try store file if `server` not set\n        storeAsFile: [false, Type.BOOLEAN],\n\n        // Revert mode\n        forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n        // Input requirements\n        maxFiles: [null, Type.INT], // Max number of files\n        checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n        // Where to put file\n        itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n        itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n        itemInsertInterval: [75, Type.INT],\n\n        // Drag 'n Drop related\n        dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n        dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n        dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n        ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n        // Upload related\n        instantUpload: [true, Type.BOOLEAN], // Should upload files immediately on drop\n        maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n        allowMinimumUploadDuration: [true, Type.BOOLEAN], // if true uploads take at least 750 ms, this ensures the user sees the upload progress giving trust the upload actually happened\n\n        // Chunks\n        chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n        chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n        chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n        chunkRetryDelays: [[500, 1000, 3000], Type.ARRAY], // Amount of times to retry upload of a chunk when it fails\n\n        // The server api end points to use for uploading (see docs)\n        server: [null, Type.SERVER_API],\n\n        // File size calculations, can set to 1024, this is only used for display, properties use file size base 1000\n        fileSizeBase: [1000, Type.INT],\n\n        // Labels and status messages\n        labelFileSizeBytes: ['bytes', Type.STRING],\n        labelFileSizeKilobytes: ['KB', Type.STRING],\n        labelFileSizeMegabytes: ['MB', Type.STRING],\n        labelFileSizeGigabytes: ['GB', Type.STRING],\n\n        labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n        labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n        labelIdle: [\n            'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n            Type.STRING,\n        ],\n\n        labelInvalidField: ['Field contains invalid files', Type.STRING],\n        labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n        labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n        labelFileCountSingular: ['file in list', Type.STRING],\n        labelFileCountPlural: ['files in list', Type.STRING],\n        labelFileLoading: ['Loading', Type.STRING],\n        labelFileAdded: ['Added', Type.STRING], // assistive only\n        labelFileLoadError: ['Error during load', Type.STRING],\n        labelFileRemoved: ['Removed', Type.STRING], // assistive only\n        labelFileRemoveError: ['Error during remove', Type.STRING],\n        labelFileProcessing: ['Uploading', Type.STRING],\n        labelFileProcessingComplete: ['Upload complete', Type.STRING],\n        labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n        labelFileProcessingError: ['Error during upload', Type.STRING],\n        labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n        labelTapToCancel: ['tap to cancel', Type.STRING],\n        labelTapToRetry: ['tap to retry', Type.STRING],\n        labelTapToUndo: ['tap to undo', Type.STRING],\n\n        labelButtonRemoveItem: ['Remove', Type.STRING],\n        labelButtonAbortItemLoad: ['Abort', Type.STRING],\n        labelButtonRetryItemLoad: ['Retry', Type.STRING],\n        labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n        labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n        labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n        labelButtonProcessItem: ['Upload', Type.STRING],\n\n        // make sure width and height plus viewpox are even numbers so icons are nicely centered\n        iconRemove: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconProcess: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconRetry: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconUndo: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconDone: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        // event handlers\n        oninit: [null, Type.FUNCTION],\n        onwarning: [null, Type.FUNCTION],\n        onerror: [null, Type.FUNCTION],\n        onactivatefile: [null, Type.FUNCTION],\n        oninitfile: [null, Type.FUNCTION],\n        onaddfilestart: [null, Type.FUNCTION],\n        onaddfileprogress: [null, Type.FUNCTION],\n        onaddfile: [null, Type.FUNCTION],\n        onprocessfilestart: [null, Type.FUNCTION],\n        onprocessfileprogress: [null, Type.FUNCTION],\n        onprocessfileabort: [null, Type.FUNCTION],\n        onprocessfilerevert: [null, Type.FUNCTION],\n        onprocessfile: [null, Type.FUNCTION],\n        onprocessfiles: [null, Type.FUNCTION],\n        onremovefile: [null, Type.FUNCTION],\n        onpreparefile: [null, Type.FUNCTION],\n        onupdatefiles: [null, Type.FUNCTION],\n        onreorderfiles: [null, Type.FUNCTION],\n\n        // hooks\n        beforeDropFile: [null, Type.FUNCTION],\n        beforeAddFile: [null, Type.FUNCTION],\n        beforeRemoveFile: [null, Type.FUNCTION],\n        beforePrepareFile: [null, Type.FUNCTION],\n\n        // styles\n        stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n        stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n        styleItemPanelAspectRatio: [null, Type.STRING],\n        styleButtonRemoveItemPosition: ['left', Type.STRING],\n        styleButtonProcessItemPosition: ['right', Type.STRING],\n        styleLoadIndicatorPosition: ['right', Type.STRING],\n        styleProgressIndicatorPosition: ['right', Type.STRING],\n        styleButtonRemoveItemAlign: [false, Type.BOOLEAN],\n\n        // custom initial files array\n        files: [[], Type.ARRAY],\n\n        // show support by displaying credits\n        credits: [['https://pqina.nl/', 'Powered by PQINA'], Type.ARRAY],\n    };\n\n    var getItemByQuery = function getItemByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) {\n            return items[0] || null;\n        }\n\n        // query is index\n        if (isInt(query)) {\n            return items[query] || null;\n        }\n\n        // if query is item, get the id\n        if (typeof query === 'object') {\n            query = query.id;\n        }\n\n        // assume query is a string and return item by id\n        return (\n            items.find(function(item) {\n                return item.id === query;\n            }) || null\n        );\n    };\n\n    var getNumericAspectRatioFromString = function getNumericAspectRatioFromString(aspectRatio) {\n        if (isEmpty(aspectRatio)) {\n            return aspectRatio;\n        }\n        if (/:/.test(aspectRatio)) {\n            var parts = aspectRatio.split(':');\n            return parts[1] / parts[0];\n        }\n        return parseFloat(aspectRatio);\n    };\n\n    var getActiveItems = function getActiveItems(items) {\n        return items.filter(function(item) {\n            return !item.archived;\n        });\n    };\n\n    var Status = {\n        EMPTY: 0,\n        IDLE: 1, // waiting\n        ERROR: 2, // a file is in error state\n        BUSY: 3, // busy processing or loading\n        READY: 4, // all files uploaded\n    };\n\n    var res = null;\n    var canUpdateFileInput = function canUpdateFileInput() {\n        if (res === null) {\n            try {\n                var dataTransfer = new DataTransfer();\n                dataTransfer.items.add(new File(['hello world'], 'This_Works.txt'));\n                var el = document.createElement('input');\n                el.setAttribute('type', 'file');\n                el.files = dataTransfer.files;\n                res = el.files.length === 1;\n            } catch (err) {\n                res = false;\n            }\n        }\n        return res;\n    };\n\n    var ITEM_ERROR = [\n        ItemStatus.LOAD_ERROR,\n        ItemStatus.PROCESSING_ERROR,\n        ItemStatus.PROCESSING_REVERT_ERROR,\n    ];\n\n    var ITEM_BUSY = [\n        ItemStatus.LOADING,\n        ItemStatus.PROCESSING,\n        ItemStatus.PROCESSING_QUEUED,\n        ItemStatus.INIT,\n    ];\n\n    var ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\n    var isItemInErrorState = function isItemInErrorState(item) {\n        return ITEM_ERROR.includes(item.status);\n    };\n    var isItemInBusyState = function isItemInBusyState(item) {\n        return ITEM_BUSY.includes(item.status);\n    };\n    var isItemInReadyState = function isItemInReadyState(item) {\n        return ITEM_READY.includes(item.status);\n    };\n\n    var isAsync = function isAsync(state) {\n        return (\n            isObject(state.options.server) &&\n            (isObject(state.options.server.process) || isFunction(state.options.server.process))\n        );\n    };\n\n    var queries = function queries(state) {\n        return {\n            GET_STATUS: function GET_STATUS() {\n                var items = getActiveItems(state.items);\n                var EMPTY = Status.EMPTY,\n                    ERROR = Status.ERROR,\n                    BUSY = Status.BUSY,\n                    IDLE = Status.IDLE,\n                    READY = Status.READY;\n\n                if (items.length === 0) return EMPTY;\n\n                if (items.some(isItemInErrorState)) return ERROR;\n\n                if (items.some(isItemInBusyState)) return BUSY;\n\n                if (items.some(isItemInReadyState)) return READY;\n\n                return IDLE;\n            },\n\n            GET_ITEM: function GET_ITEM(query) {\n                return getItemByQuery(state.items, query);\n            },\n\n            GET_ACTIVE_ITEM: function GET_ACTIVE_ITEM(query) {\n                return getItemByQuery(getActiveItems(state.items), query);\n            },\n\n            GET_ACTIVE_ITEMS: function GET_ACTIVE_ITEMS() {\n                return getActiveItems(state.items);\n            },\n\n            GET_ITEMS: function GET_ITEMS() {\n                return state.items;\n            },\n\n            GET_ITEM_NAME: function GET_ITEM_NAME(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.filename : null;\n            },\n\n            GET_ITEM_SIZE: function GET_ITEM_SIZE(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.fileSize : null;\n            },\n\n            GET_STYLES: function GET_STYLES() {\n                return Object.keys(state.options)\n                    .filter(function(key) {\n                        return /^style/.test(key);\n                    })\n                    .map(function(option) {\n                        return {\n                            name: option,\n                            value: state.options[option],\n                        };\n                    });\n            },\n\n            GET_PANEL_ASPECT_RATIO: function GET_PANEL_ASPECT_RATIO() {\n                var isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n                var aspectRatio = isShapeCircle\n                    ? 1\n                    : getNumericAspectRatioFromString(state.options.stylePanelAspectRatio);\n                return aspectRatio;\n            },\n\n            GET_ITEM_PANEL_ASPECT_RATIO: function GET_ITEM_PANEL_ASPECT_RATIO() {\n                return state.options.styleItemPanelAspectRatio;\n            },\n\n            GET_ITEMS_BY_STATUS: function GET_ITEMS_BY_STATUS(status) {\n                return getActiveItems(state.items).filter(function(item) {\n                    return item.status === status;\n                });\n            },\n\n            GET_TOTAL_ITEMS: function GET_TOTAL_ITEMS() {\n                return getActiveItems(state.items).length;\n            },\n\n            SHOULD_UPDATE_FILE_INPUT: function SHOULD_UPDATE_FILE_INPUT() {\n                return state.options.storeAsFile && canUpdateFileInput() && !isAsync(state);\n            },\n\n            IS_ASYNC: function IS_ASYNC() {\n                return isAsync(state);\n            },\n\n            GET_FILE_SIZE_LABELS: function GET_FILE_SIZE_LABELS(query) {\n                return {\n                    labelBytes: query('GET_LABEL_FILE_SIZE_BYTES') || undefined,\n                    labelKilobytes: query('GET_LABEL_FILE_SIZE_KILOBYTES') || undefined,\n                    labelMegabytes: query('GET_LABEL_FILE_SIZE_MEGABYTES') || undefined,\n                    labelGigabytes: query('GET_LABEL_FILE_SIZE_GIGABYTES') || undefined,\n                };\n            },\n        };\n    };\n\n    var hasRoomForItem = function hasRoomForItem(state) {\n        var count = getActiveItems(state.items).length;\n\n        // if cannot have multiple items, to add one item it should currently not contain items\n        if (!state.options.allowMultiple) {\n            return count === 0;\n        }\n\n        // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n        var maxFileCount = state.options.maxFiles;\n        if (maxFileCount === null) {\n            return true;\n        }\n\n        // we check if the current count is smaller than the max count, if so, another file can still be added\n        if (count < maxFileCount) {\n            return true;\n        }\n\n        // no more room for another file\n        return false;\n    };\n\n    var limit = function limit(value, min, max) {\n        return Math.max(Math.min(max, value), min);\n    };\n\n    var arrayInsert = function arrayInsert(arr, index, item) {\n        return arr.splice(index, 0, item);\n    };\n\n    var insertItem = function insertItem(items, item, index) {\n        if (isEmpty(item)) {\n            return null;\n        }\n\n        // if index is undefined, append\n        if (typeof index === 'undefined') {\n            items.push(item);\n            return item;\n        }\n\n        // limit the index to the size of the items array\n        index = limit(index, 0, items.length);\n\n        // add item to array\n        arrayInsert(items, index, item);\n\n        // expose\n        return item;\n    };\n\n    var isBase64DataURI = function isBase64DataURI(str) {\n        return /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n            str\n        );\n    };\n\n    var getFilenameFromURL = function getFilenameFromURL(url) {\n        return ('' + url)\n            .split('/')\n            .pop()\n            .split('?')\n            .shift();\n    };\n\n    var getExtensionFromFilename = function getExtensionFromFilename(name) {\n        return name.split('.').pop();\n    };\n\n    var guesstimateExtension = function guesstimateExtension(type) {\n        // if no extension supplied, exit here\n        if (typeof type !== 'string') {\n            return '';\n        }\n\n        // get subtype\n        var subtype = type.split('/').pop();\n\n        // is svg subtype\n        if (/svg/.test(subtype)) {\n            return 'svg';\n        }\n\n        if (/zip|compressed/.test(subtype)) {\n            return 'zip';\n        }\n\n        if (/plain/.test(subtype)) {\n            return 'txt';\n        }\n\n        if (/msword/.test(subtype)) {\n            return 'doc';\n        }\n\n        // if is valid subtype\n        if (/[a-z]+/.test(subtype)) {\n            // always use jpg extension\n            if (subtype === 'jpeg') {\n                return 'jpg';\n            }\n\n            // return subtype\n            return subtype;\n        }\n\n        return '';\n    };\n\n    var leftPad = function leftPad(value) {\n        var padding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        return (padding + value).slice(-padding.length);\n    };\n\n    var getDateString = function getDateString() {\n        var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n        return (\n            date.getFullYear() +\n            '-' +\n            leftPad(date.getMonth() + 1, '00') +\n            '-' +\n            leftPad(date.getDate(), '00') +\n            '_' +\n            leftPad(date.getHours(), '00') +\n            '-' +\n            leftPad(date.getMinutes(), '00') +\n            '-' +\n            leftPad(date.getSeconds(), '00')\n        );\n    };\n\n    var getFileFromBlob = function getFileFromBlob(blob, filename) {\n        var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var extension = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n        var file =\n            typeof type === 'string'\n                ? blob.slice(0, blob.size, type)\n                : blob.slice(0, blob.size, blob.type);\n        file.lastModifiedDate = new Date();\n\n        // copy relative path\n        if (blob._relativePath) file._relativePath = blob._relativePath;\n\n        // if blob has name property, use as filename if no filename supplied\n        if (!isString(filename)) {\n            filename = getDateString();\n        }\n\n        // if filename supplied but no extension and filename has extension\n        if (filename && extension === null && getExtensionFromFilename(filename)) {\n            file.name = filename;\n        } else {\n            extension = extension || guesstimateExtension(file.type);\n            file.name = filename + (extension ? '.' + extension : '');\n        }\n\n        return file;\n    };\n\n    var getBlobBuilder = function getBlobBuilder() {\n        return (window.BlobBuilder =\n            window.BlobBuilder ||\n            window.WebKitBlobBuilder ||\n            window.MozBlobBuilder ||\n            window.MSBlobBuilder);\n    };\n\n    var createBlob = function createBlob(arrayBuffer, mimeType) {\n        var BB = getBlobBuilder();\n\n        if (BB) {\n            var bb = new BB();\n            bb.append(arrayBuffer);\n            return bb.getBlob(mimeType);\n        }\n\n        return new Blob([arrayBuffer], {\n            type: mimeType,\n        });\n    };\n\n    var getBlobFromByteStringWithMimeType = function getBlobFromByteStringWithMimeType(\n        byteString,\n        mimeType\n    ) {\n        var ab = new ArrayBuffer(byteString.length);\n        var ia = new Uint8Array(ab);\n\n        for (var i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n\n        return createBlob(ab, mimeType);\n    };\n\n    var getMimeTypeFromBase64DataURI = function getMimeTypeFromBase64DataURI(dataURI) {\n        return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n    };\n\n    var getBase64DataFromBase64DataURI = function getBase64DataFromBase64DataURI(dataURI) {\n        // get data part of string (remove data:image/jpeg...,)\n        var data = dataURI.split(',')[1];\n\n        // remove any whitespace as that causes InvalidCharacterError in IE\n        return data.replace(/\\s/g, '');\n    };\n\n    var getByteStringFromBase64DataURI = function getByteStringFromBase64DataURI(dataURI) {\n        return atob(getBase64DataFromBase64DataURI(dataURI));\n    };\n\n    var getBlobFromBase64DataURI = function getBlobFromBase64DataURI(dataURI) {\n        var mimeType = getMimeTypeFromBase64DataURI(dataURI);\n        var byteString = getByteStringFromBase64DataURI(dataURI);\n\n        return getBlobFromByteStringWithMimeType(byteString, mimeType);\n    };\n\n    var getFileFromBase64DataURI = function getFileFromBase64DataURI(dataURI, filename, extension) {\n        return getFileFromBlob(getBlobFromBase64DataURI(dataURI), filename, null, extension);\n    };\n\n    var getFileNameFromHeader = function getFileNameFromHeader(header) {\n        // test if is content disposition header, if not exit\n        if (!/^content-disposition:/i.test(header)) return null;\n\n        // get filename parts\n        var matches = header\n            .split(/filename=|filename\\*=.+''/)\n            .splice(1)\n            .map(function(name) {\n                return name.trim().replace(/^[\"']|[;\"']{0,2}$/g, '');\n            })\n            .filter(function(name) {\n                return name.length;\n            });\n\n        return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n    };\n\n    var getFileSizeFromHeader = function getFileSizeFromHeader(header) {\n        if (/content-length:/i.test(header)) {\n            var size = header.match(/[0-9]+/)[0];\n            return size ? parseInt(size, 10) : null;\n        }\n        return null;\n    };\n\n    var getTranfserIdFromHeader = function getTranfserIdFromHeader(header) {\n        if (/x-content-transfer-id:/i.test(header)) {\n            var id = (header.split(':')[1] || '').trim();\n            return id || null;\n        }\n        return null;\n    };\n\n    var getFileInfoFromHeaders = function getFileInfoFromHeaders(headers) {\n        var info = {\n            source: null,\n            name: null,\n            size: null,\n        };\n\n        var rows = headers.split('\\n');\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n        try {\n            for (\n                var _iterator = rows[Symbol.iterator](), _step;\n                !(_iteratorNormalCompletion = (_step = _iterator.next()).done);\n                _iteratorNormalCompletion = true\n            ) {\n                var header = _step.value;\n\n                var name = getFileNameFromHeader(header);\n                if (name) {\n                    info.name = name;\n                    continue;\n                }\n\n                var size = getFileSizeFromHeader(header);\n                if (size) {\n                    info.size = size;\n                    continue;\n                }\n\n                var source = getTranfserIdFromHeader(header);\n                if (source) {\n                    info.source = source;\n                    continue;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        return info;\n    };\n\n    var createFileLoader = function createFileLoader(fetchFn) {\n        var state = {\n            source: null,\n            complete: false,\n            progress: 0,\n            size: null,\n            timestamp: null,\n            duration: 0,\n            request: null,\n        };\n\n        var getProgress = function getProgress() {\n            return state.progress;\n        };\n        var abort = function abort() {\n            if (state.request && state.request.abort) {\n                state.request.abort();\n            }\n        };\n\n        // load source\n        var load = function load() {\n            // get quick reference\n            var source = state.source;\n\n            api.fire('init', source);\n\n            // Load Files\n            if (source instanceof File) {\n                api.fire('load', source);\n            } else if (source instanceof Blob) {\n                // Load blobs, set default name to current date\n                api.fire('load', getFileFromBlob(source, source.name));\n            } else if (isBase64DataURI(source)) {\n                // Load base 64, set default name to current date\n                api.fire('load', getFileFromBase64DataURI(source));\n            } else {\n                // Deal as if is external URL, let's load it!\n                loadURL(source);\n            }\n        };\n\n        // loads a url\n        var loadURL = function loadURL(url) {\n            // is remote url and no fetch method supplied\n            if (!fetchFn) {\n                api.fire('error', {\n                    type: 'error',\n                    body: \"Can't load URL\",\n                    code: 400,\n                });\n\n                return;\n            }\n\n            // set request start\n            state.timestamp = Date.now();\n\n            // load file\n            state.request = fetchFn(\n                url,\n                function(response) {\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // done!\n                    state.complete = true;\n\n                    // turn blob response into a file\n                    if (response instanceof Blob) {\n                        response = getFileFromBlob(\n                            response,\n                            response.name || getFilenameFromURL(url)\n                        );\n                    }\n\n                    api.fire(\n                        'load',\n                        // if has received blob, we go with blob, if no response, we return null\n                        response instanceof Blob ? response : response ? response.body : null\n                    );\n                },\n                function(error) {\n                    api.fire(\n                        'error',\n                        typeof error === 'string'\n                            ? {\n                                  type: 'error',\n                                  code: 0,\n                                  body: error,\n                              }\n                            : error\n                    );\n                },\n                function(computable, current, total) {\n                    // collected some meta data already\n                    if (total) {\n                        state.size = total;\n                    }\n\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // if we can't compute progress, we're not going to fire progress events\n                    if (!computable) {\n                        state.progress = null;\n                        return;\n                    }\n\n                    // update progress percentage\n                    state.progress = current / total;\n\n                    // expose\n                    api.fire('progress', state.progress);\n                },\n                function() {\n                    api.fire('abort');\n                },\n                function(response) {\n                    var fileinfo = getFileInfoFromHeaders(\n                        typeof response === 'string' ? response : response.headers\n                    );\n                    api.fire('meta', {\n                        size: state.size || fileinfo.size,\n                        filename: fileinfo.name,\n                        source: fileinfo.source,\n                    });\n                }\n            );\n        };\n\n        var api = Object.assign({}, on(), {\n            setSource: function setSource(source) {\n                return (state.source = source);\n            },\n            getProgress: getProgress, // file load progress\n            abort: abort, // abort file load\n            load: load, // start load\n        });\n\n        return api;\n    };\n\n    var isGet = function isGet(method) {\n        return /GET|HEAD/.test(method);\n    };\n\n    var sendRequest = function sendRequest(data, url, options) {\n        var api = {\n            onheaders: function onheaders() {},\n            onprogress: function onprogress() {},\n            onload: function onload() {},\n            ontimeout: function ontimeout() {},\n            onerror: function onerror() {},\n            onabort: function onabort() {},\n            abort: function abort() {\n                aborted = true;\n                xhr.abort();\n            },\n        };\n\n        // timeout identifier, only used when timeout is defined\n        var aborted = false;\n        var headersReceived = false;\n\n        // set default options\n        options = Object.assign(\n            {\n                method: 'POST',\n                headers: {},\n                withCredentials: false,\n            },\n            options\n        );\n\n        // encode url\n        url = encodeURI(url);\n\n        // if method is GET, add any received data to url\n\n        if (isGet(options.method) && data) {\n            url =\n                '' +\n                url +\n                encodeURIComponent(typeof data === 'string' ? data : JSON.stringify(data));\n        }\n\n        // create request\n        var xhr = new XMLHttpRequest();\n\n        // progress of load\n        var process = isGet(options.method) ? xhr : xhr.upload;\n        process.onprogress = function(e) {\n            // no progress event when aborted ( onprogress is called once after abort() )\n            if (aborted) {\n                return;\n            }\n\n            api.onprogress(e.lengthComputable, e.loaded, e.total);\n        };\n\n        // tries to get header info to the app as fast as possible\n        xhr.onreadystatechange = function() {\n            // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n            if (xhr.readyState < 2) {\n                return;\n            }\n\n            // no server response\n            if (xhr.readyState === 4 && xhr.status === 0) {\n                return;\n            }\n\n            if (headersReceived) {\n                return;\n            }\n\n            headersReceived = true;\n\n            // we've probably received some useful data in response headers\n            api.onheaders(xhr);\n        };\n\n        // load successful\n        xhr.onload = function() {\n            // is classified as valid response\n            if (xhr.status >= 200 && xhr.status < 300) {\n                api.onload(xhr);\n            } else {\n                api.onerror(xhr);\n            }\n        };\n\n        // error during load\n        xhr.onerror = function() {\n            return api.onerror(xhr);\n        };\n\n        // request aborted\n        xhr.onabort = function() {\n            aborted = true;\n            api.onabort();\n        };\n\n        // request timeout\n        xhr.ontimeout = function() {\n            return api.ontimeout(xhr);\n        };\n\n        // open up open up!\n        xhr.open(options.method, url, true);\n\n        // set timeout if defined (do it after open so IE11 plays ball)\n        if (isInt(options.timeout)) {\n            xhr.timeout = options.timeout;\n        }\n\n        // add headers\n        Object.keys(options.headers).forEach(function(key) {\n            var value = unescape(encodeURIComponent(options.headers[key]));\n            xhr.setRequestHeader(key, value);\n        });\n\n        // set type of response\n        if (options.responseType) {\n            xhr.responseType = options.responseType;\n        }\n\n        // set credentials\n        if (options.withCredentials) {\n            xhr.withCredentials = true;\n        }\n\n        // let's send our data\n        xhr.send(data);\n\n        return api;\n    };\n\n    var createResponse = function createResponse(type, code, body, headers) {\n        return {\n            type: type,\n            code: code,\n            body: body,\n            headers: headers,\n        };\n    };\n\n    var createTimeoutResponse = function createTimeoutResponse(cb) {\n        return function(xhr) {\n            cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n        };\n    };\n\n    var hasQS = function hasQS(str) {\n        return /\\?/.test(str);\n    };\n    var buildURL = function buildURL() {\n        var url = '';\n        for (var _len = arguments.length, parts = new Array(_len), _key = 0; _key < _len; _key++) {\n            parts[_key] = arguments[_key];\n        }\n        parts.forEach(function(part) {\n            url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, '&') : part;\n        });\n        return url;\n    };\n\n    var createFetchFunction = function createFetchFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === 'function') {\n            return action;\n        }\n\n        // no action supplied\n        if (!action || !isString(action.url)) {\n            return null;\n        }\n\n        // set onload hanlder\n        var onload =\n            action.onload ||\n            function(res) {\n                return res;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // internal handler\n        return function(url, load, error, progress, abort, headers) {\n            // do local or remote request based on if the url is external\n            var request = sendRequest(\n                url,\n                buildURL(apiUrl, action.url),\n                Object.assign({}, action, {\n                    responseType: 'blob',\n                })\n            );\n\n            request.onload = function(xhr) {\n                // get headers\n                var headers = xhr.getAllResponseHeaders();\n\n                // get filename\n                var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n                // create response\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        action.method === 'HEAD'\n                            ? null\n                            : getFileFromBlob(onload(xhr.response), filename),\n                        headers\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onheaders = function(xhr) {\n                headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n\n            // should return request\n            return request;\n        };\n    };\n\n    var ChunkStatus = {\n        QUEUED: 0,\n        COMPLETE: 1,\n        PROCESSING: 2,\n        ERROR: 3,\n        WAITING: 4,\n    };\n\n    /*\n                                                       function signature:\n                                                         (file, metadata, load, error, progress, abort, transfer, options) => {\n                                                           return {\n                                                           abort:() => {}\n                                                         }\n                                                       }\n                                                       */\n\n    // apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\n    var processFileChunked = function processFileChunked(\n        apiUrl,\n        action,\n        name,\n        file,\n        metadata,\n        load,\n        error,\n        progress,\n        abort,\n        transfer,\n        options\n    ) {\n        // all chunks\n        var chunks = [];\n        var chunkTransferId = options.chunkTransferId,\n            chunkServer = options.chunkServer,\n            chunkSize = options.chunkSize,\n            chunkRetryDelays = options.chunkRetryDelays;\n\n        // default state\n        var state = {\n            serverId: chunkTransferId,\n            aborted: false,\n        };\n\n        // set onload handlers\n        var ondata =\n            action.ondata ||\n            function(fd) {\n                return fd;\n            };\n        var onload =\n            action.onload ||\n            function(xhr, method) {\n                return method === 'HEAD' ? xhr.getResponseHeader('Upload-Offset') : xhr.response;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // create server hook\n        var requestTransferId = function requestTransferId(cb) {\n            var formData = new FormData();\n\n            // add metadata under same name\n            if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(file, metadata)\n                    : Object.assign(\n                          {},\n\n                          action.headers,\n                          {\n                              'Upload-Length': file.size,\n                          }\n                      );\n\n            var requestParams = Object.assign({}, action, {\n                headers: headers,\n            });\n\n            // send request object\n            var request = sendRequest(\n                ondata(formData),\n                buildURL(apiUrl, action.url),\n                requestParams\n            );\n\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n\n            request.onerror = function(xhr) {\n                return error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n        };\n\n        var requestTransferOffset = function requestTransferOffset(cb) {\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(state.serverId)\n                    : Object.assign(\n                          {},\n\n                          action.headers\n                      );\n\n            var requestParams = {\n                headers: headers,\n                method: 'HEAD',\n            };\n\n            var request = sendRequest(null, requestUrl, requestParams);\n\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n\n            request.onerror = function(xhr) {\n                return error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n        };\n\n        // create chunks\n        var lastChunkIndex = Math.floor(file.size / chunkSize);\n        for (var i = 0; i <= lastChunkIndex; i++) {\n            var offset = i * chunkSize;\n            var data = file.slice(offset, offset + chunkSize, 'application/offset+octet-stream');\n            chunks[i] = {\n                index: i,\n                size: data.size,\n                offset: offset,\n                data: data,\n                file: file,\n                progress: 0,\n                retries: _toConsumableArray(chunkRetryDelays),\n                status: ChunkStatus.QUEUED,\n                error: null,\n                request: null,\n                timeout: null,\n            };\n        }\n\n        var completeProcessingChunks = function completeProcessingChunks() {\n            return load(state.serverId);\n        };\n\n        var canProcessChunk = function canProcessChunk(chunk) {\n            return chunk.status === ChunkStatus.QUEUED || chunk.status === ChunkStatus.ERROR;\n        };\n\n        var processChunk = function processChunk(chunk) {\n            // processing is paused, wait here\n            if (state.aborted) return;\n\n            // get next chunk to process\n            chunk = chunk || chunks.find(canProcessChunk);\n\n            // no more chunks to process\n            if (!chunk) {\n                // all done?\n                if (\n                    chunks.every(function(chunk) {\n                        return chunk.status === ChunkStatus.COMPLETE;\n                    })\n                ) {\n                    completeProcessingChunks();\n                }\n\n                // no chunk to handle\n                return;\n            }\n\n            // now processing this chunk\n            chunk.status = ChunkStatus.PROCESSING;\n            chunk.progress = null;\n\n            // allow parsing of formdata\n            var ondata =\n                chunkServer.ondata ||\n                function(fd) {\n                    return fd;\n                };\n            var onerror =\n                chunkServer.onerror ||\n                function(res) {\n                    return null;\n                };\n            var onload = chunkServer.onload || function() {};\n\n            // send request object\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n            var headers =\n                typeof chunkServer.headers === 'function'\n                    ? chunkServer.headers(chunk)\n                    : Object.assign(\n                          {},\n\n                          chunkServer.headers,\n                          {\n                              'Content-Type': 'application/offset+octet-stream',\n                              'Upload-Offset': chunk.offset,\n                              'Upload-Length': file.size,\n                              'Upload-Name': file.name,\n                          }\n                      );\n\n            var request = (chunk.request = sendRequest(\n                ondata(chunk.data),\n                requestUrl,\n                Object.assign({}, chunkServer, {\n                    headers: headers,\n                })\n            ));\n\n            request.onload = function(xhr) {\n                // allow hooking into request result\n                onload(xhr, chunk.index, chunks.length);\n\n                // done!\n                chunk.status = ChunkStatus.COMPLETE;\n\n                // remove request reference\n                chunk.request = null;\n\n                // start processing more chunks\n                processChunks();\n            };\n\n            request.onprogress = function(lengthComputable, loaded, total) {\n                chunk.progress = lengthComputable ? loaded : null;\n                updateTotalProgress();\n            };\n\n            request.onerror = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                chunk.error = onerror(xhr.response) || xhr.statusText;\n                if (!retryProcessChunk(chunk)) {\n                    error(\n                        createResponse(\n                            'error',\n                            xhr.status,\n                            onerror(xhr.response) || xhr.statusText,\n                            xhr.getAllResponseHeaders()\n                        )\n                    );\n                }\n            };\n\n            request.ontimeout = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                if (!retryProcessChunk(chunk)) {\n                    createTimeoutResponse(error)(xhr);\n                }\n            };\n\n            request.onabort = function() {\n                chunk.status = ChunkStatus.QUEUED;\n                chunk.request = null;\n                abort();\n            };\n        };\n\n        var retryProcessChunk = function retryProcessChunk(chunk) {\n            // no more retries left\n            if (chunk.retries.length === 0) return false;\n\n            // new retry\n            chunk.status = ChunkStatus.WAITING;\n            clearTimeout(chunk.timeout);\n            chunk.timeout = setTimeout(function() {\n                processChunk(chunk);\n            }, chunk.retries.shift());\n\n            // we're going to retry\n            return true;\n        };\n\n        var updateTotalProgress = function updateTotalProgress() {\n            // calculate total progress fraction\n            var totalBytesTransfered = chunks.reduce(function(p, chunk) {\n                if (p === null || chunk.progress === null) return null;\n                return p + chunk.progress;\n            }, 0);\n\n            // can't compute progress\n            if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n            // calculate progress values\n            var totalSize = chunks.reduce(function(total, chunk) {\n                return total + chunk.size;\n            }, 0);\n\n            // can update progress indicator\n            progress(true, totalBytesTransfered, totalSize);\n        };\n\n        // process new chunks\n        var processChunks = function processChunks() {\n            var totalProcessing = chunks.filter(function(chunk) {\n                return chunk.status === ChunkStatus.PROCESSING;\n            }).length;\n            if (totalProcessing >= 1) return;\n            processChunk();\n        };\n\n        var abortChunks = function abortChunks() {\n            chunks.forEach(function(chunk) {\n                clearTimeout(chunk.timeout);\n                if (chunk.request) {\n                    chunk.request.abort();\n                }\n            });\n        };\n\n        // let's go!\n        if (!state.serverId) {\n            requestTransferId(function(serverId) {\n                // stop here if aborted, might have happened in between request and callback\n                if (state.aborted) return;\n\n                // pass back to item so we can use it if something goes wrong\n                transfer(serverId);\n\n                // store internally\n                state.serverId = serverId;\n                processChunks();\n            });\n        } else {\n            requestTransferOffset(function(offset) {\n                // stop here if aborted, might have happened in between request and callback\n                if (state.aborted) return;\n\n                // mark chunks with lower offset as complete\n                chunks\n                    .filter(function(chunk) {\n                        return chunk.offset < offset;\n                    })\n                    .forEach(function(chunk) {\n                        chunk.status = ChunkStatus.COMPLETE;\n                        chunk.progress = chunk.size;\n                    });\n\n                // continue processing\n                processChunks();\n            });\n        }\n\n        return {\n            abort: function abort() {\n                state.aborted = true;\n                abortChunks();\n            },\n        };\n    };\n\n    /*\n                                                               function signature:\n                                                                 (file, metadata, load, error, progress, abort) => {\n                                                                   return {\n                                                                   abort:() => {}\n                                                                 }\n                                                               }\n                                                               */\n    var createFileProcessorFunction = function createFileProcessorFunction(\n        apiUrl,\n        action,\n        name,\n        options\n    ) {\n        return function(file, metadata, load, error, progress, abort, transfer) {\n            // no file received\n            if (!file) return;\n\n            // if was passed a file, and we can chunk it, exit here\n            var canChunkUpload = options.chunkUploads;\n            var shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n            var willChunkUpload = canChunkUpload && (shouldChunkUpload || options.chunkForce);\n            if (file instanceof Blob && willChunkUpload)\n                return processFileChunked(\n                    apiUrl,\n                    action,\n                    name,\n                    file,\n                    metadata,\n                    load,\n                    error,\n                    progress,\n                    abort,\n                    transfer,\n                    options\n                );\n\n            // set handlers\n            var ondata =\n                action.ondata ||\n                function(fd) {\n                    return fd;\n                };\n            var onload =\n                action.onload ||\n                function(res) {\n                    return res;\n                };\n            var onerror =\n                action.onerror ||\n                function(res) {\n                    return null;\n                };\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(file, metadata) || {}\n                    : Object.assign(\n                          {},\n\n                          action.headers\n                      );\n\n            var requestParams = Object.assign({}, action, {\n                headers: headers,\n            });\n\n            // create formdata object\n            var formData = new FormData();\n\n            // add metadata under same name\n            if (isObject(metadata)) {\n                formData.append(name, JSON.stringify(metadata));\n            }\n\n            // Turn into an array of objects so no matter what the input, we can handle it the same way\n            (file instanceof Blob ? [{ name: null, file: file }] : file).forEach(function(item) {\n                formData.append(\n                    name,\n                    item.file,\n                    item.name === null ? item.file.name : '' + item.name + item.file.name\n                );\n            });\n\n            // send request object\n            var request = sendRequest(\n                ondata(formData),\n                buildURL(apiUrl, action.url),\n                requestParams\n            );\n            request.onload = function(xhr) {\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        onload(xhr.response),\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n\n            // should return request\n            return request;\n        };\n    };\n\n    var createProcessorFunction = function createProcessorFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        var name = arguments.length > 2 ? arguments[2] : undefined;\n        var options = arguments.length > 3 ? arguments[3] : undefined;\n\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === 'function')\n            return function() {\n                for (\n                    var _len = arguments.length, params = new Array(_len), _key = 0;\n                    _key < _len;\n                    _key++\n                ) {\n                    params[_key] = arguments[_key];\n                }\n                return action.apply(void 0, [name].concat(params, [options]));\n            };\n\n        // no action supplied\n        if (!action || !isString(action.url)) return null;\n\n        // internal handler\n        return createFileProcessorFunction(apiUrl, action, name, options);\n    };\n\n    /*\n                                                      function signature:\n                                                      (uniqueFileId, load, error) => { }\n                                                      */\n    var createRevertFunction = function createRevertFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // is custom implementation\n        if (typeof action === 'function') {\n            return action;\n        }\n\n        // no action supplied, return stub function, interface will work, but file won't be removed\n        if (!action || !isString(action.url)) {\n            return function(uniqueFileId, load) {\n                return load();\n            };\n        }\n\n        // set onload hanlder\n        var onload =\n            action.onload ||\n            function(res) {\n                return res;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // internal implementation\n        return function(uniqueFileId, load, error) {\n            var request = sendRequest(\n                uniqueFileId,\n                apiUrl + action.url,\n                action // contains method, headers and withCredentials properties\n            );\n            request.onload = function(xhr) {\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        onload(xhr.response),\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n\n            return request;\n        };\n    };\n\n    var getRandomNumber = function getRandomNumber() {\n        var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n        return min + Math.random() * (max - min);\n    };\n\n    var createPerceivedPerformanceUpdater = function createPerceivedPerformanceUpdater(cb) {\n        var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var tickMin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 25;\n        var tickMax = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;\n        var timeout = null;\n        var start = Date.now();\n\n        var tick = function tick() {\n            var runtime = Date.now() - start;\n            var delay = getRandomNumber(tickMin, tickMax);\n\n            if (runtime + delay > duration) {\n                delay = runtime + delay - duration;\n            }\n\n            var progress = runtime / duration;\n            if (progress >= 1 || document.hidden) {\n                cb(1);\n                return;\n            }\n\n            cb(progress);\n\n            timeout = setTimeout(tick, delay);\n        };\n\n        if (duration > 0) tick();\n\n        return {\n            clear: function clear() {\n                clearTimeout(timeout);\n            },\n        };\n    };\n\n    var createFileProcessor = function createFileProcessor(processFn, options) {\n        var state = {\n            complete: false,\n            perceivedProgress: 0,\n            perceivedPerformanceUpdater: null,\n            progress: null,\n            timestamp: null,\n            perceivedDuration: 0,\n            duration: 0,\n            request: null,\n            response: null,\n        };\n        var allowMinimumUploadDuration = options.allowMinimumUploadDuration;\n\n        var process = function process(file, metadata) {\n            var progressFn = function progressFn() {\n                // we've not yet started the real download, stop here\n                // the request might not go through, for instance, there might be some server trouble\n                // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n                if (state.duration === 0 || state.progress === null) return;\n\n                // as we're now processing, fire the progress event\n                api.fire('progress', api.getProgress());\n            };\n\n            var completeFn = function completeFn() {\n                state.complete = true;\n                api.fire('load-perceived', state.response.body);\n            };\n\n            // let's start processing\n            api.fire('start');\n\n            // set request start\n            state.timestamp = Date.now();\n\n            // create perceived performance progress indicator\n            state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n                function(progress) {\n                    state.perceivedProgress = progress;\n                    state.perceivedDuration = Date.now() - state.timestamp;\n\n                    progressFn();\n\n                    // if fake progress is done, and a response has been received,\n                    // and we've not yet called the complete method\n                    if (state.response && state.perceivedProgress === 1 && !state.complete) {\n                        // we done!\n                        completeFn();\n                    }\n                },\n                // random delay as in a list of files you start noticing\n                // files uploading at the exact same speed\n                allowMinimumUploadDuration ? getRandomNumber(750, 1500) : 0\n            );\n\n            // remember request so we can abort it later\n            state.request = processFn(\n                // the file to process\n                file,\n\n                // the metadata to send along\n                metadata,\n\n                // callbacks (load, error, progress, abort, transfer)\n                // load expects the body to be a server id if\n                // you want to make use of revert\n                function(response) {\n                    // we put the response in state so we can access\n                    // it outside of this method\n                    state.response = isObject(response)\n                        ? response\n                        : {\n                              type: 'load',\n                              code: 200,\n                              body: '' + response,\n                              headers: {},\n                          };\n\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // force progress to 1 as we're now done\n                    state.progress = 1;\n\n                    // actual load is done let's share results\n                    api.fire('load', state.response.body);\n\n                    // we are really done\n                    // if perceived progress is 1 ( wait for perceived progress to complete )\n                    // or if server does not support progress ( null )\n                    if (\n                        !allowMinimumUploadDuration ||\n                        (allowMinimumUploadDuration && state.perceivedProgress === 1)\n                    ) {\n                        completeFn();\n                    }\n                },\n\n                // error is expected to be an object with type, code, body\n                function(error) {\n                    // cancel updater\n                    state.perceivedPerformanceUpdater.clear();\n\n                    // update others about this error\n                    api.fire(\n                        'error',\n                        isObject(error)\n                            ? error\n                            : {\n                                  type: 'error',\n                                  code: 0,\n                                  body: '' + error,\n                              }\n                    );\n                },\n\n                // actual processing progress\n                function(computable, current, total) {\n                    // update actual duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // update actual progress\n                    state.progress = computable ? current / total : null;\n\n                    progressFn();\n                },\n\n                // abort does not expect a value\n                function() {\n                    // stop updater\n                    state.perceivedPerformanceUpdater.clear();\n\n                    // fire the abort event so we can switch visuals\n                    api.fire('abort', state.response ? state.response.body : null);\n                },\n\n                // register the id for this transfer\n                function(transferId) {\n                    api.fire('transfer', transferId);\n                }\n            );\n        };\n\n        var abort = function abort() {\n            // no request running, can't abort\n            if (!state.request) return;\n\n            // stop updater\n            state.perceivedPerformanceUpdater.clear();\n\n            // abort actual request\n            if (state.request.abort) state.request.abort();\n\n            // if has response object, we've completed the request\n            state.complete = true;\n        };\n\n        var reset = function reset() {\n            abort();\n            state.complete = false;\n            state.perceivedProgress = 0;\n            state.progress = 0;\n            state.timestamp = null;\n            state.perceivedDuration = 0;\n            state.duration = 0;\n            state.request = null;\n            state.response = null;\n        };\n\n        var getProgress = allowMinimumUploadDuration\n            ? function() {\n                  return state.progress ? Math.min(state.progress, state.perceivedProgress) : null;\n              }\n            : function() {\n                  return state.progress || null;\n              };\n\n        var getDuration = allowMinimumUploadDuration\n            ? function() {\n                  return Math.min(state.duration, state.perceivedDuration);\n              }\n            : function() {\n                  return state.duration;\n              };\n\n        var api = Object.assign({}, on(), {\n            process: process, // start processing file\n            abort: abort, // abort active process request\n            getProgress: getProgress,\n            getDuration: getDuration,\n            reset: reset,\n        });\n\n        return api;\n    };\n\n    var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n        return name.substring(0, name.lastIndexOf('.')) || name;\n    };\n\n    var createFileStub = function createFileStub(source) {\n        var data = [source.name, source.size, source.type];\n\n        // is blob or base64, then we need to set the name\n        if (source instanceof Blob || isBase64DataURI(source)) {\n            data[0] = source.name || getDateString();\n        } else if (isBase64DataURI(source)) {\n            // if is base64 data uri we need to determine the average size and type\n            data[1] = source.length;\n            data[2] = getMimeTypeFromBase64DataURI(source);\n        } else if (isString(source)) {\n            // url\n            data[0] = getFilenameFromURL(source);\n            data[1] = 0;\n            data[2] = 'application/octet-stream';\n        }\n\n        return {\n            name: data[0],\n            size: data[1],\n            type: data[2],\n        };\n    };\n\n    var isFile = function isFile(value) {\n        return !!(value instanceof File || (value instanceof Blob && value.name));\n    };\n\n    var deepCloneObject = function deepCloneObject(src) {\n        if (!isObject(src)) return src;\n        var target = isArray(src) ? [] : {};\n        for (var key in src) {\n            if (!src.hasOwnProperty(key)) continue;\n            var v = src[key];\n            target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n        }\n        return target;\n    };\n\n    var createItem = function createItem() {\n        var origin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var serverFileReference =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var file = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        // unique id for this item, is used to identify the item across views\n        var id = getUniqueId();\n\n        /**\n         * Internal item state\n         */\n        var state = {\n            // is archived\n            archived: false,\n\n            // if is frozen, no longer fires events\n            frozen: false,\n\n            // removed from view\n            released: false,\n\n            // original source\n            source: null,\n\n            // file model reference\n            file: file,\n\n            // id of file on server\n            serverFileReference: serverFileReference,\n\n            // id of file transfer on server\n            transferId: null,\n\n            // is aborted\n            processingAborted: false,\n\n            // current item status\n            status: serverFileReference ? ItemStatus.PROCESSING_COMPLETE : ItemStatus.INIT,\n\n            // active processes\n            activeLoader: null,\n            activeProcessor: null,\n        };\n\n        // callback used when abort processing is called to link back to the resolve method\n        var abortProcessingRequestComplete = null;\n\n        /**\n         * Externally added item metadata\n         */\n        var metadata = {};\n\n        // item data\n        var setStatus = function setStatus(status) {\n            return (state.status = status);\n        };\n\n        // fire event unless the item has been archived\n        var fire = function fire(event) {\n            if (state.released || state.frozen) return;\n            for (\n                var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n                _key < _len;\n                _key++\n            ) {\n                params[_key - 1] = arguments[_key];\n            }\n            api.fire.apply(api, [event].concat(params));\n        };\n\n        // file data\n        var getFileExtension = function getFileExtension() {\n            return getExtensionFromFilename(state.file.name);\n        };\n        var getFileType = function getFileType() {\n            return state.file.type;\n        };\n        var getFileSize = function getFileSize() {\n            return state.file.size;\n        };\n        var getFile = function getFile() {\n            return state.file;\n        };\n\n        //\n        // logic to load a file\n        //\n        var load = function load(source, loader, onload) {\n            // remember the original item source\n            state.source = source;\n\n            // source is known\n            api.fireSync('init');\n\n            // file stub is already there\n            if (state.file) {\n                api.fireSync('load-skip');\n                return;\n            }\n\n            // set a stub file object while loading the actual data\n            state.file = createFileStub(source);\n\n            // starts loading\n            loader.on('init', function() {\n                fire('load-init');\n            });\n\n            // we'eve received a size indication, let's update the stub\n            loader.on('meta', function(meta) {\n                // set size of file stub\n                state.file.size = meta.size;\n\n                // set name of file stub\n                state.file.filename = meta.filename;\n\n                // if has received source, we done\n                if (meta.source) {\n                    origin = FileOrigin.LIMBO;\n                    state.serverFileReference = meta.source;\n                    state.status = ItemStatus.PROCESSING_COMPLETE;\n                }\n\n                // size has been updated\n                fire('load-meta');\n            });\n\n            // the file is now loading we need to update the progress indicators\n            loader.on('progress', function(progress) {\n                setStatus(ItemStatus.LOADING);\n\n                fire('load-progress', progress);\n            });\n\n            // an error was thrown while loading the file, we need to switch to error state\n            loader.on('error', function(error) {\n                setStatus(ItemStatus.LOAD_ERROR);\n\n                fire('load-request-error', error);\n            });\n\n            // user or another process aborted the file load (cannot retry)\n            loader.on('abort', function() {\n                setStatus(ItemStatus.INIT);\n                fire('load-abort');\n            });\n\n            // done loading\n            loader.on('load', function(file) {\n                // as we've now loaded the file the loader is no longer required\n                state.activeLoader = null;\n\n                // called when file has loaded succesfully\n                var success = function success(result) {\n                    // set (possibly) transformed file\n                    state.file = isFile(result) ? result : state.file;\n\n                    // file received\n                    if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n                        setStatus(ItemStatus.PROCESSING_COMPLETE);\n                    } else {\n                        setStatus(ItemStatus.IDLE);\n                    }\n\n                    fire('load');\n                };\n\n                var error = function error(result) {\n                    // set original file\n                    state.file = file;\n                    fire('load-meta');\n\n                    setStatus(ItemStatus.LOAD_ERROR);\n                    fire('load-file-error', result);\n                };\n\n                // if we already have a server file reference, we don't need to call the onload method\n                if (state.serverFileReference) {\n                    success(file);\n                    return;\n                }\n\n                // no server id, let's give this file the full treatment\n                onload(file, success, error);\n            });\n\n            // set loader source data\n            loader.setSource(source);\n\n            // set as active loader\n            state.activeLoader = loader;\n\n            // load the source data\n            loader.load();\n        };\n\n        var retryLoad = function retryLoad() {\n            if (!state.activeLoader) {\n                return;\n            }\n            state.activeLoader.load();\n        };\n\n        var abortLoad = function abortLoad() {\n            if (state.activeLoader) {\n                state.activeLoader.abort();\n                return;\n            }\n            setStatus(ItemStatus.INIT);\n            fire('load-abort');\n        };\n\n        //\n        // logic to process a file\n        //\n        var process = function process(processor, onprocess) {\n            // processing was aborted\n            if (state.processingAborted) {\n                state.processingAborted = false;\n                return;\n            }\n\n            // now processing\n            setStatus(ItemStatus.PROCESSING);\n\n            // reset abort callback\n            abortProcessingRequestComplete = null;\n\n            // if no file loaded we'll wait for the load event\n            if (!(state.file instanceof Blob)) {\n                api.on('load', function() {\n                    process(processor, onprocess);\n                });\n                return;\n            }\n\n            // setup processor\n            processor.on('load', function(serverFileReference) {\n                // need this id to be able to revert the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n            });\n\n            // register transfer id\n            processor.on('transfer', function(transferId) {\n                // need this id to be able to revert the upload\n                state.transferId = transferId;\n            });\n\n            processor.on('load-perceived', function(serverFileReference) {\n                // no longer required\n                state.activeProcessor = null;\n\n                // need this id to be able to rever the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n\n                setStatus(ItemStatus.PROCESSING_COMPLETE);\n                fire('process-complete', serverFileReference);\n            });\n\n            processor.on('start', function() {\n                fire('process-start');\n            });\n\n            processor.on('error', function(error) {\n                state.activeProcessor = null;\n                setStatus(ItemStatus.PROCESSING_ERROR);\n                fire('process-error', error);\n            });\n\n            processor.on('abort', function(serverFileReference) {\n                state.activeProcessor = null;\n\n                // if file was uploaded but processing was cancelled during perceived processor time store file reference\n                state.serverFileReference = serverFileReference;\n\n                setStatus(ItemStatus.IDLE);\n                fire('process-abort');\n\n                // has timeout so doesn't interfere with remove action\n                if (abortProcessingRequestComplete) {\n                    abortProcessingRequestComplete();\n                }\n            });\n\n            processor.on('progress', function(progress) {\n                fire('process-progress', progress);\n            });\n\n            // when successfully transformed\n            var success = function success(file) {\n                // if was archived in the mean time, don't process\n                if (state.archived) return;\n\n                // process file!\n                processor.process(file, Object.assign({}, metadata));\n            };\n\n            // something went wrong during transform phase\n            var error = console.error;\n\n            // start processing the file\n            onprocess(state.file, success, error);\n\n            // set as active processor\n            state.activeProcessor = processor;\n        };\n\n        var requestProcessing = function requestProcessing() {\n            state.processingAborted = false;\n            setStatus(ItemStatus.PROCESSING_QUEUED);\n        };\n\n        var abortProcessing = function abortProcessing() {\n            return new Promise(function(resolve) {\n                if (!state.activeProcessor) {\n                    state.processingAborted = true;\n\n                    setStatus(ItemStatus.IDLE);\n                    fire('process-abort');\n\n                    resolve();\n                    return;\n                }\n\n                abortProcessingRequestComplete = function abortProcessingRequestComplete() {\n                    resolve();\n                };\n\n                state.activeProcessor.abort();\n            });\n        };\n\n        //\n        // logic to revert a processed file\n        //\n        var revert = function revert(revertFileUpload, forceRevert) {\n            return new Promise(function(resolve, reject) {\n                // a completed upload will have a serverFileReference, a failed chunked upload where\n                // getting a serverId succeeded but >=0 chunks have been uploaded will have transferId set\n                var serverTransferId =\n                    state.serverFileReference !== null\n                        ? state.serverFileReference\n                        : state.transferId;\n\n                // cannot revert without a server id for this process\n                if (serverTransferId === null) {\n                    resolve();\n                    return;\n                }\n\n                // revert the upload (fire and forget)\n                revertFileUpload(\n                    serverTransferId,\n                    function() {\n                        // reset file server id and transfer id as now it's not available on the server\n                        state.serverFileReference = null;\n                        state.transferId = null;\n                        resolve();\n                    },\n                    function(error) {\n                        // don't set error state when reverting is optional, it will always resolve\n                        if (!forceRevert) {\n                            resolve();\n                            return;\n                        }\n\n                        // oh no errors\n                        setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n                        fire('process-revert-error');\n                        reject(error);\n                    }\n                );\n\n                // fire event\n                setStatus(ItemStatus.IDLE);\n                fire('process-revert');\n            });\n        };\n\n        // exposed methods\n        var _setMetadata = function setMetadata(key, value, silent) {\n            var keys = key.split('.');\n            var root = keys[0];\n            var last = keys.pop();\n            var data = metadata;\n            keys.forEach(function(key) {\n                return (data = data[key]);\n            });\n\n            // compare old value against new value, if they're the same, we're not updating\n            if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n            // update value\n            data[last] = value;\n\n            // fire update\n            fire('metadata-update', {\n                key: root,\n                value: metadata[root],\n                silent: silent,\n            });\n        };\n\n        var getMetadata = function getMetadata(key) {\n            return deepCloneObject(key ? metadata[key] : metadata);\n        };\n\n        var api = Object.assign(\n            {\n                id: {\n                    get: function get() {\n                        return id;\n                    },\n                },\n                origin: {\n                    get: function get() {\n                        return origin;\n                    },\n                    set: function set(value) {\n                        return (origin = value);\n                    },\n                },\n                serverId: {\n                    get: function get() {\n                        return state.serverFileReference;\n                    },\n                },\n                transferId: {\n                    get: function get() {\n                        return state.transferId;\n                    },\n                },\n                status: {\n                    get: function get() {\n                        return state.status;\n                    },\n                },\n                filename: {\n                    get: function get() {\n                        return state.file.name;\n                    },\n                },\n                filenameWithoutExtension: {\n                    get: function get() {\n                        return getFilenameWithoutExtension(state.file.name);\n                    },\n                },\n                fileExtension: { get: getFileExtension },\n                fileType: { get: getFileType },\n                fileSize: { get: getFileSize },\n                file: { get: getFile },\n                relativePath: {\n                    get: function get() {\n                        return state.file._relativePath;\n                    },\n                },\n\n                source: {\n                    get: function get() {\n                        return state.source;\n                    },\n                },\n\n                getMetadata: getMetadata,\n                setMetadata: function setMetadata(key, value, silent) {\n                    if (isObject(key)) {\n                        var data = key;\n                        Object.keys(data).forEach(function(key) {\n                            _setMetadata(key, data[key], value);\n                        });\n                        return key;\n                    }\n                    _setMetadata(key, value, silent);\n                    return value;\n                },\n\n                extend: function extend(name, handler) {\n                    return (itemAPI[name] = handler);\n                },\n\n                abortLoad: abortLoad,\n                retryLoad: retryLoad,\n                requestProcessing: requestProcessing,\n                abortProcessing: abortProcessing,\n\n                load: load,\n                process: process,\n                revert: revert,\n            },\n\n            on(),\n            {\n                freeze: function freeze() {\n                    return (state.frozen = true);\n                },\n\n                release: function release() {\n                    return (state.released = true);\n                },\n                released: {\n                    get: function get() {\n                        return state.released;\n                    },\n                },\n\n                archive: function archive() {\n                    return (state.archived = true);\n                },\n                archived: {\n                    get: function get() {\n                        return state.archived;\n                    },\n                },\n\n                // replace source and file object\n                setFile: function setFile(file) {\n                    return (state.file = file);\n                },\n            }\n        );\n\n        // create it here instead of returning it instantly so we can extend it later\n        var itemAPI = createObject(api);\n\n        return itemAPI;\n    };\n\n    var getItemIndexByQuery = function getItemIndexByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) {\n            return 0;\n        }\n\n        // invalid queries\n        if (!isString(query)) {\n            return -1;\n        }\n\n        // return item by id (or -1 if not found)\n        return items.findIndex(function(item) {\n            return item.id === query;\n        });\n    };\n\n    var getItemById = function getItemById(items, itemId) {\n        var index = getItemIndexByQuery(items, itemId);\n        if (index < 0) {\n            return;\n        }\n        return items[index] || null;\n    };\n\n    var fetchBlob = function fetchBlob(url, load, error, progress, abort, headers) {\n        var request = sendRequest(null, url, {\n            method: 'GET',\n            responseType: 'blob',\n        });\n\n        request.onload = function(xhr) {\n            // get headers\n            var headers = xhr.getAllResponseHeaders();\n\n            // get filename\n            var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n            // create response\n            load(\n                createResponse('load', xhr.status, getFileFromBlob(xhr.response, filename), headers)\n            );\n        };\n\n        request.onerror = function(xhr) {\n            error(createResponse('error', xhr.status, xhr.statusText, xhr.getAllResponseHeaders()));\n        };\n\n        request.onheaders = function(xhr) {\n            headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n        };\n\n        request.ontimeout = createTimeoutResponse(error);\n        request.onprogress = progress;\n        request.onabort = abort;\n\n        // should return request\n        return request;\n    };\n\n    var getDomainFromURL = function getDomainFromURL(url) {\n        if (url.indexOf('//') === 0) {\n            url = location.protocol + url;\n        }\n        return url\n            .toLowerCase()\n            .replace('blob:', '')\n            .replace(/([a-z])?:\\/\\//, '$1')\n            .split('/')[0];\n    };\n\n    var isExternalURL = function isExternalURL(url) {\n        return (\n            (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n            getDomainFromURL(location.href) !== getDomainFromURL(url)\n        );\n    };\n\n    var dynamicLabel = function dynamicLabel(label) {\n        return function() {\n            return isFunction(label) ? label.apply(void 0, arguments) : label;\n        };\n    };\n\n    var isMockItem = function isMockItem(item) {\n        return !isFile(item.file);\n    };\n\n    var listUpdated = function listUpdated(dispatch, state) {\n        clearTimeout(state.listUpdateTimeout);\n        state.listUpdateTimeout = setTimeout(function() {\n            dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n        }, 0);\n    };\n\n    var optionalPromise = function optionalPromise(fn) {\n        for (\n            var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n            _key < _len;\n            _key++\n        ) {\n            params[_key - 1] = arguments[_key];\n        }\n        return new Promise(function(resolve) {\n            if (!fn) {\n                return resolve(true);\n            }\n\n            var result = fn.apply(void 0, params);\n\n            if (result == null) {\n                return resolve(true);\n            }\n\n            if (typeof result === 'boolean') {\n                return resolve(result);\n            }\n\n            if (typeof result.then === 'function') {\n                result.then(resolve);\n            }\n        });\n    };\n\n    var sortItems = function sortItems(state, compare) {\n        state.items.sort(function(a, b) {\n            return compare(createItemAPI(a), createItemAPI(b));\n        });\n    };\n\n    // returns item based on state\n    var getItemByQueryFromState = function getItemByQueryFromState(state, itemHandler) {\n        return function() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            var query = _ref.query,\n                _ref$success = _ref.success,\n                success = _ref$success === void 0 ? function() {} : _ref$success,\n                _ref$failure = _ref.failure,\n                failure = _ref$failure === void 0 ? function() {} : _ref$failure,\n                options = _objectWithoutProperties(_ref, ['query', 'success', 'failure']);\n            var item = getItemByQuery(state.items, query);\n            if (!item) {\n                failure({\n                    error: createResponse('error', 0, 'Item not found'),\n                    file: null,\n                });\n\n                return;\n            }\n            itemHandler(item, success, failure, options || {});\n        };\n    };\n\n    var actions = function actions(dispatch, query, state) {\n        return {\n            /**\n             * Aborts all ongoing processes\n             */\n            ABORT_ALL: function ABORT_ALL() {\n                getActiveItems(state.items).forEach(function(item) {\n                    item.freeze();\n                    item.abortLoad();\n                    item.abortProcessing();\n                });\n            },\n\n            /**\n             * Sets initial files\n             */\n            DID_SET_FILES: function DID_SET_FILES(_ref2) {\n                var _ref2$value = _ref2.value,\n                    value = _ref2$value === void 0 ? [] : _ref2$value;\n                // map values to file objects\n                var files = value.map(function(file) {\n                    return {\n                        source: file.source ? file.source : file,\n                        options: file.options,\n                    };\n                });\n\n                // loop over files, if file is in list, leave it be, if not, remove\n                // test if items should be moved\n                var activeItems = getActiveItems(state.items);\n\n                activeItems.forEach(function(item) {\n                    // if item not is in new value, remove\n                    if (\n                        !files.find(function(file) {\n                            return file.source === item.source || file.source === item.file;\n                        })\n                    ) {\n                        dispatch('REMOVE_ITEM', { query: item, remove: false });\n                    }\n                });\n\n                // add new files\n                activeItems = getActiveItems(state.items);\n                files.forEach(function(file, index) {\n                    // if file is already in list\n                    if (\n                        activeItems.find(function(item) {\n                            return item.source === file.source || item.file === file.source;\n                        })\n                    )\n                        return;\n\n                    // not in list, add\n                    dispatch(\n                        'ADD_ITEM',\n                        Object.assign({}, file, {\n                            interactionMethod: InteractionMethod.NONE,\n                            index: index,\n                        })\n                    );\n                });\n            },\n\n            DID_UPDATE_ITEM_METADATA: function DID_UPDATE_ITEM_METADATA(_ref3) {\n                var id = _ref3.id,\n                    action = _ref3.action,\n                    change = _ref3.change;\n                // don't do anything\n                if (change.silent) return;\n\n                // if is called multiple times in close succession we combined all calls together to save resources\n                clearTimeout(state.itemUpdateTimeout);\n                state.itemUpdateTimeout = setTimeout(function() {\n                    var item = getItemById(state.items, id);\n\n                    // only revert and attempt to upload when we're uploading to a server\n                    if (!query('IS_ASYNC')) {\n                        // should we update the output data\n                        applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                            item: item,\n                            query: query,\n                            action: action,\n                            change: change,\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                            if (beforePrepareFile)\n                                shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                            if (!shouldPrepareOutput) return;\n\n                            dispatch(\n                                'REQUEST_PREPARE_OUTPUT',\n                                {\n                                    query: id,\n                                    item: item,\n                                    success: function success(file) {\n                                        dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                                    },\n                                },\n\n                                true\n                            );\n                        });\n\n                        return;\n                    }\n\n                    // if is local item we need to enable upload button so change can be propagated to server\n                    if (item.origin === FileOrigin.LOCAL) {\n                        dispatch('DID_LOAD_ITEM', {\n                            id: item.id,\n                            error: null,\n                            serverFileReference: item.source,\n                        });\n                    }\n\n                    // for async scenarios\n                    var upload = function upload() {\n                        // we push this forward a bit so the interface is updated correctly\n                        setTimeout(function() {\n                            dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n                        }, 32);\n                    };\n\n                    var revert = function revert(doUpload) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        )\n                            .then(doUpload ? upload : function() {})\n                            .catch(function() {});\n                    };\n\n                    var abort = function abort(doUpload) {\n                        item.abortProcessing().then(doUpload ? upload : function() {});\n                    };\n\n                    // if we should re-upload the file immediately\n                    if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n                        return revert(state.options.instantUpload);\n                    }\n\n                    // if currently uploading, cancel upload\n                    if (item.status === ItemStatus.PROCESSING) {\n                        return abort(state.options.instantUpload);\n                    }\n\n                    if (state.options.instantUpload) {\n                        upload();\n                    }\n                }, 0);\n            },\n\n            MOVE_ITEM: function MOVE_ITEM(_ref4) {\n                var query = _ref4.query,\n                    index = _ref4.index;\n                var item = getItemByQuery(state.items, query);\n                if (!item) return;\n                var currentIndex = state.items.indexOf(item);\n                index = limit(index, 0, state.items.length - 1);\n                if (currentIndex === index) return;\n                state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n            },\n\n            SORT: function SORT(_ref5) {\n                var compare = _ref5.compare;\n                sortItems(state, compare);\n                dispatch('DID_SORT_ITEMS', {\n                    items: query('GET_ACTIVE_ITEMS'),\n                });\n            },\n\n            ADD_ITEMS: function ADD_ITEMS(_ref6) {\n                var items = _ref6.items,\n                    index = _ref6.index,\n                    interactionMethod = _ref6.interactionMethod,\n                    _ref6$success = _ref6.success,\n                    success = _ref6$success === void 0 ? function() {} : _ref6$success,\n                    _ref6$failure = _ref6.failure,\n                    failure = _ref6$failure === void 0 ? function() {} : _ref6$failure;\n                var currentIndex = index;\n\n                if (index === -1 || typeof index === 'undefined') {\n                    var insertLocation = query('GET_ITEM_INSERT_LOCATION');\n                    var totalItems = query('GET_TOTAL_ITEMS');\n                    currentIndex = insertLocation === 'before' ? 0 : totalItems;\n                }\n\n                var ignoredFiles = query('GET_IGNORED_FILES');\n                var isValidFile = function isValidFile(source) {\n                    return isFile(source)\n                        ? !ignoredFiles.includes(source.name.toLowerCase())\n                        : !isEmpty(source);\n                };\n                var validItems = items.filter(isValidFile);\n\n                var promises = validItems.map(function(source) {\n                    return new Promise(function(resolve, reject) {\n                        dispatch('ADD_ITEM', {\n                            interactionMethod: interactionMethod,\n                            source: source.source || source,\n                            success: resolve,\n                            failure: reject,\n                            index: currentIndex++,\n                            options: source.options || {},\n                        });\n                    });\n                });\n\n                Promise.all(promises)\n                    .then(success)\n                    .catch(failure);\n            },\n\n            /**\n             * @param source\n             * @param index\n             * @param interactionMethod\n             */\n            ADD_ITEM: function ADD_ITEM(_ref7) {\n                var source = _ref7.source,\n                    _ref7$index = _ref7.index,\n                    index = _ref7$index === void 0 ? -1 : _ref7$index,\n                    interactionMethod = _ref7.interactionMethod,\n                    _ref7$success = _ref7.success,\n                    success = _ref7$success === void 0 ? function() {} : _ref7$success,\n                    _ref7$failure = _ref7.failure,\n                    failure = _ref7$failure === void 0 ? function() {} : _ref7$failure,\n                    _ref7$options = _ref7.options,\n                    options = _ref7$options === void 0 ? {} : _ref7$options;\n                // if no source supplied\n                if (isEmpty(source)) {\n                    failure({\n                        error: createResponse('error', 0, 'No source'),\n                        file: null,\n                    });\n\n                    return;\n                }\n\n                // filter out invalid file items, used to filter dropped directory contents\n                if (\n                    isFile(source) &&\n                    state.options.ignoredFiles.includes(source.name.toLowerCase())\n                ) {\n                    // fail silently\n                    return;\n                }\n\n                // test if there's still room in the list of files\n                if (!hasRoomForItem(state)) {\n                    // if multiple allowed, we can't replace\n                    // or if only a single item is allowed but we're not allowed to replace it we exit\n                    if (\n                        state.options.allowMultiple ||\n                        (!state.options.allowMultiple && !state.options.allowReplace)\n                    ) {\n                        var error = createResponse('warning', 0, 'Max files');\n\n                        dispatch('DID_THROW_MAX_FILES', {\n                            source: source,\n                            error: error,\n                        });\n\n                        failure({ error: error, file: null });\n\n                        return;\n                    }\n\n                    // let's replace the item\n                    // id of first item we're about to remove\n                    var _item = getActiveItems(state.items)[0];\n\n                    // if has been processed remove it from the server as well\n                    if (\n                        _item.status === ItemStatus.PROCESSING_COMPLETE ||\n                        _item.status === ItemStatus.PROCESSING_REVERT_ERROR\n                    ) {\n                        var forceRevert = query('GET_FORCE_REVERT');\n                        _item\n                            .revert(\n                                createRevertFunction(\n                                    state.options.server.url,\n                                    state.options.server.revert\n                                ),\n                                forceRevert\n                            )\n                            .then(function() {\n                                if (!forceRevert) return;\n\n                                // try to add now\n                                dispatch('ADD_ITEM', {\n                                    source: source,\n                                    index: index,\n                                    interactionMethod: interactionMethod,\n                                    success: success,\n                                    failure: failure,\n                                    options: options,\n                                });\n                            })\n                            .catch(function() {}); // no need to handle this catch state for now\n\n                        if (forceRevert) return;\n                    }\n\n                    // remove first item as it will be replaced by this item\n                    dispatch('REMOVE_ITEM', { query: _item.id });\n                }\n\n                // where did the file originate\n                var origin =\n                    options.type === 'local'\n                        ? FileOrigin.LOCAL\n                        : options.type === 'limbo'\n                        ? FileOrigin.LIMBO\n                        : FileOrigin.INPUT;\n\n                // create a new blank item\n                var item = createItem(\n                    // where did this file come from\n                    origin,\n\n                    // an input file never has a server file reference\n                    origin === FileOrigin.INPUT ? null : source,\n\n                    // file mock data, if defined\n                    options.file\n                );\n\n                // set initial meta data\n                Object.keys(options.metadata || {}).forEach(function(key) {\n                    item.setMetadata(key, options.metadata[key]);\n                });\n\n                // created the item, let plugins add methods\n                applyFilters('DID_CREATE_ITEM', item, { query: query, dispatch: dispatch });\n\n                // where to insert new items\n                var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n                // adjust index if is not allowed to pick location\n                if (!state.options.itemInsertLocationFreedom) {\n                    index = itemInsertLocation === 'before' ? -1 : state.items.length;\n                }\n\n                // add item to list\n                insertItem(state.items, item, index);\n\n                // sort items in list\n                if (isFunction(itemInsertLocation) && source) {\n                    sortItems(state, itemInsertLocation);\n                }\n\n                // get a quick reference to the item id\n                var id = item.id;\n\n                // observe item events\n                item.on('init', function() {\n                    dispatch('DID_INIT_ITEM', { id: id });\n                });\n\n                item.on('load-init', function() {\n                    dispatch('DID_START_ITEM_LOAD', { id: id });\n                });\n\n                item.on('load-meta', function() {\n                    dispatch('DID_UPDATE_ITEM_META', { id: id });\n                });\n\n                item.on('load-progress', function(progress) {\n                    dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', { id: id, progress: progress });\n                });\n\n                item.on('load-request-error', function(error) {\n                    var mainStatus = dynamicLabel(state.options.labelFileLoadError)(error);\n\n                    // is client error, no way to recover\n                    if (error.code >= 400 && error.code < 500) {\n                        dispatch('DID_THROW_ITEM_INVALID', {\n                            id: id,\n                            error: error,\n                            status: {\n                                main: mainStatus,\n                                sub: error.code + ' (' + error.body + ')',\n                            },\n                        });\n\n                        // reject the file so can be dealt with through API\n                        failure({ error: error, file: createItemAPI(item) });\n                        return;\n                    }\n\n                    // is possible server error, so might be possible to retry\n                    dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: mainStatus,\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('load-file-error', function(error) {\n                    dispatch('DID_THROW_ITEM_INVALID', {\n                        id: id,\n                        error: error.status,\n                        status: error.status,\n                    });\n\n                    failure({ error: error.status, file: createItemAPI(item) });\n                });\n\n                item.on('load-abort', function() {\n                    dispatch('REMOVE_ITEM', { query: id });\n                });\n\n                item.on('load-skip', function() {\n                    item.on('metadata-update', function(change) {\n                        if (!isFile(item.file)) return;\n                        dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n                    });\n\n                    dispatch('COMPLETE_LOAD_ITEM', {\n                        query: id,\n                        item: item,\n                        data: {\n                            source: source,\n                            success: success,\n                        },\n                    });\n                });\n\n                item.on('load', function() {\n                    var handleAdd = function handleAdd(shouldAdd) {\n                        // no should not add this file\n                        if (!shouldAdd) {\n                            dispatch('REMOVE_ITEM', {\n                                query: id,\n                            });\n\n                            return;\n                        }\n\n                        // now interested in metadata updates\n                        item.on('metadata-update', function(change) {\n                            dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n                        });\n\n                        // let plugins decide if the output data should be prepared at this point\n                        // means we'll do this and wait for idle state\n                        applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                            item: item,\n                            query: query,\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                            if (beforePrepareFile)\n                                shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                            var loadComplete = function loadComplete() {\n                                dispatch('COMPLETE_LOAD_ITEM', {\n                                    query: id,\n                                    item: item,\n                                    data: {\n                                        source: source,\n                                        success: success,\n                                    },\n                                });\n\n                                listUpdated(dispatch, state);\n                            };\n\n                            // exit\n                            if (shouldPrepareOutput) {\n                                // wait for idle state and then run PREPARE_OUTPUT\n                                dispatch(\n                                    'REQUEST_PREPARE_OUTPUT',\n                                    {\n                                        query: id,\n                                        item: item,\n                                        success: function success(file) {\n                                            dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                                            loadComplete();\n                                        },\n                                    },\n\n                                    true\n                                );\n\n                                return;\n                            }\n\n                            loadComplete();\n                        });\n                    };\n\n                    // item loaded, allow plugins to\n                    // - read data (quickly)\n                    // - add metadata\n                    applyFilterChain('DID_LOAD_ITEM', item, { query: query, dispatch: dispatch })\n                        .then(function() {\n                            optionalPromise(query('GET_BEFORE_ADD_FILE'), createItemAPI(item)).then(\n                                handleAdd\n                            );\n                        })\n                        .catch(function(e) {\n                            if (!e || !e.error || !e.status) return handleAdd(false);\n                            dispatch('DID_THROW_ITEM_INVALID', {\n                                id: id,\n                                error: e.error,\n                                status: e.status,\n                            });\n                        });\n                });\n\n                item.on('process-start', function() {\n                    dispatch('DID_START_ITEM_PROCESSING', { id: id });\n                });\n\n                item.on('process-progress', function(progress) {\n                    dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', { id: id, progress: progress });\n                });\n\n                item.on('process-error', function(error) {\n                    dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingError)(error),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('process-revert-error', function(error) {\n                    dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingRevertError)(error),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('process-complete', function(serverFileReference) {\n                    dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                        id: id,\n                        error: null,\n                        serverFileReference: serverFileReference,\n                    });\n\n                    dispatch('DID_DEFINE_VALUE', { id: id, value: serverFileReference });\n                });\n\n                item.on('process-abort', function() {\n                    dispatch('DID_ABORT_ITEM_PROCESSING', { id: id });\n                });\n\n                item.on('process-revert', function() {\n                    dispatch('DID_REVERT_ITEM_PROCESSING', { id: id });\n                    dispatch('DID_DEFINE_VALUE', { id: id, value: null });\n                });\n\n                // let view know the item has been inserted\n                dispatch('DID_ADD_ITEM', {\n                    id: id,\n                    index: index,\n                    interactionMethod: interactionMethod,\n                });\n\n                listUpdated(dispatch, state);\n\n                // start loading the source\n                var _ref8 = state.options.server || {},\n                    url = _ref8.url,\n                    load = _ref8.load,\n                    restore = _ref8.restore,\n                    fetch = _ref8.fetch;\n\n                item.load(\n                    source,\n\n                    // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n                    createFileLoader(\n                        origin === FileOrigin.INPUT\n                            ? // input, if is remote, see if should use custom fetch, else use default fetchBlob\n                              isString(source) && isExternalURL(source)\n                                ? fetch\n                                    ? createFetchFunction(url, fetch)\n                                    : fetchBlob // remote url\n                                : fetchBlob // try to fetch url\n                            : // limbo or local\n                            origin === FileOrigin.LIMBO\n                            ? createFetchFunction(url, restore) // limbo\n                            : createFetchFunction(url, load) // local\n                    ),\n\n                    // called when the file is loaded so it can be piped through the filters\n                    function(file, success, error) {\n                        // let's process the file\n                        applyFilterChain('LOAD_FILE', file, { query: query })\n                            .then(success)\n                            .catch(error);\n                    }\n                );\n            },\n\n            REQUEST_PREPARE_OUTPUT: function REQUEST_PREPARE_OUTPUT(_ref9) {\n                var item = _ref9.item,\n                    success = _ref9.success,\n                    _ref9$failure = _ref9.failure,\n                    failure = _ref9$failure === void 0 ? function() {} : _ref9$failure;\n                // error response if item archived\n                var err = {\n                    error: createResponse('error', 0, 'Item not found'),\n                    file: null,\n                };\n\n                // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n                if (item.archived) return failure(err);\n\n                // allow plugins to alter the file data\n                applyFilterChain('PREPARE_OUTPUT', item.file, { query: query, item: item }).then(\n                    function(result) {\n                        applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, {\n                            query: query,\n                            item: item,\n                        }).then(function(result) {\n                            // don't handle archived items, an item could have been archived (load aborted) while being prepared\n                            if (item.archived) return failure(err);\n\n                            // we done!\n                            success(result);\n                        });\n                    }\n                );\n            },\n\n            COMPLETE_LOAD_ITEM: function COMPLETE_LOAD_ITEM(_ref10) {\n                var item = _ref10.item,\n                    data = _ref10.data;\n                var success = data.success,\n                    source = data.source;\n\n                // sort items in list\n                var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n                if (isFunction(itemInsertLocation) && source) {\n                    sortItems(state, itemInsertLocation);\n                }\n\n                // let interface know the item has loaded\n                dispatch('DID_LOAD_ITEM', {\n                    id: item.id,\n                    error: null,\n                    serverFileReference: item.origin === FileOrigin.INPUT ? null : source,\n                });\n\n                // item has been successfully loaded and added to the\n                // list of items so can now be safely returned for use\n                success(createItemAPI(item));\n\n                // if this is a local server file we need to show a different state\n                if (item.origin === FileOrigin.LOCAL) {\n                    dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n                    return;\n                }\n\n                // if is a temp server file we prevent async upload call here (as the file is already on the server)\n                if (item.origin === FileOrigin.LIMBO) {\n                    dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                        id: item.id,\n                        error: null,\n                        serverFileReference: source,\n                    });\n\n                    dispatch('DID_DEFINE_VALUE', {\n                        id: item.id,\n                        value: item.serverId || source,\n                    });\n\n                    return;\n                }\n\n                // id we are allowed to upload the file immediately, lets do it\n                if (query('IS_ASYNC') && state.options.instantUpload) {\n                    dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n                }\n            },\n\n            RETRY_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                // try loading the source one more time\n                item.retryLoad();\n            }),\n\n            REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, function(item, _success, failure) {\n                dispatch(\n                    'REQUEST_PREPARE_OUTPUT',\n                    {\n                        query: item.id,\n                        item: item,\n                        success: function success(file) {\n                            dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n                            _success({\n                                file: item,\n                                output: file,\n                            });\n                        },\n                        failure: failure,\n                    },\n\n                    true\n                );\n            }),\n\n            REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n                item,\n                success,\n                failure\n            ) {\n                // cannot be queued (or is already queued)\n                var itemCanBeQueuedForProcessing =\n                    // waiting for something\n                    item.status === ItemStatus.IDLE ||\n                    // processing went wrong earlier\n                    item.status === ItemStatus.PROCESSING_ERROR;\n\n                // not ready to be processed\n                if (!itemCanBeQueuedForProcessing) {\n                    var processNow = function processNow() {\n                        return dispatch('REQUEST_ITEM_PROCESSING', {\n                            query: item,\n                            success: success,\n                            failure: failure,\n                        });\n                    };\n\n                    var process = function process() {\n                        return document.hidden ? processNow() : setTimeout(processNow, 32);\n                    };\n\n                    // if already done processing or tried to revert but didn't work, try again\n                    if (\n                        item.status === ItemStatus.PROCESSING_COMPLETE ||\n                        item.status === ItemStatus.PROCESSING_REVERT_ERROR\n                    ) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        )\n                            .then(process)\n                            .catch(function() {}); // don't continue with processing if something went wrong\n                    } else if (item.status === ItemStatus.PROCESSING) {\n                        item.abortProcessing().then(process);\n                    }\n\n                    return;\n                }\n\n                // already queued for processing\n                if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n                item.requestProcessing();\n\n                dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n                dispatch('PROCESS_ITEM', { query: item, success: success, failure: failure }, true);\n            }),\n\n            PROCESS_ITEM: getItemByQueryFromState(state, function(item, success, failure) {\n                var maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n                var totalCurrentUploads = query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING)\n                    .length;\n\n                // queue and wait till queue is freed up\n                if (totalCurrentUploads === maxParallelUploads) {\n                    // queue for later processing\n                    state.processingQueue.push({\n                        id: item.id,\n                        success: success,\n                        failure: failure,\n                    });\n\n                    // stop it!\n                    return;\n                }\n\n                // if was not queued or is already processing exit here\n                if (item.status === ItemStatus.PROCESSING) return;\n\n                var processNext = function processNext() {\n                    // process queueud items\n                    var queueEntry = state.processingQueue.shift();\n\n                    // no items left\n                    if (!queueEntry) return;\n\n                    // get item reference\n                    var id = queueEntry.id,\n                        success = queueEntry.success,\n                        failure = queueEntry.failure;\n                    var itemReference = getItemByQuery(state.items, id);\n\n                    // if item was archived while in queue, jump to next\n                    if (!itemReference || itemReference.archived) {\n                        processNext();\n                        return;\n                    }\n\n                    // process queued item\n                    dispatch(\n                        'PROCESS_ITEM',\n                        { query: id, success: success, failure: failure },\n                        true\n                    );\n                };\n\n                // we done function\n                item.onOnce('process-complete', function() {\n                    success(createItemAPI(item));\n                    processNext();\n\n                    // if origin is local, and we're instant uploading, trigger remove of original\n                    // as revert will remove file from list\n                    var server = state.options.server;\n                    var instantUpload = state.options.instantUpload;\n                    if (\n                        instantUpload &&\n                        item.origin === FileOrigin.LOCAL &&\n                        isFunction(server.remove)\n                    ) {\n                        var noop = function noop() {};\n                        item.origin = FileOrigin.LIMBO;\n                        state.options.server.remove(item.source, noop, noop);\n                    }\n\n                    // All items processed? No errors?\n                    var allItemsProcessed =\n                        query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE).length ===\n                        state.items.length;\n                    if (allItemsProcessed) {\n                        dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n                    }\n                });\n\n                // we error function\n                item.onOnce('process-error', function(error) {\n                    failure({ error: error, file: createItemAPI(item) });\n                    processNext();\n                });\n\n                // start file processing\n                var options = state.options;\n                item.process(\n                    createFileProcessor(\n                        createProcessorFunction(\n                            options.server.url,\n                            options.server.process,\n                            options.name,\n                            {\n                                chunkTransferId: item.transferId,\n                                chunkServer: options.server.patch,\n                                chunkUploads: options.chunkUploads,\n                                chunkForce: options.chunkForce,\n                                chunkSize: options.chunkSize,\n                                chunkRetryDelays: options.chunkRetryDelays,\n                            }\n                        ),\n\n                        {\n                            allowMinimumUploadDuration: query('GET_ALLOW_MINIMUM_UPLOAD_DURATION'),\n                        }\n                    ),\n\n                    // called when the file is about to be processed so it can be piped through the transform filters\n                    function(file, success, error) {\n                        // allow plugins to alter the file data\n                        applyFilterChain('PREPARE_OUTPUT', file, { query: query, item: item })\n                            .then(function(file) {\n                                dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n\n                                success(file);\n                            })\n                            .catch(error);\n                    }\n                );\n            }),\n\n            RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n            }),\n\n            REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, function(item) {\n                optionalPromise(query('GET_BEFORE_REMOVE_FILE'), createItemAPI(item)).then(function(\n                    shouldRemove\n                ) {\n                    if (!shouldRemove) {\n                        return;\n                    }\n                    dispatch('REMOVE_ITEM', { query: item });\n                });\n            }),\n\n            RELEASE_ITEM: getItemByQueryFromState(state, function(item) {\n                item.release();\n            }),\n\n            REMOVE_ITEM: getItemByQueryFromState(state, function(item, success, failure, options) {\n                var removeFromView = function removeFromView() {\n                    // get id reference\n                    var id = item.id;\n\n                    // archive the item, this does not remove it from the list\n                    getItemById(state.items, id).archive();\n\n                    // tell the view the item has been removed\n                    dispatch('DID_REMOVE_ITEM', { error: null, id: id, item: item });\n\n                    // now the list has been modified\n                    listUpdated(dispatch, state);\n\n                    // correctly removed\n                    success(createItemAPI(item));\n                };\n\n                // if this is a local file and the `server.remove` function has been configured,\n                // send source there so dev can remove file from server\n                var server = state.options.server;\n                if (\n                    item.origin === FileOrigin.LOCAL &&\n                    server &&\n                    isFunction(server.remove) &&\n                    options.remove !== false\n                ) {\n                    dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n                    server.remove(\n                        item.source,\n                        function() {\n                            return removeFromView();\n                        },\n                        function(status) {\n                            dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                                id: item.id,\n                                error: createResponse('error', 0, status, null),\n                                status: {\n                                    main: dynamicLabel(state.options.labelFileRemoveError)(status),\n                                    sub: state.options.labelTapToRetry,\n                                },\n                            });\n                        }\n                    );\n                } else {\n                    // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n                    if (\n                        (options.revert &&\n                            item.origin !== FileOrigin.LOCAL &&\n                            item.serverId !== null) ||\n                        // if chunked uploads are enabled and we're uploading in chunks for this specific file\n                        // or if the file isn't big enough for chunked uploads but chunkForce is set then call\n                        // revert before removing from the view...\n                        (state.options.chunkUploads && item.file.size > state.options.chunkSize) ||\n                        (state.options.chunkUploads && state.options.chunkForce)\n                    ) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        );\n                    }\n\n                    // can now safely remove from view\n                    removeFromView();\n                }\n            }),\n\n            ABORT_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                item.abortLoad();\n            }),\n\n            ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // test if is already processed\n                if (item.serverId) {\n                    dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n                    return;\n                }\n\n                // abort\n                item.abortProcessing().then(function() {\n                    var shouldRemove = state.options.instantUpload;\n                    if (shouldRemove) {\n                        dispatch('REMOVE_ITEM', { query: item.id });\n                    }\n                });\n            }),\n\n            REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // not instant uploading, revert immediately\n                if (!state.options.instantUpload) {\n                    dispatch('REVERT_ITEM_PROCESSING', { query: item });\n                    return;\n                }\n\n                // if we're instant uploading the file will also be removed if we revert,\n                // so if a before remove file hook is defined we need to run it now\n                var handleRevert = function handleRevert(shouldRevert) {\n                    if (!shouldRevert) return;\n                    dispatch('REVERT_ITEM_PROCESSING', { query: item });\n                };\n\n                var fn = query('GET_BEFORE_REMOVE_FILE');\n                if (!fn) {\n                    return handleRevert(true);\n                }\n\n                var requestRemoveResult = fn(createItemAPI(item));\n                if (requestRemoveResult == null) {\n                    // undefined or null\n                    return handleRevert(true);\n                }\n\n                if (typeof requestRemoveResult === 'boolean') {\n                    return handleRevert(requestRemoveResult);\n                }\n\n                if (typeof requestRemoveResult.then === 'function') {\n                    requestRemoveResult.then(handleRevert);\n                }\n            }),\n\n            REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                )\n                    .then(function() {\n                        var shouldRemove = state.options.instantUpload || isMockItem(item);\n                        if (shouldRemove) {\n                            dispatch('REMOVE_ITEM', { query: item.id });\n                        }\n                    })\n                    .catch(function() {});\n            }),\n\n            SET_OPTIONS: function SET_OPTIONS(_ref11) {\n                var options = _ref11.options;\n                // get all keys passed\n                var optionKeys = Object.keys(options);\n\n                // get prioritized keyed to include (remove once not in options object)\n                var prioritizedOptionKeys = PrioritizedOptions.filter(function(key) {\n                    return optionKeys.includes(key);\n                });\n\n                // order the keys, prioritized first, then rest\n                var orderedOptionKeys = [].concat(\n                    _toConsumableArray(prioritizedOptionKeys),\n                    _toConsumableArray(\n                        Object.keys(options).filter(function(key) {\n                            return !prioritizedOptionKeys.includes(key);\n                        })\n                    )\n                );\n\n                // dispatch set event for each option\n                orderedOptionKeys.forEach(function(key) {\n                    dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n                        value: options[key],\n                    });\n                });\n            },\n        };\n    };\n\n    var PrioritizedOptions = ['server'];\n\n    var formatFilename = function formatFilename(name) {\n        return name;\n    };\n\n    var createElement$1 = function createElement(tagName) {\n        return document.createElement(tagName);\n    };\n\n    var text = function text(node, value) {\n        var textNode = node.childNodes[0];\n        if (!textNode) {\n            textNode = document.createTextNode(value);\n            node.appendChild(textNode);\n        } else if (value !== textNode.nodeValue) {\n            textNode.nodeValue = value;\n        }\n    };\n\n    var polarToCartesian = function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\n        var angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n        return {\n            x: centerX + radius * Math.cos(angleInRadians),\n            y: centerY + radius * Math.sin(angleInRadians),\n        };\n    };\n\n    var describeArc = function describeArc(x, y, radius, startAngle, endAngle, arcSweep) {\n        var start = polarToCartesian(x, y, radius, endAngle);\n        var end = polarToCartesian(x, y, radius, startAngle);\n        return ['M', start.x, start.y, 'A', radius, radius, 0, arcSweep, 0, end.x, end.y].join(' ');\n    };\n\n    var percentageArc = function percentageArc(x, y, radius, from, to) {\n        var arcSweep = 1;\n        if (to > from && to - from <= 0.5) {\n            arcSweep = 0;\n        }\n        if (from > to && from - to >= 0.5) {\n            arcSweep = 0;\n        }\n        return describeArc(\n            x,\n            y,\n            radius,\n            Math.min(0.9999, from) * 360,\n            Math.min(0.9999, to) * 360,\n            arcSweep\n        );\n    };\n\n    var create = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // start at 0\n        props.spin = false;\n        props.progress = 0;\n        props.opacity = 0;\n\n        // svg\n        var svg = createElement('svg');\n        root.ref.path = createElement('path', {\n            'stroke-width': 2,\n            'stroke-linecap': 'round',\n        });\n\n        svg.appendChild(root.ref.path);\n\n        root.ref.svg = svg;\n\n        root.appendChild(svg);\n    };\n\n    var write = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        if (props.opacity === 0) {\n            return;\n        }\n\n        if (props.align) {\n            root.element.dataset.align = props.align;\n        }\n\n        // get width of stroke\n        var ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n        // calculate size of ring\n        var size = root.rect.element.width * 0.5;\n\n        // ring state\n        var ringFrom = 0;\n        var ringTo = 0;\n\n        // now in busy mode\n        if (props.spin) {\n            ringFrom = 0;\n            ringTo = 0.5;\n        } else {\n            ringFrom = 0;\n            ringTo = props.progress;\n        }\n\n        // get arc path\n        var coordinates = percentageArc(size, size, size - ringStrokeWidth, ringFrom, ringTo);\n\n        // update progress bar\n        attr(root.ref.path, 'd', coordinates);\n\n        // hide while contains 0 value\n        attr(root.ref.path, 'stroke-opacity', props.spin || props.progress > 0 ? 1 : 0);\n    };\n\n    var progressIndicator = createView({\n        tag: 'div',\n        name: 'progress-indicator',\n        ignoreRectUpdate: true,\n        ignoreRect: true,\n        create: create,\n        write: write,\n        mixins: {\n            apis: ['progress', 'spin', 'align'],\n            styles: ['opacity'],\n            animations: {\n                opacity: { type: 'tween', duration: 500 },\n                progress: {\n                    type: 'spring',\n                    stiffness: 0.95,\n                    damping: 0.65,\n                    mass: 10,\n                },\n            },\n        },\n    });\n\n    var create$1 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.element.innerHTML = (props.icon || '') + ('<span>' + props.label + '</span>');\n\n        props.isDisabled = false;\n    };\n\n    var write$1 = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        var isDisabled = props.isDisabled;\n        var shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n        if (shouldDisable && !isDisabled) {\n            props.isDisabled = true;\n            attr(root.element, 'disabled', 'disabled');\n        } else if (!shouldDisable && isDisabled) {\n            props.isDisabled = false;\n            root.element.removeAttribute('disabled');\n        }\n    };\n\n    var fileActionButton = createView({\n        tag: 'button',\n        attributes: {\n            type: 'button',\n        },\n\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: 'file-action-button',\n        mixins: {\n            apis: ['label'],\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                translateX: 'spring',\n                translateY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n\n            listeners: true,\n        },\n\n        create: create$1,\n        write: write$1,\n    });\n\n    var toNaturalFileSize = function toNaturalFileSize(bytes) {\n        var decimalSeparator =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '.';\n        var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n        var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n        var _options$labelBytes = options.labelBytes,\n            labelBytes = _options$labelBytes === void 0 ? 'bytes' : _options$labelBytes,\n            _options$labelKilobyt = options.labelKilobytes,\n            labelKilobytes = _options$labelKilobyt === void 0 ? 'KB' : _options$labelKilobyt,\n            _options$labelMegabyt = options.labelMegabytes,\n            labelMegabytes = _options$labelMegabyt === void 0 ? 'MB' : _options$labelMegabyt,\n            _options$labelGigabyt = options.labelGigabytes,\n            labelGigabytes = _options$labelGigabyt === void 0 ? 'GB' : _options$labelGigabyt;\n\n        // no negative byte sizes\n        bytes = Math.round(Math.abs(bytes));\n\n        var KB = base;\n        var MB = base * base;\n        var GB = base * base * base;\n\n        // just bytes\n        if (bytes < KB) {\n            return bytes + ' ' + labelBytes;\n        }\n\n        // kilobytes\n        if (bytes < MB) {\n            return Math.floor(bytes / KB) + ' ' + labelKilobytes;\n        }\n\n        // megabytes\n        if (bytes < GB) {\n            return removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator) + ' ' + labelMegabytes;\n        }\n\n        // gigabytes\n        return removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator) + ' ' + labelGigabytes;\n    };\n\n    var removeDecimalsWhenZero = function removeDecimalsWhenZero(value, decimalCount, separator) {\n        return value\n            .toFixed(decimalCount)\n            .split('.')\n            .filter(function(part) {\n                return part !== '0';\n            })\n            .join(separator);\n    };\n\n    var create$2 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // filename\n        var fileName = createElement$1('span');\n        fileName.className = 'filepond--file-info-main';\n        // hide for screenreaders\n        // the file is contained in a fieldset with legend that contains the filename\n        // no need to read it twice\n        attr(fileName, 'aria-hidden', 'true');\n        root.appendChild(fileName);\n        root.ref.fileName = fileName;\n\n        // filesize\n        var fileSize = createElement$1('span');\n        fileSize.className = 'filepond--file-info-sub';\n        root.appendChild(fileSize);\n        root.ref.fileSize = fileSize;\n\n        // set initial values\n        text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n        text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var updateFile = function updateFile(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        text(\n            root.ref.fileSize,\n            toNaturalFileSize(\n                root.query('GET_ITEM_SIZE', props.id),\n                '.',\n                root.query('GET_FILE_SIZE_BASE'),\n                root.query('GET_FILE_SIZE_LABELS', root.query)\n            )\n        );\n\n        text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var updateFileSizeOnError = function updateFileSizeOnError(_ref3) {\n        var root = _ref3.root,\n            props = _ref3.props;\n        // if size is available don't fallback to unknown size message\n        if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n            updateFile({ root: root, props: props });\n            return;\n        }\n\n        text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n    };\n\n    var fileInfo = createView({\n        name: 'file-info',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: updateFile,\n            DID_UPDATE_ITEM_META: updateFile,\n            DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n            DID_THROW_ITEM_INVALID: updateFileSizeOnError,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        create: create$2,\n        mixins: {\n            styles: ['translateX', 'translateY'],\n            animations: {\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var toPercentage = function toPercentage(value) {\n        return Math.round(value * 100);\n    };\n\n    var create$3 = function create(_ref) {\n        var root = _ref.root;\n\n        // main status\n        var main = createElement$1('span');\n        main.className = 'filepond--file-status-main';\n        root.appendChild(main);\n        root.ref.main = main;\n\n        // sub status\n        var sub = createElement$1('span');\n        sub.className = 'filepond--file-status-sub';\n        root.appendChild(sub);\n        root.ref.sub = sub;\n\n        didSetItemLoadProgress({ root: root, action: { progress: null } });\n    };\n\n    var didSetItemLoadProgress = function didSetItemLoadProgress(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        var title =\n            action.progress === null\n                ? root.query('GET_LABEL_FILE_LOADING')\n                : root.query('GET_LABEL_FILE_LOADING') + ' ' + toPercentage(action.progress) + '%';\n\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didSetItemProcessProgress = function didSetItemProcessProgress(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var title =\n            action.progress === null\n                ? root.query('GET_LABEL_FILE_PROCESSING')\n                : root.query('GET_LABEL_FILE_PROCESSING') +\n                  ' ' +\n                  toPercentage(action.progress) +\n                  '%';\n\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didRequestItemProcessing = function didRequestItemProcessing(_ref4) {\n        var root = _ref4.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didAbortItemProcessing = function didAbortItemProcessing(_ref5) {\n        var root = _ref5.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n    };\n\n    var didCompleteItemProcessing = function didCompleteItemProcessing(_ref6) {\n        var root = _ref6.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n    };\n\n    var clear = function clear(_ref7) {\n        var root = _ref7.root;\n        text(root.ref.main, '');\n        text(root.ref.sub, '');\n    };\n\n    var error = function error(_ref8) {\n        var root = _ref8.root,\n            action = _ref8.action;\n        text(root.ref.main, action.status.main);\n        text(root.ref.sub, action.status.sub);\n    };\n\n    var fileStatus = createView({\n        name: 'file-status',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: clear,\n            DID_REVERT_ITEM_PROCESSING: clear,\n            DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n            DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n            DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n            DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n            DID_THROW_ITEM_LOAD_ERROR: error,\n            DID_THROW_ITEM_INVALID: error,\n            DID_THROW_ITEM_PROCESSING_ERROR: error,\n            DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n            DID_THROW_ITEM_REMOVE_ERROR: error,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        create: create$3,\n        mixins: {\n            styles: ['translateX', 'translateY', 'opacity'],\n            animations: {\n                opacity: { type: 'tween', duration: 250 },\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    /**\n     * Button definitions for the file view\n     */\n\n    var Buttons = {\n        AbortItemLoad: {\n            label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n            action: 'ABORT_ITEM_LOAD',\n            className: 'filepond--action-abort-item-load',\n            align: 'LOAD_INDICATOR_POSITION', // right\n        },\n        RetryItemLoad: {\n            label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n            action: 'RETRY_ITEM_LOAD',\n            icon: 'GET_ICON_RETRY',\n            className: 'filepond--action-retry-item-load',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RemoveItem: {\n            label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n            action: 'REQUEST_REMOVE_ITEM',\n            icon: 'GET_ICON_REMOVE',\n            className: 'filepond--action-remove-item',\n            align: 'BUTTON_REMOVE_ITEM_POSITION', // left\n        },\n        ProcessItem: {\n            label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n            action: 'REQUEST_ITEM_PROCESSING',\n            icon: 'GET_ICON_PROCESS',\n            className: 'filepond--action-process-item',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        AbortItemProcessing: {\n            label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n            action: 'ABORT_ITEM_PROCESSING',\n            className: 'filepond--action-abort-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RetryItemProcessing: {\n            label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n            action: 'RETRY_ITEM_PROCESSING',\n            icon: 'GET_ICON_RETRY',\n            className: 'filepond--action-retry-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RevertItemProcessing: {\n            label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n            action: 'REQUEST_REVERT_ITEM_PROCESSING',\n            icon: 'GET_ICON_UNDO',\n            className: 'filepond--action-revert-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n    };\n\n    // make a list of buttons, we can then remove buttons from this list if they're disabled\n    var ButtonKeys = [];\n    forin(Buttons, function(key) {\n        ButtonKeys.push(key);\n    });\n\n    var calculateFileInfoOffset = function calculateFileInfoOffset(root) {\n        if (getRemoveIndicatorAligment(root) === 'right') return 0;\n        var buttonRect = root.ref.buttonRemoveItem.rect.element;\n        return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n    };\n\n    var calculateButtonWidth = function calculateButtonWidth(root) {\n        var buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n        return buttonRect.width;\n    };\n\n    // Force on full pixels so text stays crips\n    var calculateFileVerticalCenterOffset = function calculateFileVerticalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\n    };\n    var calculateFileHorizontalCenterOffset = function calculateFileHorizontalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n    };\n\n    var getLoadIndicatorAlignment = function getLoadIndicatorAlignment(root) {\n        return root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\n    };\n    var getProcessIndicatorAlignment = function getProcessIndicatorAlignment(root) {\n        return root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\n    };\n    var getRemoveIndicatorAligment = function getRemoveIndicatorAligment(root) {\n        return root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n    };\n\n    var DefaultStyle = {\n        buttonAbortItemLoad: { opacity: 0 },\n        buttonRetryItemLoad: { opacity: 0 },\n        buttonRemoveItem: { opacity: 0 },\n        buttonProcessItem: { opacity: 0 },\n        buttonAbortItemProcessing: { opacity: 0 },\n        buttonRetryItemProcessing: { opacity: 0 },\n        buttonRevertItemProcessing: { opacity: 0 },\n        loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n        processProgressIndicator: { opacity: 0, align: getProcessIndicatorAlignment },\n        processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n        info: { translateX: 0, translateY: 0, opacity: 0 },\n        status: { translateX: 0, translateY: 0, opacity: 0 },\n    };\n\n    var IdleStyle = {\n        buttonRemoveItem: { opacity: 1 },\n        buttonProcessItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { translateX: calculateFileInfoOffset },\n    };\n\n    var ProcessingStyle = {\n        buttonAbortItemProcessing: { opacity: 1 },\n        processProgressIndicator: { opacity: 1 },\n        status: { opacity: 1 },\n    };\n\n    var StyleMap = {\n        DID_THROW_ITEM_INVALID: {\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { translateX: calculateFileInfoOffset, opacity: 1 },\n        },\n\n        DID_START_ITEM_LOAD: {\n            buttonAbortItemLoad: { opacity: 1 },\n            loadProgressIndicator: { opacity: 1 },\n            status: { opacity: 1 },\n        },\n\n        DID_THROW_ITEM_LOAD_ERROR: {\n            buttonRetryItemLoad: { opacity: 1 },\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1 },\n        },\n\n        DID_START_ITEM_REMOVE: {\n            processProgressIndicator: { opacity: 1, align: getRemoveIndicatorAligment },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 0 },\n        },\n\n        DID_THROW_ITEM_REMOVE_ERROR: {\n            processProgressIndicator: { opacity: 0, align: getRemoveIndicatorAligment },\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1, translateX: calculateFileInfoOffset },\n        },\n\n        DID_LOAD_ITEM: IdleStyle,\n        DID_LOAD_LOCAL_ITEM: {\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { translateX: calculateFileInfoOffset },\n        },\n\n        DID_START_ITEM_PROCESSING: ProcessingStyle,\n        DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n        DID_COMPLETE_ITEM_PROCESSING: {\n            buttonRevertItemProcessing: { opacity: 1 },\n            info: { opacity: 1 },\n            status: { opacity: 1 },\n        },\n\n        DID_THROW_ITEM_PROCESSING_ERROR: {\n            buttonRemoveItem: { opacity: 1 },\n            buttonRetryItemProcessing: { opacity: 1 },\n            status: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n        },\n\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n            buttonRevertItemProcessing: { opacity: 1 },\n            status: { opacity: 1 },\n            info: { opacity: 1 },\n        },\n\n        DID_ABORT_ITEM_PROCESSING: {\n            buttonRemoveItem: { opacity: 1 },\n            buttonProcessItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1 },\n        },\n\n        DID_REVERT_ITEM_PROCESSING: IdleStyle,\n    };\n\n    // complete indicator view\n    var processingCompleteIndicatorView = createView({\n        create: function create(_ref) {\n            var root = _ref.root;\n            root.element.innerHTML = root.query('GET_ICON_DONE');\n        },\n        name: 'processing-complete-indicator',\n        ignoreRect: true,\n        mixins: {\n            styles: ['scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n        },\n    });\n\n    /**\n     * Creates the file view\n     */\n    var create$4 = function create(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        // copy Buttons object\n        var LocalButtons = Object.keys(Buttons).reduce(function(prev, curr) {\n            prev[curr] = Object.assign({}, Buttons[curr]);\n            return prev;\n        }, {});\n        var id = props.id;\n\n        // allow reverting upload\n        var allowRevert = root.query('GET_ALLOW_REVERT');\n\n        // allow remove file\n        var allowRemove = root.query('GET_ALLOW_REMOVE');\n\n        // allow processing upload\n        var allowProcess = root.query('GET_ALLOW_PROCESS');\n\n        // is instant uploading, need this to determine the icon of the undo button\n        var instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n        // is async set up\n        var isAsync = root.query('IS_ASYNC');\n\n        // should align remove item buttons\n        var alignRemoveItemButton = root.query('GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN');\n\n        // enabled buttons array\n        var buttonFilter;\n        if (isAsync) {\n            if (allowProcess && !allowRevert) {\n                // only remove revert button\n                buttonFilter = function buttonFilter(key) {\n                    return !/RevertItemProcessing/.test(key);\n                };\n            } else if (!allowProcess && allowRevert) {\n                // only remove process button\n                buttonFilter = function buttonFilter(key) {\n                    return !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(key);\n                };\n            } else if (!allowProcess && !allowRevert) {\n                // remove all process buttons\n                buttonFilter = function buttonFilter(key) {\n                    return !/Process/.test(key);\n                };\n            }\n        } else {\n            // no process controls available\n            buttonFilter = function buttonFilter(key) {\n                return !/Process/.test(key);\n            };\n        }\n\n        var enabledButtons = buttonFilter ? ButtonKeys.filter(buttonFilter) : ButtonKeys.concat();\n\n        // update icon and label for revert button when instant uploading\n        if (instantUpload && allowRevert) {\n            LocalButtons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n            LocalButtons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n        }\n\n        // remove last button (revert) if not allowed\n        if (isAsync && !allowRevert) {\n            var map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n            map.info.translateX = calculateFileHorizontalCenterOffset;\n            map.info.translateY = calculateFileVerticalCenterOffset;\n            map.status.translateY = calculateFileVerticalCenterOffset;\n            map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n        }\n\n        // should align center\n        if (isAsync && !allowProcess) {\n            [\n                'DID_START_ITEM_PROCESSING',\n                'DID_REQUEST_ITEM_PROCESSING',\n                'DID_UPDATE_ITEM_PROCESS_PROGRESS',\n                'DID_THROW_ITEM_PROCESSING_ERROR',\n            ].forEach(function(key) {\n                StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n            });\n            StyleMap['DID_THROW_ITEM_PROCESSING_ERROR'].status.translateX = calculateButtonWidth;\n        }\n\n        // move remove button to right\n        if (alignRemoveItemButton && allowRevert) {\n            LocalButtons['RevertItemProcessing'].align = 'BUTTON_REMOVE_ITEM_POSITION';\n            var _map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n            _map.info.translateX = calculateFileInfoOffset;\n            _map.status.translateY = calculateFileVerticalCenterOffset;\n            _map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n        }\n\n        // show/hide RemoveItem button\n        if (!allowRemove) {\n            LocalButtons['RemoveItem'].disabled = true;\n        }\n\n        // create the button views\n        forin(LocalButtons, function(key, definition) {\n            // create button\n            var buttonView = root.createChildView(fileActionButton, {\n                label: root.query(definition.label),\n                icon: root.query(definition.icon),\n                opacity: 0,\n            });\n\n            // should be appended?\n            if (enabledButtons.includes(key)) {\n                root.appendChildView(buttonView);\n            }\n\n            // toggle\n            if (definition.disabled) {\n                buttonView.element.setAttribute('disabled', 'disabled');\n                buttonView.element.setAttribute('hidden', 'hidden');\n            }\n\n            // add position attribute\n            buttonView.element.dataset.align = root.query('GET_STYLE_' + definition.align);\n\n            // add class\n            buttonView.element.classList.add(definition.className);\n\n            // handle interactions\n            buttonView.on('click', function(e) {\n                e.stopPropagation();\n                if (definition.disabled) return;\n                root.dispatch(definition.action, { query: id });\n            });\n\n            // set reference\n            root.ref['button' + key] = buttonView;\n        });\n\n        // checkmark\n        root.ref.processingCompleteIndicator = root.appendChildView(\n            root.createChildView(processingCompleteIndicatorView)\n        );\n\n        root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n            'GET_STYLE_BUTTON_PROCESS_ITEM_POSITION'\n        );\n\n        // create file info view\n        root.ref.info = root.appendChildView(root.createChildView(fileInfo, { id: id }));\n\n        // create file status view\n        root.ref.status = root.appendChildView(root.createChildView(fileStatus, { id: id }));\n\n        // add progress indicators\n        var loadIndicatorView = root.appendChildView(\n            root.createChildView(progressIndicator, {\n                opacity: 0,\n                align: root.query('GET_STYLE_LOAD_INDICATOR_POSITION'),\n            })\n        );\n\n        loadIndicatorView.element.classList.add('filepond--load-indicator');\n        root.ref.loadProgressIndicator = loadIndicatorView;\n\n        var progressIndicatorView = root.appendChildView(\n            root.createChildView(progressIndicator, {\n                opacity: 0,\n                align: root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION'),\n            })\n        );\n\n        progressIndicatorView.element.classList.add('filepond--process-indicator');\n        root.ref.processProgressIndicator = progressIndicatorView;\n\n        // current active styles\n        root.ref.activeStyles = [];\n    };\n\n    var write$2 = function write(_ref3) {\n        var root = _ref3.root,\n            actions = _ref3.actions,\n            props = _ref3.props;\n        // route actions\n        route({ root: root, actions: actions, props: props });\n\n        // select last state change action\n        var action = actions\n            .concat()\n            .filter(function(action) {\n                return /^DID_/.test(action.type);\n            })\n            .reverse()\n            .find(function(action) {\n                return StyleMap[action.type];\n            });\n\n        // a new action happened, let's get the matching styles\n        if (action) {\n            // define new active styles\n            root.ref.activeStyles = [];\n\n            var stylesToApply = StyleMap[action.type];\n            forin(DefaultStyle, function(name, defaultStyles) {\n                // get reference to control\n                var control = root.ref[name];\n\n                // loop over all styles for this control\n                forin(defaultStyles, function(key, defaultValue) {\n                    var value =\n                        stylesToApply[name] && typeof stylesToApply[name][key] !== 'undefined'\n                            ? stylesToApply[name][key]\n                            : defaultValue;\n                    root.ref.activeStyles.push({ control: control, key: key, value: value });\n                });\n            });\n        }\n\n        // apply active styles to element\n        root.ref.activeStyles.forEach(function(_ref4) {\n            var control = _ref4.control,\n                key = _ref4.key,\n                value = _ref4.value;\n            control[key] = typeof value === 'function' ? value(root) : value;\n        });\n    };\n\n    var route = createRoute({\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(\n            _ref5\n        ) {\n            var root = _ref5.root,\n                action = _ref5.action;\n            root.ref.buttonAbortItemProcessing.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(_ref6) {\n            var root = _ref6.root,\n                action = _ref6.action;\n            root.ref.buttonAbortItemLoad.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(\n            _ref7\n        ) {\n            var root = _ref7.root,\n                action = _ref7.action;\n            root.ref.buttonAbortItemRemoval.label = action.value;\n        },\n        DID_REQUEST_ITEM_PROCESSING: function DID_REQUEST_ITEM_PROCESSING(_ref8) {\n            var root = _ref8.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_LOAD: function DID_START_ITEM_LOAD(_ref9) {\n            var root = _ref9.root;\n            root.ref.loadProgressIndicator.spin = true;\n            root.ref.loadProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_REMOVE: function DID_START_ITEM_REMOVE(_ref10) {\n            var root = _ref10.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_UPDATE_ITEM_LOAD_PROGRESS: function DID_UPDATE_ITEM_LOAD_PROGRESS(_ref11) {\n            var root = _ref11.root,\n                action = _ref11.action;\n            root.ref.loadProgressIndicator.spin = false;\n            root.ref.loadProgressIndicator.progress = action.progress;\n        },\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: function DID_UPDATE_ITEM_PROCESS_PROGRESS(_ref12) {\n            var root = _ref12.root,\n                action = _ref12.action;\n            root.ref.processProgressIndicator.spin = false;\n            root.ref.processProgressIndicator.progress = action.progress;\n        },\n    });\n\n    var file = createView({\n        create: create$4,\n        write: write$2,\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        name: 'file',\n    });\n\n    /**\n     * Creates the file view\n     */\n    var create$5 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // filename\n        root.ref.fileName = createElement$1('legend');\n        root.appendChild(root.ref.fileName);\n\n        // file appended\n        root.ref.file = root.appendChildView(root.createChildView(file, { id: props.id }));\n\n        // data has moved to data.js\n        root.ref.data = false;\n    };\n\n    /**\n     * Data storage\n     */\n    var didLoadItem = function didLoadItem(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        // updates the legend of the fieldset so screenreaders can better group buttons\n        text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var fileWrapper = createView({\n        create: create$5,\n        ignoreRect: true,\n        write: createRoute({\n            DID_LOAD_ITEM: didLoadItem,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        tag: 'fieldset',\n        name: 'file-wrapper',\n    });\n\n    var PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\n    var create$6 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        [\n            {\n                name: 'top',\n            },\n\n            {\n                name: 'center',\n                props: {\n                    translateY: null,\n                    scaleY: null,\n                },\n\n                mixins: {\n                    animations: {\n                        scaleY: PANEL_SPRING_PROPS,\n                    },\n\n                    styles: ['translateY', 'scaleY'],\n                },\n            },\n\n            {\n                name: 'bottom',\n                props: {\n                    translateY: null,\n                },\n\n                mixins: {\n                    animations: {\n                        translateY: PANEL_SPRING_PROPS,\n                    },\n\n                    styles: ['translateY'],\n                },\n            },\n        ].forEach(function(section) {\n            createSection(root, section, props.name);\n        });\n\n        root.element.classList.add('filepond--' + props.name);\n\n        root.ref.scalable = null;\n    };\n\n    var createSection = function createSection(root, section, className) {\n        var viewConstructor = createView({\n            name: 'panel-' + section.name + ' filepond--' + className,\n            mixins: section.mixins,\n            ignoreRectUpdate: true,\n        });\n\n        var view = root.createChildView(viewConstructor, section.props);\n\n        root.ref[section.name] = root.appendChildView(view);\n    };\n\n    var write$3 = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n\n        // update scalable state\n        if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n            root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n            root.element.dataset.scalable = root.ref.scalable;\n        }\n\n        // no height, can't set\n        if (!props.height) return;\n\n        // get child rects\n        var topRect = root.ref.top.rect.element;\n        var bottomRect = root.ref.bottom.rect.element;\n\n        // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n        var height = Math.max(topRect.height + bottomRect.height, props.height);\n\n        // offset center part\n        root.ref.center.translateY = topRect.height;\n\n        // scale center part\n        // use math ceil to prevent transparent lines because of rounding errors\n        root.ref.center.scaleY = (height - topRect.height - bottomRect.height) / 100;\n\n        // offset bottom part\n        root.ref.bottom.translateY = height - bottomRect.height;\n    };\n\n    var panel = createView({\n        name: 'panel',\n        read: function read(_ref3) {\n            var root = _ref3.root,\n                props = _ref3.props;\n            return (props.heightCurrent = root.ref.bottom.translateY);\n        },\n        write: write$3,\n        create: create$6,\n        ignoreRect: true,\n        mixins: {\n            apis: ['height', 'heightCurrent', 'scalable'],\n        },\n    });\n\n    var createDragHelper = function createDragHelper(items) {\n        var itemIds = items.map(function(item) {\n            return item.id;\n        });\n        var prevIndex = undefined;\n        return {\n            setIndex: function setIndex(index) {\n                prevIndex = index;\n            },\n            getIndex: function getIndex() {\n                return prevIndex;\n            },\n            getItemIndex: function getItemIndex(item) {\n                return itemIds.indexOf(item.id);\n            },\n        };\n    };\n\n    var ITEM_TRANSLATE_SPRING = {\n        type: 'spring',\n        stiffness: 0.75,\n        damping: 0.45,\n        mass: 10,\n    };\n\n    var ITEM_SCALE_SPRING = 'spring';\n\n    var StateMap = {\n        DID_START_ITEM_LOAD: 'busy',\n        DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n        DID_THROW_ITEM_INVALID: 'load-invalid',\n        DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n        DID_LOAD_ITEM: 'idle',\n        DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n        DID_START_ITEM_REMOVE: 'busy',\n        DID_START_ITEM_PROCESSING: 'busy processing',\n        DID_REQUEST_ITEM_PROCESSING: 'busy processing',\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n        DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n        DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n        DID_ABORT_ITEM_PROCESSING: 'cancelled',\n        DID_REVERT_ITEM_PROCESSING: 'idle',\n    };\n\n    /**\n     * Creates the file view\n     */\n    var create$7 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // select\n        root.ref.handleClick = function(e) {\n            return root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n        };\n\n        // set id\n        root.element.id = 'filepond--item-' + props.id;\n        root.element.addEventListener('click', root.ref.handleClick);\n\n        // file view\n        root.ref.container = root.appendChildView(\n            root.createChildView(fileWrapper, { id: props.id })\n        );\n\n        // file panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'item-panel' }));\n\n        // default start height\n        root.ref.panel.height = null;\n\n        // by default not marked for removal\n        props.markedForRemoval = false;\n\n        // if not allowed to reorder file items, exit here\n        if (!root.query('GET_ALLOW_REORDER')) return;\n\n        // set to idle so shows grab cursor\n        root.element.dataset.dragState = 'idle';\n\n        var grab = function grab(e) {\n            if (!e.isPrimary) return;\n\n            var removedActivateListener = false;\n\n            var origin = {\n                x: e.pageX,\n                y: e.pageY,\n            };\n\n            props.dragOrigin = {\n                x: root.translateX,\n                y: root.translateY,\n            };\n\n            props.dragCenter = {\n                x: e.offsetX,\n                y: e.offsetY,\n            };\n\n            var dragState = createDragHelper(root.query('GET_ACTIVE_ITEMS'));\n\n            root.dispatch('DID_GRAB_ITEM', { id: props.id, dragState: dragState });\n\n            var drag = function drag(e) {\n                if (!e.isPrimary) return;\n\n                e.stopPropagation();\n                e.preventDefault();\n\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y,\n                };\n\n                // if dragged stop listening to clicks, will re-add when done dragging\n                var dist =\n                    props.dragOffset.x * props.dragOffset.x +\n                    props.dragOffset.y * props.dragOffset.y;\n                if (dist > 16 && !removedActivateListener) {\n                    removedActivateListener = true;\n                    root.element.removeEventListener('click', root.ref.handleClick);\n                }\n\n                root.dispatch('DID_DRAG_ITEM', { id: props.id, dragState: dragState });\n            };\n\n            var drop = function drop(e) {\n                if (!e.isPrimary) return;\n\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y,\n                };\n\n                reset();\n            };\n\n            var cancel = function cancel() {\n                reset();\n            };\n\n            var reset = function reset() {\n                document.removeEventListener('pointercancel', cancel);\n                document.removeEventListener('pointermove', drag);\n                document.removeEventListener('pointerup', drop);\n\n                root.dispatch('DID_DROP_ITEM', { id: props.id, dragState: dragState });\n\n                // start listening to clicks again\n                if (removedActivateListener) {\n                    setTimeout(function() {\n                        return root.element.addEventListener('click', root.ref.handleClick);\n                    }, 0);\n                }\n            };\n\n            document.addEventListener('pointercancel', cancel);\n            document.addEventListener('pointermove', drag);\n            document.addEventListener('pointerup', drop);\n        };\n\n        root.element.addEventListener('pointerdown', grab);\n    };\n\n    var route$1 = createRoute({\n        DID_UPDATE_PANEL_HEIGHT: function DID_UPDATE_PANEL_HEIGHT(_ref2) {\n            var root = _ref2.root,\n                action = _ref2.action;\n            root.height = action.height;\n        },\n    });\n\n    var write$4 = createRoute(\n        {\n            DID_GRAB_ITEM: function DID_GRAB_ITEM(_ref3) {\n                var root = _ref3.root,\n                    props = _ref3.props;\n                props.dragOrigin = {\n                    x: root.translateX,\n                    y: root.translateY,\n                };\n            },\n            DID_DRAG_ITEM: function DID_DRAG_ITEM(_ref4) {\n                var root = _ref4.root;\n                root.element.dataset.dragState = 'drag';\n            },\n            DID_DROP_ITEM: function DID_DROP_ITEM(_ref5) {\n                var root = _ref5.root,\n                    props = _ref5.props;\n                props.dragOffset = null;\n                props.dragOrigin = null;\n                root.element.dataset.dragState = 'drop';\n            },\n        },\n\n        function(_ref6) {\n            var root = _ref6.root,\n                actions = _ref6.actions,\n                props = _ref6.props,\n                shouldOptimize = _ref6.shouldOptimize;\n            if (root.element.dataset.dragState === 'drop') {\n                if (root.scaleX <= 1) {\n                    root.element.dataset.dragState = 'idle';\n                }\n            }\n\n            // select last state change action\n            var action = actions\n                .concat()\n                .filter(function(action) {\n                    return /^DID_/.test(action.type);\n                })\n                .reverse()\n                .find(function(action) {\n                    return StateMap[action.type];\n                });\n\n            // no need to set same state twice\n            if (action && action.type !== props.currentState) {\n                // set current state\n                props.currentState = action.type;\n\n                // set state\n                root.element.dataset.filepondItemState = StateMap[props.currentState] || '';\n            }\n\n            // route actions\n            var aspectRatio =\n                root.query('GET_ITEM_PANEL_ASPECT_RATIO') || root.query('GET_PANEL_ASPECT_RATIO');\n            if (!aspectRatio) {\n                route$1({ root: root, actions: actions, props: props });\n                if (!root.height && root.ref.container.rect.element.height > 0) {\n                    root.height = root.ref.container.rect.element.height;\n                }\n            } else if (!shouldOptimize) {\n                root.height = root.rect.element.width * aspectRatio;\n            }\n\n            // sync panel height with item height\n            if (shouldOptimize) {\n                root.ref.panel.height = null;\n            }\n\n            root.ref.panel.height = root.height;\n        }\n    );\n\n    var item = createView({\n        create: create$7,\n        write: write$4,\n        destroy: function destroy(_ref7) {\n            var root = _ref7.root,\n                props = _ref7.props;\n            root.element.removeEventListener('click', root.ref.handleClick);\n            root.dispatch('RELEASE_ITEM', { query: props.id });\n        },\n        tag: 'li',\n        name: 'item',\n        mixins: {\n            apis: [\n                'id',\n                'interactionMethod',\n                'markedForRemoval',\n                'spawnDate',\n                'dragCenter',\n                'dragOrigin',\n                'dragOffset',\n            ],\n\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity', 'height'],\n            animations: {\n                scaleX: ITEM_SCALE_SPRING,\n                scaleY: ITEM_SCALE_SPRING,\n                translateX: ITEM_TRANSLATE_SPRING,\n                translateY: ITEM_TRANSLATE_SPRING,\n                opacity: { type: 'tween', duration: 150 },\n            },\n        },\n    });\n\n    var getItemsPerRow = function(horizontalSpace, itemWidth) {\n        // add one pixel leeway, when using percentages for item width total items can be 1.99 per row\n\n        return Math.max(1, Math.floor((horizontalSpace + 1) / itemWidth));\n    };\n\n    var getItemIndexByPosition = function getItemIndexByPosition(view, children, positionInView) {\n        if (!positionInView) return;\n\n        var horizontalSpace = view.rect.element.width;\n        // const children = view.childViews;\n        var l = children.length;\n        var last = null;\n\n        // -1, don't move items to accomodate (either add to top or bottom)\n        if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n        // let's get the item width\n        var item = children[0];\n        var itemRect = item.rect.element;\n        var itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n        var itemWidth = itemRect.width + itemHorizontalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            for (var index = 0; index < l; index++) {\n                var child = children[index];\n                var childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n                if (positionInView.top < childMid) {\n                    return index;\n                }\n            }\n            return l;\n        }\n\n        // grid\n        var itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n        var itemHeight = itemRect.height + itemVerticalMargin;\n        for (var _index = 0; _index < l; _index++) {\n            var indexX = _index % itemsPerRow;\n            var indexY = Math.floor(_index / itemsPerRow);\n\n            var offsetX = indexX * itemWidth;\n            var offsetY = indexY * itemHeight;\n\n            var itemTop = offsetY - itemRect.marginTop;\n            var itemRight = offsetX + itemWidth;\n            var itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n            if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n                if (positionInView.left < itemRight) {\n                    return _index;\n                } else if (_index !== l - 1) {\n                    last = _index;\n                } else {\n                    last = null;\n                }\n            }\n        }\n\n        if (last !== null) {\n            return last;\n        }\n\n        return l;\n    };\n\n    var dropAreaDimensions = {\n        height: 0,\n        width: 0,\n        get getHeight() {\n            return this.height;\n        },\n        set setHeight(val) {\n            if (this.height === 0 || val === 0) this.height = val;\n        },\n        get getWidth() {\n            return this.width;\n        },\n        set setWidth(val) {\n            if (this.width === 0 || val === 0) this.width = val;\n        },\n        setDimensions: function setDimensions(height, width) {\n            if (this.height === 0 || height === 0) this.height = height;\n            if (this.width === 0 || width === 0) this.width = width;\n        },\n    };\n\n    var create$8 = function create(_ref) {\n        var root = _ref.root;\n        // need to set role to list as otherwise it won't be read as a list by VoiceOver\n        attr(root.element, 'role', 'list');\n\n        root.ref.lastItemSpanwDate = Date.now();\n    };\n\n    /**\n     * Inserts a new item\n     * @param root\n     * @param action\n     */\n    var addItemView = function addItemView(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        var id = action.id,\n            index = action.index,\n            interactionMethod = action.interactionMethod;\n\n        root.ref.addIndex = index;\n\n        var now = Date.now();\n        var spawnDate = now;\n        var opacity = 1;\n\n        if (interactionMethod !== InteractionMethod.NONE) {\n            opacity = 0;\n            var cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n            var dist = now - root.ref.lastItemSpanwDate;\n            spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n        }\n\n        root.ref.lastItemSpanwDate = spawnDate;\n\n        root.appendChildView(\n            root.createChildView(\n                // view type\n                item,\n\n                // props\n                {\n                    spawnDate: spawnDate,\n                    id: id,\n                    opacity: opacity,\n                    interactionMethod: interactionMethod,\n                }\n            ),\n\n            index\n        );\n    };\n\n    var moveItem = function moveItem(item, x, y) {\n        var vx = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        var vy = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n        // set to null to remove animation while dragging\n        if (item.dragOffset) {\n            item.translateX = null;\n            item.translateY = null;\n            item.translateX = item.dragOrigin.x + item.dragOffset.x;\n            item.translateY = item.dragOrigin.y + item.dragOffset.y;\n            item.scaleX = 1.025;\n            item.scaleY = 1.025;\n        } else {\n            item.translateX = x;\n            item.translateY = y;\n\n            if (Date.now() > item.spawnDate) {\n                // reveal element\n                if (item.opacity === 0) {\n                    introItemView(item, x, y, vx, vy);\n                }\n\n                // make sure is default scale every frame\n                item.scaleX = 1;\n                item.scaleY = 1;\n                item.opacity = 1;\n            }\n        }\n    };\n\n    var introItemView = function introItemView(item, x, y, vx, vy) {\n        if (item.interactionMethod === InteractionMethod.NONE) {\n            item.translateX = null;\n            item.translateX = x;\n            item.translateY = null;\n            item.translateY = y;\n        } else if (item.interactionMethod === InteractionMethod.DROP) {\n            item.translateX = null;\n            item.translateX = x - vx * 20;\n\n            item.translateY = null;\n            item.translateY = y - vy * 10;\n\n            item.scaleX = 0.8;\n            item.scaleY = 0.8;\n        } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n            item.translateY = null;\n            item.translateY = y - 30;\n        } else if (item.interactionMethod === InteractionMethod.API) {\n            item.translateX = null;\n            item.translateX = x - 30;\n            item.translateY = null;\n        }\n    };\n\n    /**\n     * Removes an existing item\n     * @param root\n     * @param action\n     */\n    var removeItemView = function removeItemView(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var id = action.id;\n\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n\n        // if no view found, exit\n        if (!view) {\n            return;\n        }\n\n        // animate view out of view\n        view.scaleX = 0.9;\n        view.scaleY = 0.9;\n        view.opacity = 0;\n\n        // mark for removal\n        view.markedForRemoval = true;\n    };\n\n    var getItemHeight = function getItemHeight(child) {\n        return (\n            child.rect.element.height +\n            child.rect.element.marginBottom * 0.5 +\n            child.rect.element.marginTop * 0.5\n        );\n    };\n    var getItemWidth = function getItemWidth(child) {\n        return (\n            child.rect.element.width +\n            child.rect.element.marginLeft * 0.5 +\n            child.rect.element.marginRight * 0.5\n        );\n    };\n\n    var dragItem = function dragItem(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        var id = action.id,\n            dragState = action.dragState;\n\n        // reference to item\n        var item = root.query('GET_ITEM', { id: id });\n\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n\n        var numItems = root.childViews.length;\n        var oldIndex = dragState.getItemIndex(item);\n\n        // if no view found, exit\n        if (!view) return;\n\n        var dragPosition = {\n            x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n            y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y,\n        };\n\n        // get drag area dimensions\n        var dragHeight = getItemHeight(view);\n        var dragWidth = getItemWidth(view);\n\n        // get rows and columns (There will always be at least one row and one column if a file is present)\n        var cols = Math.floor(root.rect.outer.width / dragWidth);\n        if (cols > numItems) cols = numItems;\n\n        // rows are used to find when we have left the preview area bounding box\n        var rows = Math.floor(numItems / cols + 1);\n\n        dropAreaDimensions.setHeight = dragHeight * rows;\n        dropAreaDimensions.setWidth = dragWidth * cols;\n\n        // get new index of dragged item\n        var location = {\n            y: Math.floor(dragPosition.y / dragHeight),\n            x: Math.floor(dragPosition.x / dragWidth),\n            getGridIndex: function getGridIndex() {\n                if (\n                    dragPosition.y > dropAreaDimensions.getHeight ||\n                    dragPosition.y < 0 ||\n                    dragPosition.x > dropAreaDimensions.getWidth ||\n                    dragPosition.x < 0\n                )\n                    return oldIndex;\n                return this.y * cols + this.x;\n            },\n            getColIndex: function getColIndex() {\n                var items = root.query('GET_ACTIVE_ITEMS');\n                var visibleChildren = root.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = items.map(function(item) {\n                    return visibleChildren.find(function(childView) {\n                        return childView.id === item.id;\n                    });\n                });\n\n                var currentIndex = children.findIndex(function(child) {\n                    return child === view;\n                });\n                var dragHeight = getItemHeight(view);\n                var l = children.length;\n                var idx = l;\n                var childHeight = 0;\n                var childBottom = 0;\n                var childTop = 0;\n                for (var i = 0; i < l; i++) {\n                    childHeight = getItemHeight(children[i]);\n                    childTop = childBottom;\n                    childBottom = childTop + childHeight;\n                    if (dragPosition.y < childBottom) {\n                        if (currentIndex > i) {\n                            if (dragPosition.y < childTop + dragHeight) {\n                                idx = i;\n                                break;\n                            }\n                            continue;\n                        }\n                        idx = i;\n                        break;\n                    }\n                }\n                return idx;\n            },\n        };\n\n        // get new index\n        var index = cols > 1 ? location.getGridIndex() : location.getColIndex();\n        root.dispatch('MOVE_ITEM', { query: view, index: index });\n\n        // if the index of the item changed, dispatch reorder action\n        var currentIndex = dragState.getIndex();\n\n        if (currentIndex === undefined || currentIndex !== index) {\n            dragState.setIndex(index);\n\n            if (currentIndex === undefined) return;\n\n            root.dispatch('DID_REORDER_ITEMS', {\n                items: root.query('GET_ACTIVE_ITEMS'),\n                origin: oldIndex,\n                target: index,\n            });\n        }\n    };\n\n    /**\n     * Setup action routes\n     */\n    var route$2 = createRoute({\n        DID_ADD_ITEM: addItemView,\n        DID_REMOVE_ITEM: removeItemView,\n        DID_DRAG_ITEM: dragItem,\n    });\n\n    /**\n     * Write to view\n     * @param root\n     * @param actions\n     * @param props\n     */\n    var write$5 = function write(_ref5) {\n        var root = _ref5.root,\n            props = _ref5.props,\n            actions = _ref5.actions,\n            shouldOptimize = _ref5.shouldOptimize;\n        // route actions\n        route$2({ root: root, props: props, actions: actions });\n        var dragCoordinates = props.dragCoordinates;\n\n        // available space on horizontal axis\n        var horizontalSpace = root.rect.element.width;\n\n        // only draw children that have dimensions\n        var visibleChildren = root.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n\n        // sort based on current active items\n        var children = root\n            .query('GET_ACTIVE_ITEMS')\n            .map(function(item) {\n                return visibleChildren.find(function(child) {\n                    return child.id === item.id;\n                });\n            })\n            .filter(function(item) {\n                return item;\n            });\n\n        // get index\n        var dragIndex = dragCoordinates\n            ? getItemIndexByPosition(root, children, dragCoordinates)\n            : null;\n\n        // add index is used to reserve the dropped/added item index till the actual item is rendered\n        var addIndex = root.ref.addIndex || null;\n\n        // add index no longer needed till possibly next draw\n        root.ref.addIndex = null;\n\n        var dragIndexOffset = 0;\n        var removeIndexOffset = 0;\n        var addIndexOffset = 0;\n\n        if (children.length === 0) return;\n\n        var childRect = children[0].rect.element;\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            var offsetY = 0;\n            var dragOffset = 0;\n\n            children.forEach(function(child, index) {\n                if (dragIndex) {\n                    var dist = index - dragIndex;\n                    if (dist === -2) {\n                        dragOffset = -itemVerticalMargin * 0.25;\n                    } else if (dist === -1) {\n                        dragOffset = -itemVerticalMargin * 0.75;\n                    } else if (dist === 0) {\n                        dragOffset = itemVerticalMargin * 0.75;\n                    } else if (dist === 1) {\n                        dragOffset = itemVerticalMargin * 0.25;\n                    } else {\n                        dragOffset = 0;\n                    }\n                }\n\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n\n                if (!child.markedForRemoval) {\n                    moveItem(child, 0, offsetY + dragOffset);\n                }\n\n                var itemHeight = child.rect.element.height + itemVerticalMargin;\n\n                var visualHeight = itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n                offsetY += visualHeight;\n            });\n        }\n        // grid\n        else {\n            var prevX = 0;\n            var prevY = 0;\n\n            children.forEach(function(child, index) {\n                if (index === dragIndex) {\n                    dragIndexOffset = 1;\n                }\n\n                if (index === addIndex) {\n                    addIndexOffset += 1;\n                }\n\n                if (child.markedForRemoval && child.opacity < 0.5) {\n                    removeIndexOffset -= 1;\n                }\n\n                var visualIndex = index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n                var indexX = visualIndex % itemsPerRow;\n                var indexY = Math.floor(visualIndex / itemsPerRow);\n\n                var offsetX = indexX * itemWidth;\n                var offsetY = indexY * itemHeight;\n\n                var vectorX = Math.sign(offsetX - prevX);\n                var vectorY = Math.sign(offsetY - prevY);\n\n                prevX = offsetX;\n                prevY = offsetY;\n\n                if (child.markedForRemoval) return;\n\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n\n                moveItem(child, offsetX, offsetY, vectorX, vectorY);\n            });\n        }\n    };\n\n    /**\n     * Filters actions that are meant specifically for a certain child of the list\n     * @param child\n     * @param actions\n     */\n    var filterSetItemActions = function filterSetItemActions(child, actions) {\n        return actions.filter(function(action) {\n            // if action has an id, filter out actions that don't have this child id\n            if (action.data && action.data.id) {\n                return child.id === action.data.id;\n            }\n\n            // allow all other actions\n            return true;\n        });\n    };\n\n    var list = createView({\n        create: create$8,\n        write: write$5,\n        tag: 'ul',\n        name: 'list',\n        didWriteView: function didWriteView(_ref6) {\n            var root = _ref6.root;\n            root.childViews\n                .filter(function(view) {\n                    return view.markedForRemoval && view.opacity === 0 && view.resting;\n                })\n                .forEach(function(view) {\n                    view._destroy();\n                    root.removeChildView(view);\n                });\n        },\n        filterFrameActionsForChild: filterSetItemActions,\n        mixins: {\n            apis: ['dragCoordinates'],\n        },\n    });\n\n    var create$9 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.ref.list = root.appendChildView(root.createChildView(list));\n        props.dragCoordinates = null;\n        props.overflowing = false;\n    };\n\n    var storeDragCoordinates = function storeDragCoordinates(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props,\n            action = _ref2.action;\n        if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n        props.dragCoordinates = {\n            left: action.position.scopeLeft - root.ref.list.rect.element.left,\n            top:\n                action.position.scopeTop -\n                (root.rect.outer.top + root.rect.element.marginTop + root.rect.element.scrollTop),\n        };\n    };\n\n    var clearDragCoordinates = function clearDragCoordinates(_ref3) {\n        var props = _ref3.props;\n        props.dragCoordinates = null;\n    };\n\n    var route$3 = createRoute({\n        DID_DRAG: storeDragCoordinates,\n        DID_END_DRAG: clearDragCoordinates,\n    });\n\n    var write$6 = function write(_ref4) {\n        var root = _ref4.root,\n            props = _ref4.props,\n            actions = _ref4.actions;\n\n        // route actions\n        route$3({ root: root, props: props, actions: actions });\n\n        // current drag position\n        root.ref.list.dragCoordinates = props.dragCoordinates;\n\n        // if currently overflowing but no longer received overflow\n        if (props.overflowing && !props.overflow) {\n            props.overflowing = false;\n\n            // reset overflow state\n            root.element.dataset.state = '';\n            root.height = null;\n        }\n\n        // if is not overflowing currently but does receive overflow value\n        if (props.overflow) {\n            var newHeight = Math.round(props.overflow);\n            if (newHeight !== root.height) {\n                props.overflowing = true;\n                root.element.dataset.state = 'overflow';\n                root.height = newHeight;\n            }\n        }\n    };\n\n    var listScroller = createView({\n        create: create$9,\n        write: write$6,\n        name: 'list-scroller',\n        mixins: {\n            apis: ['overflow', 'dragCoordinates'],\n            styles: ['height', 'translateY'],\n            animations: {\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var attrToggle = function attrToggle(element, name, state) {\n        var enabledValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n        if (state) {\n            attr(element, name, enabledValue);\n        } else {\n            element.removeAttribute(name);\n        }\n    };\n\n    var resetFileInput = function resetFileInput(input) {\n        // no value, no need to reset\n        if (!input || input.value === '') {\n            return;\n        }\n\n        try {\n            // for modern browsers\n            input.value = '';\n        } catch (err) {}\n\n        // for IE10\n        if (input.value) {\n            // quickly append input to temp form and reset form\n            var form = createElement$1('form');\n            var parentNode = input.parentNode;\n            var ref = input.nextSibling;\n            form.appendChild(input);\n            form.reset();\n\n            // re-inject input where it originally was\n            if (ref) {\n                parentNode.insertBefore(input, ref);\n            } else {\n                parentNode.appendChild(input);\n            }\n        }\n    };\n\n    var create$a = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // set id so can be referenced from outside labels\n        root.element.id = 'filepond--browser-' + props.id;\n\n        // set name of element (is removed when a value is set)\n        attr(root.element, 'name', root.query('GET_NAME'));\n\n        // we have to link this element to the status element\n        attr(root.element, 'aria-controls', 'filepond--assistant-' + props.id);\n\n        // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n        attr(root.element, 'aria-labelledby', 'filepond--drop-label-' + props.id);\n\n        // set configurable props\n        setAcceptedFileTypes({\n            root: root,\n            action: { value: root.query('GET_ACCEPTED_FILE_TYPES') },\n        });\n        toggleAllowMultiple({ root: root, action: { value: root.query('GET_ALLOW_MULTIPLE') } });\n        toggleDirectoryFilter({\n            root: root,\n            action: { value: root.query('GET_ALLOW_DIRECTORIES_ONLY') },\n        });\n        toggleDisabled({ root: root });\n        toggleRequired({ root: root, action: { value: root.query('GET_REQUIRED') } });\n        setCaptureMethod({ root: root, action: { value: root.query('GET_CAPTURE_METHOD') } });\n\n        // handle changes to the input field\n        root.ref.handleChange = function(e) {\n            if (!root.element.value) {\n                return;\n            }\n\n            // extract files and move value of webkitRelativePath path to _relativePath\n            var files = Array.from(root.element.files).map(function(file) {\n                file._relativePath = file.webkitRelativePath;\n                return file;\n            });\n\n            // we add a little delay so the OS file select window can move out of the way before we add our file\n            setTimeout(function() {\n                // load files\n                props.onload(files);\n\n                // reset input, it's just for exposing a method to drop files, should not retain any state\n                resetFileInput(root.element);\n            }, 250);\n        };\n\n        root.element.addEventListener('change', root.ref.handleChange);\n    };\n\n    var setAcceptedFileTypes = function setAcceptedFileTypes(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE')) return;\n        attrToggle(\n            root.element,\n            'accept',\n            !!action.value,\n            action.value ? action.value.join(',') : ''\n        );\n    };\n\n    var toggleAllowMultiple = function toggleAllowMultiple(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        attrToggle(root.element, 'multiple', action.value);\n    };\n\n    var toggleDirectoryFilter = function toggleDirectoryFilter(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        attrToggle(root.element, 'webkitdirectory', action.value);\n    };\n\n    var toggleDisabled = function toggleDisabled(_ref5) {\n        var root = _ref5.root;\n        var isDisabled = root.query('GET_DISABLED');\n        var doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n        var disableField = isDisabled || !doesAllowBrowse;\n        attrToggle(root.element, 'disabled', disableField);\n    };\n\n    var toggleRequired = function toggleRequired(_ref6) {\n        var root = _ref6.root,\n            action = _ref6.action;\n        // want to remove required, always possible\n        if (!action.value) {\n            attrToggle(root.element, 'required', false);\n        }\n        // if want to make required, only possible when zero items\n        else if (root.query('GET_TOTAL_ITEMS') === 0) {\n            attrToggle(root.element, 'required', true);\n        }\n    };\n\n    var setCaptureMethod = function setCaptureMethod(_ref7) {\n        var root = _ref7.root,\n            action = _ref7.action;\n        attrToggle(\n            root.element,\n            'capture',\n            !!action.value,\n            action.value === true ? '' : action.value\n        );\n    };\n\n    var updateRequiredStatus = function updateRequiredStatus(_ref8) {\n        var root = _ref8.root;\n        var element = root.element;\n        // always remove the required attribute when more than zero items\n        if (root.query('GET_TOTAL_ITEMS') > 0) {\n            attrToggle(element, 'required', false);\n            attrToggle(element, 'name', false);\n\n            // still has items\n            var activeItems = root.query('GET_ACTIVE_ITEMS');\n            var hasInvalidField = false;\n            for (var i = 0; i < activeItems.length; i++) {\n                if (activeItems[i].status === ItemStatus.LOAD_ERROR) {\n                    hasInvalidField = true;\n                }\n            }\n            // set validity status\n            root.element.setCustomValidity(\n                hasInvalidField ? root.query('GET_LABEL_INVALID_FIELD') : ''\n            );\n        } else {\n            // add name attribute\n            attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n            // remove any validation messages\n            var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n            if (shouldCheckValidity) {\n                element.setCustomValidity('');\n            }\n\n            // we only add required if the field has been deemed required\n            if (root.query('GET_REQUIRED')) {\n                attrToggle(element, 'required', true);\n            }\n        }\n    };\n\n    var updateFieldValidityStatus = function updateFieldValidityStatus(_ref9) {\n        var root = _ref9.root;\n        var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n        if (!shouldCheckValidity) return;\n        root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n    };\n\n    var browser = createView({\n        tag: 'input',\n        name: 'browser',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        attributes: {\n            type: 'file',\n        },\n\n        create: create$a,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            root.element.removeEventListener('change', root.ref.handleChange);\n        },\n        write: createRoute({\n            DID_LOAD_ITEM: updateRequiredStatus,\n            DID_REMOVE_ITEM: updateRequiredStatus,\n            DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n            DID_SET_DISABLED: toggleDisabled,\n            DID_SET_ALLOW_BROWSE: toggleDisabled,\n            DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n            DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n            DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n            DID_SET_CAPTURE_METHOD: setCaptureMethod,\n            DID_SET_REQUIRED: toggleRequired,\n        }),\n    });\n\n    var Key = {\n        ENTER: 13,\n        SPACE: 32,\n    };\n\n    var create$b = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // create the label and link it to the file browser\n        var label = createElement$1('label');\n        attr(label, 'for', 'filepond--browser-' + props.id);\n\n        // use for labeling file input (aria-labelledby on file input)\n        attr(label, 'id', 'filepond--drop-label-' + props.id);\n\n        // handle keys\n        root.ref.handleKeyDown = function(e) {\n            var isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n            if (!isActivationKey) return;\n            // stops from triggering the element a second time\n            e.preventDefault();\n\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n\n        root.ref.handleClick = function(e) {\n            var isLabelClick = e.target === label || label.contains(e.target);\n\n            // don't want to click twice\n            if (isLabelClick) return;\n\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n\n        // attach events\n        label.addEventListener('keydown', root.ref.handleKeyDown);\n        root.element.addEventListener('click', root.ref.handleClick);\n\n        // update\n        updateLabelValue(label, props.caption);\n\n        // add!\n        root.appendChild(label);\n        root.ref.label = label;\n    };\n\n    var updateLabelValue = function updateLabelValue(label, value) {\n        label.innerHTML = value;\n        var clickable = label.querySelector('.filepond--label-action');\n        if (clickable) {\n            attr(clickable, 'tabindex', '0');\n        }\n        return value;\n    };\n\n    var dropLabel = createView({\n        name: 'drop-label',\n        ignoreRect: true,\n        create: create$b,\n        destroy: function destroy(_ref2) {\n            var root = _ref2.root;\n            root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n            root.element.removeEventListener('click', root.ref.handleClick);\n        },\n        write: createRoute({\n            DID_SET_LABEL_IDLE: function DID_SET_LABEL_IDLE(_ref3) {\n                var root = _ref3.root,\n                    action = _ref3.action;\n                updateLabelValue(root.ref.label, action.value);\n            },\n        }),\n\n        mixins: {\n            styles: ['opacity', 'translateX', 'translateY'],\n            animations: {\n                opacity: { type: 'tween', duration: 150 },\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var blob = createView({\n        name: 'drip-blob',\n        ignoreRect: true,\n        mixins: {\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                translateX: 'spring',\n                translateY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n        },\n    });\n\n    var addBlob = function addBlob(_ref) {\n        var root = _ref.root;\n        var centerX = root.rect.element.width * 0.5;\n        var centerY = root.rect.element.height * 0.5;\n\n        root.ref.blob = root.appendChildView(\n            root.createChildView(blob, {\n                opacity: 0,\n                scaleX: 2.5,\n                scaleY: 2.5,\n                translateX: centerX,\n                translateY: centerY,\n            })\n        );\n    };\n\n    var moveBlob = function moveBlob(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!root.ref.blob) {\n            addBlob({ root: root });\n            return;\n        }\n\n        root.ref.blob.translateX = action.position.scopeLeft;\n        root.ref.blob.translateY = action.position.scopeTop;\n        root.ref.blob.scaleX = 1;\n        root.ref.blob.scaleY = 1;\n        root.ref.blob.opacity = 1;\n    };\n\n    var hideBlob = function hideBlob(_ref3) {\n        var root = _ref3.root;\n        if (!root.ref.blob) {\n            return;\n        }\n        root.ref.blob.opacity = 0;\n    };\n\n    var explodeBlob = function explodeBlob(_ref4) {\n        var root = _ref4.root;\n        if (!root.ref.blob) {\n            return;\n        }\n        root.ref.blob.scaleX = 2.5;\n        root.ref.blob.scaleY = 2.5;\n        root.ref.blob.opacity = 0;\n    };\n\n    var write$7 = function write(_ref5) {\n        var root = _ref5.root,\n            props = _ref5.props,\n            actions = _ref5.actions;\n        route$4({ root: root, props: props, actions: actions });\n        var blob = root.ref.blob;\n\n        if (actions.length === 0 && blob && blob.opacity === 0) {\n            root.removeChildView(blob);\n            root.ref.blob = null;\n        }\n    };\n\n    var route$4 = createRoute({\n        DID_DRAG: moveBlob,\n        DID_DROP: explodeBlob,\n        DID_END_DRAG: hideBlob,\n    });\n\n    var drip = createView({\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: 'drip',\n        write: write$7,\n    });\n\n    var setInputFiles = function setInputFiles(element, files) {\n        try {\n            // Create a DataTransfer instance and add a newly created file\n            var dataTransfer = new DataTransfer();\n            files.forEach(function(file) {\n                if (file instanceof File) {\n                    dataTransfer.items.add(file);\n                } else {\n                    dataTransfer.items.add(\n                        new File([file], file.name, {\n                            type: file.type,\n                        })\n                    );\n                }\n            });\n\n            // Assign the DataTransfer files list to the file input\n            element.files = dataTransfer.files;\n        } catch (err) {\n            return false;\n        }\n        return true;\n    };\n\n    var create$c = function create(_ref) {\n        var root = _ref.root;\n        root.ref.fields = {};\n        var legend = document.createElement('legend');\n        legend.textContent = 'Files';\n        root.element.appendChild(legend);\n    };\n\n    var getField = function getField(root, id) {\n        return root.ref.fields[id];\n    };\n\n    var syncFieldPositionsWithItems = function syncFieldPositionsWithItems(root) {\n        root.query('GET_ACTIVE_ITEMS').forEach(function(item) {\n            if (!root.ref.fields[item.id]) return;\n            root.element.appendChild(root.ref.fields[item.id]);\n        });\n    };\n\n    var didReorderItems = function didReorderItems(_ref2) {\n        var root = _ref2.root;\n        return syncFieldPositionsWithItems(root);\n    };\n\n    var didAddItem = function didAddItem(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var fileItem = root.query('GET_ITEM', action.id);\n        var isLocalFile = fileItem.origin === FileOrigin.LOCAL;\n        var shouldUseFileInput = !isLocalFile && root.query('SHOULD_UPDATE_FILE_INPUT');\n        var dataContainer = createElement$1('input');\n        dataContainer.type = shouldUseFileInput ? 'file' : 'hidden';\n        dataContainer.name = root.query('GET_NAME');\n        root.ref.fields[action.id] = dataContainer;\n        syncFieldPositionsWithItems(root);\n    };\n\n    var didLoadItem$1 = function didLoadItem(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n\n        // store server ref in hidden input\n        if (action.serverFileReference !== null) field.value = action.serverFileReference;\n\n        // store file item in file input\n        if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n\n        var fileItem = root.query('GET_ITEM', action.id);\n        setInputFiles(field, [fileItem.file]);\n    };\n\n    var didPrepareOutput = function didPrepareOutput(_ref5) {\n        var root = _ref5.root,\n            action = _ref5.action;\n        // this timeout pushes the handler after 'load'\n        if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n        setTimeout(function() {\n            var field = getField(root, action.id);\n            if (!field) return;\n            setInputFiles(field, [action.file]);\n        }, 0);\n    };\n\n    var didSetDisabled = function didSetDisabled(_ref6) {\n        var root = _ref6.root;\n        root.element.disabled = root.query('GET_DISABLED');\n    };\n\n    var didRemoveItem = function didRemoveItem(_ref7) {\n        var root = _ref7.root,\n            action = _ref7.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (field.parentNode) field.parentNode.removeChild(field);\n        delete root.ref.fields[action.id];\n    };\n\n    // only runs for server files. will refuse to update the value if the field\n    // is a file field\n    var didDefineValue = function didDefineValue(_ref8) {\n        var root = _ref8.root,\n            action = _ref8.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (action.value === null) {\n            // clear field value\n            field.removeAttribute('value');\n        } else {\n            // set field value\n            if (field.type != 'file') {\n                field.value = action.value;\n            }\n        }\n        syncFieldPositionsWithItems(root);\n    };\n\n    var write$8 = createRoute({\n        DID_SET_DISABLED: didSetDisabled,\n        DID_ADD_ITEM: didAddItem,\n        DID_LOAD_ITEM: didLoadItem$1,\n        DID_REMOVE_ITEM: didRemoveItem,\n        DID_DEFINE_VALUE: didDefineValue,\n        DID_PREPARE_OUTPUT: didPrepareOutput,\n        DID_REORDER_ITEMS: didReorderItems,\n        DID_SORT_ITEMS: didReorderItems,\n    });\n\n    var data = createView({\n        tag: 'fieldset',\n        name: 'data',\n        create: create$c,\n        write: write$8,\n        ignoreRect: true,\n    });\n\n    var getRootNode = function getRootNode(element) {\n        return 'getRootNode' in element ? element.getRootNode() : document;\n    };\n\n    var images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\n    var text$1 = ['css', 'csv', 'html', 'txt'];\n    var map = {\n        zip: 'zip|compressed',\n        epub: 'application/epub+zip',\n    };\n\n    var guesstimateMimeType = function guesstimateMimeType() {\n        var extension = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        extension = extension.toLowerCase();\n        if (images.includes(extension)) {\n            return (\n                'image/' +\n                (extension === 'jpg' ? 'jpeg' : extension === 'svg' ? 'svg+xml' : extension)\n            );\n        }\n        if (text$1.includes(extension)) {\n            return 'text/' + extension;\n        }\n\n        return map[extension] || '';\n    };\n\n    var requestDataTransferItems = function requestDataTransferItems(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // try to get links from transfer, if found we'll exit immediately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n            var links = getLinks(dataTransfer);\n            if (links.length && !hasFiles(dataTransfer)) {\n                return resolve(links);\n            }\n            // try to get files from the transfer\n            getFiles(dataTransfer).then(resolve);\n        });\n    };\n\n    /**\n     * Test if datatransfer has files\n     */\n    var hasFiles = function hasFiles(dataTransfer) {\n        if (dataTransfer.files) return dataTransfer.files.length > 0;\n        return false;\n    };\n\n    /**\n     * Extracts files from a DataTransfer object\n     */\n    var getFiles = function getFiles(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // get the transfer items as promises\n            var promisedFiles = (dataTransfer.items ? Array.from(dataTransfer.items) : [])\n                // only keep file system items (files and directories)\n                .filter(function(item) {\n                    return isFileSystemItem(item);\n                })\n\n                // map each item to promise\n                .map(function(item) {\n                    return getFilesFromItem(item);\n                });\n\n            // if is empty, see if we can extract some info from the files property as a fallback\n            if (!promisedFiles.length) {\n                // TODO: test for directories (should not be allowed)\n                // Use FileReader, problem is that the files property gets lost in the process\n                resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n                return;\n            }\n\n            // done!\n            Promise.all(promisedFiles)\n                .then(function(returnedFileGroups) {\n                    // flatten groups\n                    var files = [];\n                    returnedFileGroups.forEach(function(group) {\n                        files.push.apply(files, group);\n                    });\n\n                    // done (filter out empty files)!\n                    resolve(\n                        files\n                            .filter(function(file) {\n                                return file;\n                            })\n                            .map(function(file) {\n                                if (!file._relativePath)\n                                    file._relativePath = file.webkitRelativePath;\n                                return file;\n                            })\n                    );\n                })\n                .catch(console.error);\n        });\n    };\n\n    var isFileSystemItem = function isFileSystemItem(item) {\n        if (isEntry(item)) {\n            var entry = getAsEntry(item);\n            if (entry) {\n                return entry.isFile || entry.isDirectory;\n            }\n        }\n        return item.kind === 'file';\n    };\n\n    var getFilesFromItem = function getFilesFromItem(item) {\n        return new Promise(function(resolve, reject) {\n            if (isDirectoryEntry(item)) {\n                getFilesInDirectory(getAsEntry(item))\n                    .then(resolve)\n                    .catch(reject);\n                return;\n            }\n\n            resolve([item.getAsFile()]);\n        });\n    };\n\n    var getFilesInDirectory = function getFilesInDirectory(entry) {\n        return new Promise(function(resolve, reject) {\n            var files = [];\n\n            // the total entries to read\n            var dirCounter = 0;\n            var fileCounter = 0;\n\n            var resolveIfDone = function resolveIfDone() {\n                if (fileCounter === 0 && dirCounter === 0) {\n                    resolve(files);\n                }\n            };\n\n            // the recursive function\n            var readEntries = function readEntries(dirEntry) {\n                dirCounter++;\n\n                var directoryReader = dirEntry.createReader();\n\n                // directories are returned in batches, we need to process all batches before we're done\n                var readBatch = function readBatch() {\n                    directoryReader.readEntries(function(entries) {\n                        if (entries.length === 0) {\n                            dirCounter--;\n                            resolveIfDone();\n                            return;\n                        }\n\n                        entries.forEach(function(entry) {\n                            // recursively read more directories\n                            if (entry.isDirectory) {\n                                readEntries(entry);\n                            } else {\n                                // read as file\n                                fileCounter++;\n\n                                entry.file(function(file) {\n                                    var correctedFile = correctMissingFileType(file);\n                                    if (entry.fullPath)\n                                        correctedFile._relativePath = entry.fullPath;\n                                    files.push(correctedFile);\n                                    fileCounter--;\n                                    resolveIfDone();\n                                });\n                            }\n                        });\n\n                        // try to get next batch of files\n                        readBatch();\n                    }, reject);\n                };\n\n                // read first batch of files\n                readBatch();\n            };\n\n            // go!\n            readEntries(entry);\n        });\n    };\n\n    var correctMissingFileType = function correctMissingFileType(file) {\n        if (file.type.length) return file;\n        var date = file.lastModifiedDate;\n        var name = file.name;\n        var type = guesstimateMimeType(getExtensionFromFilename(file.name));\n        if (!type.length) return file;\n        file = file.slice(0, file.size, type);\n        file.name = name;\n        file.lastModifiedDate = date;\n        return file;\n    };\n\n    var isDirectoryEntry = function isDirectoryEntry(item) {\n        return isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n    };\n\n    var isEntry = function isEntry(item) {\n        return 'webkitGetAsEntry' in item;\n    };\n\n    var getAsEntry = function getAsEntry(item) {\n        return item.webkitGetAsEntry();\n    };\n\n    /**\n     * Extracts links from a DataTransfer object\n     */\n    var getLinks = function getLinks(dataTransfer) {\n        var links = [];\n        try {\n            // look in meta data property\n            links = getLinksFromTransferMetaData(dataTransfer);\n            if (links.length) {\n                return links;\n            }\n            links = getLinksFromTransferURLData(dataTransfer);\n        } catch (e) {\n            // nope nope nope (probably IE trouble)\n        }\n        return links;\n    };\n\n    var getLinksFromTransferURLData = function getLinksFromTransferURLData(dataTransfer) {\n        var data = dataTransfer.getData('url');\n        if (typeof data === 'string' && data.length) {\n            return [data];\n        }\n        return [];\n    };\n\n    var getLinksFromTransferMetaData = function getLinksFromTransferMetaData(dataTransfer) {\n        var data = dataTransfer.getData('text/html');\n        if (typeof data === 'string' && data.length) {\n            var matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n            if (matches) {\n                return [matches[1]];\n            }\n        }\n        return [];\n    };\n\n    var dragNDropObservers = [];\n\n    var eventPosition = function eventPosition(e) {\n        return {\n            pageLeft: e.pageX,\n            pageTop: e.pageY,\n            scopeLeft: e.offsetX || e.layerX,\n            scopeTop: e.offsetY || e.layerY,\n        };\n    };\n\n    var createDragNDropClient = function createDragNDropClient(\n        element,\n        scopeToObserve,\n        filterElement\n    ) {\n        var observer = getDragNDropObserver(scopeToObserve);\n\n        var client = {\n            element: element,\n            filterElement: filterElement,\n            state: null,\n            ondrop: function ondrop() {},\n            onenter: function onenter() {},\n            ondrag: function ondrag() {},\n            onexit: function onexit() {},\n            onload: function onload() {},\n            allowdrop: function allowdrop() {},\n        };\n\n        client.destroy = observer.addListener(client);\n\n        return client;\n    };\n\n    var getDragNDropObserver = function getDragNDropObserver(element) {\n        // see if already exists, if so, return\n        var observer = dragNDropObservers.find(function(item) {\n            return item.element === element;\n        });\n        if (observer) {\n            return observer;\n        }\n\n        // create new observer, does not yet exist for this element\n        var newObserver = createDragNDropObserver(element);\n        dragNDropObservers.push(newObserver);\n        return newObserver;\n    };\n\n    var createDragNDropObserver = function createDragNDropObserver(element) {\n        var clients = [];\n\n        var routes = {\n            dragenter: dragenter,\n            dragover: dragover,\n            dragleave: dragleave,\n            drop: drop,\n        };\n\n        var handlers = {};\n\n        forin(routes, function(event, createHandler) {\n            handlers[event] = createHandler(element, clients);\n            element.addEventListener(event, handlers[event], false);\n        });\n\n        var observer = {\n            element: element,\n            addListener: function addListener(client) {\n                // add as client\n                clients.push(client);\n\n                // return removeListener function\n                return function() {\n                    // remove client\n                    clients.splice(clients.indexOf(client), 1);\n\n                    // if no more clients, clean up observer\n                    if (clients.length === 0) {\n                        dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n                        forin(routes, function(event) {\n                            element.removeEventListener(event, handlers[event], false);\n                        });\n                    }\n                };\n            },\n        };\n\n        return observer;\n    };\n\n    var elementFromPoint = function elementFromPoint(root, point) {\n        if (!('elementFromPoint' in root)) {\n            root = document;\n        }\n        return root.elementFromPoint(point.x, point.y);\n    };\n\n    var isEventTarget = function isEventTarget(e, target) {\n        // get root\n        var root = getRootNode(target);\n\n        // get element at position\n        // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n        var elementAtPosition = elementFromPoint(root, {\n            x: e.pageX - window.pageXOffset,\n            y: e.pageY - window.pageYOffset,\n        });\n\n        // test if target is the element or if one of its children is\n        return elementAtPosition === target || target.contains(elementAtPosition);\n    };\n\n    var initialTarget = null;\n\n    var setDropEffect = function setDropEffect(dataTransfer, effect) {\n        // is in try catch as IE11 will throw error if not\n        try {\n            dataTransfer.dropEffect = effect;\n        } catch (e) {}\n    };\n\n    var dragenter = function dragenter(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            initialTarget = e.target;\n\n            clients.forEach(function(client) {\n                var element = client.element,\n                    onenter = client.onenter;\n\n                if (isEventTarget(e, element)) {\n                    client.state = 'enter';\n\n                    // fire enter event\n                    onenter(eventPosition(e));\n                }\n            });\n        };\n    };\n\n    var dragover = function dragover(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            var dataTransfer = e.dataTransfer;\n\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                var overDropTarget = false;\n\n                clients.some(function(client) {\n                    var filterElement = client.filterElement,\n                        element = client.element,\n                        onenter = client.onenter,\n                        onexit = client.onexit,\n                        ondrag = client.ondrag,\n                        allowdrop = client.allowdrop;\n\n                    // by default we can drop\n                    setDropEffect(dataTransfer, 'copy');\n\n                    // allow transfer of these items\n                    var allowsTransfer = allowdrop(items);\n\n                    // only used when can be dropped on page\n                    if (!allowsTransfer) {\n                        setDropEffect(dataTransfer, 'none');\n                        return;\n                    }\n\n                    // targetting this client\n                    if (isEventTarget(e, element)) {\n                        overDropTarget = true;\n\n                        // had no previous state, means we are entering this client\n                        if (client.state === null) {\n                            client.state = 'enter';\n                            onenter(eventPosition(e));\n                            return;\n                        }\n\n                        // now over element (no matter if it allows the drop or not)\n                        client.state = 'over';\n\n                        // needs to allow transfer\n                        if (filterElement && !allowsTransfer) {\n                            setDropEffect(dataTransfer, 'none');\n                            return;\n                        }\n\n                        // dragging\n                        ondrag(eventPosition(e));\n                    } else {\n                        // should be over an element to drop\n                        if (filterElement && !overDropTarget) {\n                            setDropEffect(dataTransfer, 'none');\n                        }\n\n                        // might have just left this client?\n                        if (client.state) {\n                            client.state = null;\n                            onexit(eventPosition(e));\n                        }\n                    }\n                });\n            });\n        };\n    };\n\n    var drop = function drop(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            var dataTransfer = e.dataTransfer;\n\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                clients.forEach(function(client) {\n                    var filterElement = client.filterElement,\n                        element = client.element,\n                        ondrop = client.ondrop,\n                        onexit = client.onexit,\n                        allowdrop = client.allowdrop;\n\n                    client.state = null;\n\n                    // if we're filtering on element we need to be over the element to drop\n                    if (filterElement && !isEventTarget(e, element)) return;\n\n                    // no transfer for this client\n                    if (!allowdrop(items)) return onexit(eventPosition(e));\n\n                    // we can drop these items on this client\n                    ondrop(eventPosition(e), items);\n                });\n            });\n        };\n    };\n\n    var dragleave = function dragleave(root, clients) {\n        return function(e) {\n            if (initialTarget !== e.target) {\n                return;\n            }\n\n            clients.forEach(function(client) {\n                var onexit = client.onexit;\n\n                client.state = null;\n\n                onexit(eventPosition(e));\n            });\n        };\n    };\n\n    var createHopper = function createHopper(scope, validateItems, options) {\n        // is now hopper scope\n        scope.classList.add('filepond--hopper');\n\n        // shortcuts\n        var catchesDropsOnPage = options.catchesDropsOnPage,\n            requiresDropOnElement = options.requiresDropOnElement,\n            _options$filterItems = options.filterItems,\n            filterItems =\n                _options$filterItems === void 0\n                    ? function(items) {\n                          return items;\n                      }\n                    : _options$filterItems;\n\n        // create a dnd client\n        var client = createDragNDropClient(\n            scope,\n            catchesDropsOnPage ? document.documentElement : scope,\n            requiresDropOnElement\n        );\n\n        // current client state\n        var lastState = '';\n        var currentState = '';\n\n        // determines if a file may be dropped\n        client.allowdrop = function(items) {\n            // TODO: if we can, throw error to indicate the items cannot by dropped\n\n            return validateItems(filterItems(items));\n        };\n\n        client.ondrop = function(position, items) {\n            var filteredItems = filterItems(items);\n\n            if (!validateItems(filteredItems)) {\n                api.ondragend(position);\n                return;\n            }\n\n            currentState = 'drag-drop';\n\n            api.onload(filteredItems, position);\n        };\n\n        client.ondrag = function(position) {\n            api.ondrag(position);\n        };\n\n        client.onenter = function(position) {\n            currentState = 'drag-over';\n\n            api.ondragstart(position);\n        };\n\n        client.onexit = function(position) {\n            currentState = 'drag-exit';\n\n            api.ondragend(position);\n        };\n\n        var api = {\n            updateHopperState: function updateHopperState() {\n                if (lastState !== currentState) {\n                    scope.dataset.hopperState = currentState;\n                    lastState = currentState;\n                }\n            },\n            onload: function onload() {},\n            ondragstart: function ondragstart() {},\n            ondrag: function ondrag() {},\n            ondragend: function ondragend() {},\n            destroy: function destroy() {\n                // destroy client\n                client.destroy();\n            },\n        };\n\n        return api;\n    };\n\n    var listening = false;\n    var listeners$1 = [];\n\n    var handlePaste = function handlePaste(e) {\n        // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n        var activeEl = document.activeElement;\n        var isActiveElementEditable =\n            activeEl &&\n            (/textarea|input/i.test(activeEl.nodeName) ||\n                activeEl.getAttribute('contenteditable') === 'true');\n\n        if (isActiveElementEditable) {\n            // test textarea or input is contained in filepond root\n            var inScope = false;\n            var element = activeEl;\n            while (element !== document.body) {\n                if (element.classList.contains('filepond--root')) {\n                    inScope = true;\n                    break;\n                }\n                element = element.parentNode;\n            }\n\n            if (!inScope) return;\n        }\n\n        requestDataTransferItems(e.clipboardData).then(function(files) {\n            // no files received\n            if (!files.length) {\n                return;\n            }\n\n            // notify listeners of received files\n            listeners$1.forEach(function(listener) {\n                return listener(files);\n            });\n        });\n    };\n\n    var listen = function listen(cb) {\n        // can't add twice\n        if (listeners$1.includes(cb)) {\n            return;\n        }\n\n        // add initial listener\n        listeners$1.push(cb);\n\n        // setup paste listener for entire page\n        if (listening) {\n            return;\n        }\n\n        listening = true;\n        document.addEventListener('paste', handlePaste);\n    };\n\n    var unlisten = function unlisten(listener) {\n        arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n        // clean up\n        if (listeners$1.length === 0) {\n            document.removeEventListener('paste', handlePaste);\n            listening = false;\n        }\n    };\n\n    var createPaster = function createPaster() {\n        var cb = function cb(files) {\n            api.onload(files);\n        };\n\n        var api = {\n            destroy: function destroy() {\n                unlisten(cb);\n            },\n            onload: function onload() {},\n        };\n\n        listen(cb);\n\n        return api;\n    };\n\n    /**\n     * Creates the file view\n     */\n    var create$d = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.element.id = 'filepond--assistant-' + props.id;\n        attr(root.element, 'role', 'alert');\n        attr(root.element, 'aria-live', 'polite');\n        attr(root.element, 'aria-relevant', 'additions');\n    };\n\n    var addFilesNotificationTimeout = null;\n    var notificationClearTimeout = null;\n\n    var filenames = [];\n\n    var assist = function assist(root, message) {\n        root.element.textContent = message;\n    };\n\n    var clear$1 = function clear(root) {\n        root.element.textContent = '';\n    };\n\n    var listModified = function listModified(root, filename, label) {\n        var total = root.query('GET_TOTAL_ITEMS');\n        assist(\n            root,\n            label +\n                ' ' +\n                filename +\n                ', ' +\n                total +\n                ' ' +\n                (total === 1\n                    ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n                    : root.query('GET_LABEL_FILE_COUNT_PLURAL'))\n        );\n\n        // clear group after set amount of time so the status is not read twice\n        clearTimeout(notificationClearTimeout);\n        notificationClearTimeout = setTimeout(function() {\n            clear$1(root);\n        }, 1500);\n    };\n\n    var isUsingFilePond = function isUsingFilePond(root) {\n        return root.element.parentNode.contains(document.activeElement);\n    };\n\n    var itemAdded = function itemAdded(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!isUsingFilePond(root)) {\n            return;\n        }\n\n        root.element.textContent = '';\n        var item = root.query('GET_ITEM', action.id);\n        filenames.push(item.filename);\n\n        clearTimeout(addFilesNotificationTimeout);\n        addFilesNotificationTimeout = setTimeout(function() {\n            listModified(root, filenames.join(', '), root.query('GET_LABEL_FILE_ADDED'));\n            filenames.length = 0;\n        }, 750);\n    };\n\n    var itemRemoved = function itemRemoved(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        if (!isUsingFilePond(root)) {\n            return;\n        }\n\n        var item = action.item;\n        listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n    };\n\n    var itemProcessed = function itemProcessed(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n        var label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n        assist(root, filename + ' ' + label);\n    };\n\n    var itemProcessedUndo = function itemProcessedUndo(_ref5) {\n        var root = _ref5.root,\n            action = _ref5.action;\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n        var label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n        assist(root, filename + ' ' + label);\n    };\n\n    var itemError = function itemError(_ref6) {\n        var root = _ref6.root,\n            action = _ref6.action;\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n        assist(root, action.status.main + ' ' + filename + ' ' + action.status.sub);\n    };\n\n    var assistant = createView({\n        create: create$d,\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: itemAdded,\n            DID_REMOVE_ITEM: itemRemoved,\n            DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n            DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n            DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n            DID_THROW_ITEM_REMOVE_ERROR: itemError,\n            DID_THROW_ITEM_LOAD_ERROR: itemError,\n            DID_THROW_ITEM_INVALID: itemError,\n            DID_THROW_ITEM_PROCESSING_ERROR: itemError,\n        }),\n\n        tag: 'span',\n        name: 'assistant',\n    });\n\n    var toCamels = function toCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n        return string.replace(new RegExp(separator + '.', 'g'), function(sub) {\n            return sub.charAt(1).toUpperCase();\n        });\n    };\n\n    var debounce = function debounce(func) {\n        var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n        var immidiateOnly =\n            arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var last = Date.now();\n        var timeout = null;\n\n        return function() {\n            for (\n                var _len = arguments.length, args = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                args[_key] = arguments[_key];\n            }\n            clearTimeout(timeout);\n\n            var dist = Date.now() - last;\n\n            var fn = function fn() {\n                last = Date.now();\n                func.apply(void 0, args);\n            };\n\n            if (dist < interval) {\n                // we need to delay by the difference between interval and dist\n                // for example: if distance is 10 ms and interval is 16 ms,\n                // we need to wait an additional 6ms before calling the function)\n                if (!immidiateOnly) {\n                    timeout = setTimeout(fn, interval - dist);\n                }\n            } else {\n                // go!\n                fn();\n            }\n        };\n    };\n\n    var MAX_FILES_LIMIT = 1000000;\n\n    var prevent = function prevent(e) {\n        return e.preventDefault();\n    };\n\n    var create$e = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // Add id\n        var id = root.query('GET_ID');\n        if (id) {\n            root.element.id = id;\n        }\n\n        // Add className\n        var className = root.query('GET_CLASS_NAME');\n        if (className) {\n            className\n                .split(' ')\n                .filter(function(name) {\n                    return name.length;\n                })\n                .forEach(function(name) {\n                    root.element.classList.add(name);\n                });\n        }\n\n        // Field label\n        root.ref.label = root.appendChildView(\n            root.createChildView(\n                dropLabel,\n                Object.assign({}, props, {\n                    translateY: null,\n                    caption: root.query('GET_LABEL_IDLE'),\n                })\n            )\n        );\n\n        // List of items\n        root.ref.list = root.appendChildView(\n            root.createChildView(listScroller, { translateY: null })\n        );\n\n        // Background panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'panel-root' }));\n\n        // Assistant notifies assistive tech when content changes\n        root.ref.assistant = root.appendChildView(\n            root.createChildView(assistant, Object.assign({}, props))\n        );\n\n        // Data\n        root.ref.data = root.appendChildView(root.createChildView(data, Object.assign({}, props)));\n\n        // Measure (tests if fixed height was set)\n        // DOCTYPE needs to be set for this to work\n        root.ref.measure = createElement$1('div');\n        root.ref.measure.style.height = '100%';\n        root.element.appendChild(root.ref.measure);\n\n        // information on the root height or fixed height status\n        root.ref.bounds = null;\n\n        // apply initial style properties\n        root.query('GET_STYLES')\n            .filter(function(style) {\n                return !isEmpty(style.value);\n            })\n            .map(function(_ref2) {\n                var name = _ref2.name,\n                    value = _ref2.value;\n                root.element.dataset[name] = value;\n            });\n\n        // determine if width changed\n        root.ref.widthPrevious = null;\n        root.ref.widthUpdated = debounce(function() {\n            root.ref.updateHistory = [];\n            root.dispatch('DID_RESIZE_ROOT');\n        }, 250);\n\n        // history of updates\n        root.ref.previousAspectRatio = null;\n        root.ref.updateHistory = [];\n\n        // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n        var canHover = window.matchMedia('(pointer: fine) and (hover: hover)').matches;\n        var hasPointerEvents = 'PointerEvent' in window;\n        if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n            root.element.addEventListener('touchmove', prevent, { passive: false });\n            root.element.addEventListener('gesturestart', prevent);\n        }\n\n        // add credits\n        var credits = root.query('GET_CREDITS');\n        var hasCredits = credits.length === 2;\n        if (hasCredits) {\n            var frag = document.createElement('a');\n            frag.className = 'filepond--credits';\n            frag.href = credits[0];\n            frag.tabIndex = -1;\n            frag.target = '_blank';\n            frag.rel = 'noopener noreferrer nofollow';\n            frag.textContent = credits[1];\n            root.element.appendChild(frag);\n            root.ref.credits = frag;\n        }\n    };\n\n    var write$9 = function write(_ref3) {\n        var root = _ref3.root,\n            props = _ref3.props,\n            actions = _ref3.actions;\n        // route actions\n        route$5({ root: root, props: props, actions: actions });\n\n        // apply style properties\n        actions\n            .filter(function(action) {\n                return /^DID_SET_STYLE_/.test(action.type);\n            })\n            .filter(function(action) {\n                return !isEmpty(action.data.value);\n            })\n            .map(function(_ref4) {\n                var type = _ref4.type,\n                    data = _ref4.data;\n                var name = toCamels(type.substring(8).toLowerCase(), '_');\n                root.element.dataset[name] = data.value;\n                root.invalidateLayout();\n            });\n\n        if (root.rect.element.hidden) return;\n\n        if (root.rect.element.width !== root.ref.widthPrevious) {\n            root.ref.widthPrevious = root.rect.element.width;\n            root.ref.widthUpdated();\n        }\n\n        // get box bounds, we do this only once\n        var bounds = root.ref.bounds;\n        if (!bounds) {\n            bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n            // destroy measure element\n            root.element.removeChild(root.ref.measure);\n            root.ref.measure = null;\n        }\n\n        // get quick references to various high level parts of the upload tool\n        var _root$ref = root.ref,\n            hopper = _root$ref.hopper,\n            label = _root$ref.label,\n            list = _root$ref.list,\n            panel = _root$ref.panel;\n\n        // sets correct state to hopper scope\n        if (hopper) {\n            hopper.updateHopperState();\n        }\n\n        // bool to indicate if we're full or not\n        var aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n        var totalItems = root.query('GET_TOTAL_ITEMS');\n        var maxItems = isMultiItem ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT : 1;\n        var atMaxCapacity = totalItems === maxItems;\n\n        // action used to add item\n        var addAction = actions.find(function(action) {\n            return action.type === 'DID_ADD_ITEM';\n        });\n\n        // if reached max capacity and we've just reached it\n        if (atMaxCapacity && addAction) {\n            // get interaction type\n            var interactionMethod = addAction.data.interactionMethod;\n\n            // hide label\n            label.opacity = 0;\n\n            if (isMultiItem) {\n                label.translateY = -40;\n            } else {\n                if (interactionMethod === InteractionMethod.API) {\n                    label.translateX = 40;\n                } else if (interactionMethod === InteractionMethod.BROWSE) {\n                    label.translateY = 40;\n                } else {\n                    label.translateY = 30;\n                }\n            }\n        } else if (!atMaxCapacity) {\n            label.opacity = 1;\n            label.translateX = 0;\n            label.translateY = 0;\n        }\n\n        var listItemMargin = calculateListItemMargin(root);\n\n        var listHeight = calculateListHeight(root);\n\n        var labelHeight = label.rect.element.height;\n        var currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n        var listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n        var listMarginBottom = totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n        var visualHeight =\n            currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n        var boundsHeight =\n            currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n        // link list to label bottom position\n        list.translateY =\n            Math.max(0, currentLabelHeight - list.rect.element.marginTop) - listItemMargin.top;\n\n        if (aspectRatio) {\n            // fixed aspect ratio\n\n            // calculate height based on width\n            var width = root.rect.element.width;\n            var height = width * aspectRatio;\n\n            // clear history if aspect ratio has changed\n            if (aspectRatio !== root.ref.previousAspectRatio) {\n                root.ref.previousAspectRatio = aspectRatio;\n                root.ref.updateHistory = [];\n            }\n\n            // remember this width\n            var history = root.ref.updateHistory;\n            history.push(width);\n\n            var MAX_BOUNCES = 2;\n            if (history.length > MAX_BOUNCES * 2) {\n                var l = history.length;\n                var bottom = l - 10;\n                var bounces = 0;\n                for (var i = l; i >= bottom; i--) {\n                    if (history[i] === history[i - 2]) {\n                        bounces++;\n                    }\n\n                    if (bounces >= MAX_BOUNCES) {\n                        // dont adjust height\n                        return;\n                    }\n                }\n            }\n\n            // fix height of panel so it adheres to aspect ratio\n            panel.scalable = false;\n            panel.height = height;\n\n            // available height for list\n            var listAvailableHeight =\n                // the height of the panel minus the label height\n                height -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            if (listHeight.visual > listAvailableHeight) {\n                list.overflow = listAvailableHeight;\n            } else {\n                list.overflow = null;\n            }\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = height;\n        } else if (bounds.fixedHeight) {\n            // fixed height\n\n            // fix height of panel\n            panel.scalable = false;\n\n            // available height for list\n            var _listAvailableHeight =\n                // the height of the panel minus the label height\n                bounds.fixedHeight -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            // set list height\n            if (listHeight.visual > _listAvailableHeight) {\n                list.overflow = _listAvailableHeight;\n            } else {\n                list.overflow = null;\n            }\n\n            // no need to set container bounds as these are handles by CSS fixed height\n        } else if (bounds.cappedHeight) {\n            // max-height\n\n            // not a fixed height panel\n            var isCappedHeight = visualHeight >= bounds.cappedHeight;\n            var panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n            panel.scalable = true;\n            panel.height = isCappedHeight\n                ? panelHeight\n                : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n            // available height for list\n            var _listAvailableHeight2 =\n                // the height of the panel minus the label height\n                panelHeight -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            // set list height (if is overflowing)\n            if (visualHeight > bounds.cappedHeight && listHeight.visual > _listAvailableHeight2) {\n                list.overflow = _listAvailableHeight2;\n            } else {\n                list.overflow = null;\n            }\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.min(\n                bounds.cappedHeight,\n                boundsHeight - listItemMargin.top - listItemMargin.bottom\n            );\n        } else {\n            // flexible height\n\n            // not a fixed height panel\n            var itemMargin = totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n            panel.scalable = true;\n            panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n        }\n\n        // move credits to bottom\n        if (root.ref.credits && panel.heightCurrent)\n            root.ref.credits.style.transform = 'translateY(' + panel.heightCurrent + 'px)';\n    };\n\n    var calculateListItemMargin = function calculateListItemMargin(root) {\n        var item = root.ref.list.childViews[0].childViews[0];\n        return item\n            ? {\n                  top: item.rect.element.marginTop,\n                  bottom: item.rect.element.marginBottom,\n              }\n            : {\n                  top: 0,\n                  bottom: 0,\n              };\n    };\n\n    var calculateListHeight = function calculateListHeight(root) {\n        var visual = 0;\n        var bounds = 0;\n\n        // get file list reference\n        var scrollList = root.ref.list;\n        var itemList = scrollList.childViews[0];\n        var visibleChildren = itemList.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n        var children = root\n            .query('GET_ACTIVE_ITEMS')\n            .map(function(item) {\n                return visibleChildren.find(function(child) {\n                    return child.id === item.id;\n                });\n            })\n            .filter(function(item) {\n                return item;\n            });\n\n        // no children, done!\n        if (children.length === 0) return { visual: visual, bounds: bounds };\n\n        var horizontalSpace = itemList.rect.element.width;\n        var dragIndex = getItemIndexByPosition(itemList, children, scrollList.dragCoordinates);\n\n        var childRect = children[0].rect.element;\n\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n\n        var newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n        var removedItem = children.find(function(child) {\n            return child.markedForRemoval && child.opacity < 0.45;\n        })\n            ? -1\n            : 0;\n        var verticalItemCount = children.length + newItem + removedItem;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            children.forEach(function(item) {\n                var height = item.rect.element.height + itemVerticalMargin;\n                bounds += height;\n                visual += height * item.opacity;\n            });\n        }\n        // grid\n        else {\n            bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n            visual = bounds;\n        }\n\n        return { visual: visual, bounds: bounds };\n    };\n\n    var calculateRootBoundingBoxHeight = function calculateRootBoundingBoxHeight(root) {\n        var height = root.ref.measureHeight || null;\n        var cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n        var fixedHeight = height === 0 ? null : height;\n\n        return {\n            cappedHeight: cappedHeight,\n            fixedHeight: fixedHeight,\n        };\n    };\n\n    var exceedsMaxFiles = function exceedsMaxFiles(root, items) {\n        var allowReplace = root.query('GET_ALLOW_REPLACE');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n        var totalItems = root.query('GET_TOTAL_ITEMS');\n        var maxItems = root.query('GET_MAX_FILES');\n\n        // total amount of items being dragged\n        var totalBrowseItems = items.length;\n\n        // if does not allow multiple items and dragging more than one item\n        if (!allowMultiple && totalBrowseItems > 1) {\n            root.dispatch('DID_THROW_MAX_FILES', {\n                source: items,\n                error: createResponse('warning', 0, 'Max files'),\n            });\n\n            return true;\n        }\n\n        // limit max items to one if not allowed to drop multiple items\n        maxItems = allowMultiple ? maxItems : 1;\n\n        if (!allowMultiple && allowReplace) {\n            // There is only one item, so there is room to replace or add an item\n            return false;\n        }\n\n        // no more room?\n        var hasMaxItems = isInt(maxItems);\n        if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n            root.dispatch('DID_THROW_MAX_FILES', {\n                source: items,\n                error: createResponse('warning', 0, 'Max files'),\n            });\n\n            return true;\n        }\n\n        return false;\n    };\n\n    var getDragIndex = function getDragIndex(list, children, position) {\n        var itemList = list.childViews[0];\n        return getItemIndexByPosition(itemList, children, {\n            left: position.scopeLeft - itemList.rect.element.left,\n            top:\n                position.scopeTop -\n                (list.rect.outer.top + list.rect.element.marginTop + list.rect.element.scrollTop),\n        });\n    };\n\n    /**\n     * Enable or disable file drop functionality\n     */\n    var toggleDrop = function toggleDrop(root) {\n        var isAllowed = root.query('GET_ALLOW_DROP');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.hopper) {\n            var hopper = createHopper(\n                root.element,\n                function(items) {\n                    // allow quick validation of dropped items\n                    var beforeDropFile =\n                        root.query('GET_BEFORE_DROP_FILE') ||\n                        function() {\n                            return true;\n                        };\n\n                    // all items should be validated by all filters as valid\n                    var dropValidation = root.query('GET_DROP_VALIDATION');\n                    return dropValidation\n                        ? items.every(function(item) {\n                              return (\n                                  applyFilters('ALLOW_HOPPER_ITEM', item, {\n                                      query: root.query,\n                                  }).every(function(result) {\n                                      return result === true;\n                                  }) && beforeDropFile(item)\n                              );\n                          })\n                        : true;\n                },\n                {\n                    filterItems: function filterItems(items) {\n                        var ignoredFiles = root.query('GET_IGNORED_FILES');\n                        return items.filter(function(item) {\n                            if (isFile(item)) {\n                                return !ignoredFiles.includes(item.name.toLowerCase());\n                            }\n                            return true;\n                        });\n                    },\n                    catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n                    requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT'),\n                }\n            );\n\n            hopper.onload = function(items, position) {\n                // get item children elements and sort based on list sort\n                var list = root.ref.list.childViews[0];\n                var visibleChildren = list.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = root\n                    .query('GET_ACTIVE_ITEMS')\n                    .map(function(item) {\n                        return visibleChildren.find(function(child) {\n                            return child.id === item.id;\n                        });\n                    })\n                    .filter(function(item) {\n                        return item;\n                    });\n\n                applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(function(\n                    queue\n                ) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n\n                    // go\n                    root.dispatch('ADD_ITEMS', {\n                        items: queue,\n                        index: getDragIndex(root.ref.list, children, position),\n                        interactionMethod: InteractionMethod.DROP,\n                    });\n                });\n\n                root.dispatch('DID_DROP', { position: position });\n\n                root.dispatch('DID_END_DRAG', { position: position });\n            };\n\n            hopper.ondragstart = function(position) {\n                root.dispatch('DID_START_DRAG', { position: position });\n            };\n\n            hopper.ondrag = debounce(function(position) {\n                root.dispatch('DID_DRAG', { position: position });\n            });\n\n            hopper.ondragend = function(position) {\n                root.dispatch('DID_END_DRAG', { position: position });\n            };\n\n            root.ref.hopper = hopper;\n\n            root.ref.drip = root.appendChildView(root.createChildView(drip));\n        } else if (!enabled && root.ref.hopper) {\n            root.ref.hopper.destroy();\n            root.ref.hopper = null;\n            root.removeChildView(root.ref.drip);\n        }\n    };\n\n    /**\n     * Enable or disable browse functionality\n     */\n    var toggleBrowse = function toggleBrowse(root, props) {\n        var isAllowed = root.query('GET_ALLOW_BROWSE');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.browser) {\n            root.ref.browser = root.appendChildView(\n                root.createChildView(\n                    browser,\n                    Object.assign({}, props, {\n                        onload: function onload(items) {\n                            applyFilterChain('ADD_ITEMS', items, {\n                                dispatch: root.dispatch,\n                            }).then(function(queue) {\n                                // these files don't fit so stop here\n                                if (exceedsMaxFiles(root, queue)) return false;\n\n                                // add items!\n                                root.dispatch('ADD_ITEMS', {\n                                    items: queue,\n                                    index: -1,\n                                    interactionMethod: InteractionMethod.BROWSE,\n                                });\n                            });\n                        },\n                    })\n                ),\n\n                0\n            );\n        } else if (!enabled && root.ref.browser) {\n            root.removeChildView(root.ref.browser);\n            root.ref.browser = null;\n        }\n    };\n\n    /**\n     * Enable or disable paste functionality\n     */\n    var togglePaste = function togglePaste(root) {\n        var isAllowed = root.query('GET_ALLOW_PASTE');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.paster) {\n            root.ref.paster = createPaster();\n            root.ref.paster.onload = function(items) {\n                applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(function(\n                    queue\n                ) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n\n                    // add items!\n                    root.dispatch('ADD_ITEMS', {\n                        items: queue,\n                        index: -1,\n                        interactionMethod: InteractionMethod.PASTE,\n                    });\n                });\n            };\n        } else if (!enabled && root.ref.paster) {\n            root.ref.paster.destroy();\n            root.ref.paster = null;\n        }\n    };\n\n    /**\n     * Route actions\n     */\n    var route$5 = createRoute({\n        DID_SET_ALLOW_BROWSE: function DID_SET_ALLOW_BROWSE(_ref5) {\n            var root = _ref5.root,\n                props = _ref5.props;\n            toggleBrowse(root, props);\n        },\n        DID_SET_ALLOW_DROP: function DID_SET_ALLOW_DROP(_ref6) {\n            var root = _ref6.root;\n            toggleDrop(root);\n        },\n        DID_SET_ALLOW_PASTE: function DID_SET_ALLOW_PASTE(_ref7) {\n            var root = _ref7.root;\n            togglePaste(root);\n        },\n        DID_SET_DISABLED: function DID_SET_DISABLED(_ref8) {\n            var root = _ref8.root,\n                props = _ref8.props;\n            toggleDrop(root);\n            togglePaste(root);\n            toggleBrowse(root, props);\n            var isDisabled = root.query('GET_DISABLED');\n            if (isDisabled) {\n                root.element.dataset.disabled = 'disabled';\n            } else {\n                // delete root.element.dataset.disabled; <= this does not work on iOS 10\n                root.element.removeAttribute('data-disabled');\n            }\n        },\n    });\n\n    var root = createView({\n        name: 'root',\n        read: function read(_ref9) {\n            var root = _ref9.root;\n            if (root.ref.measure) {\n                root.ref.measureHeight = root.ref.measure.offsetHeight;\n            }\n        },\n        create: create$e,\n        write: write$9,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            if (root.ref.paster) {\n                root.ref.paster.destroy();\n            }\n            if (root.ref.hopper) {\n                root.ref.hopper.destroy();\n            }\n            root.element.removeEventListener('touchmove', prevent);\n            root.element.removeEventListener('gesturestart', prevent);\n        },\n        mixins: {\n            styles: ['height'],\n        },\n    });\n\n    // creates the app\n    var createApp = function createApp() {\n        var initialOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // let element\n        var originalElement = null;\n\n        // get default options\n        var defaultOptions = getOptions();\n\n        // create the data store, this will contain all our app info\n        var store = createStore(\n            // initial state (should be serializable)\n            createInitialState(defaultOptions),\n\n            // queries\n            [queries, createOptionQueries(defaultOptions)],\n\n            // action handlers\n            [actions, createOptionActions(defaultOptions)]\n        );\n\n        // set initial options\n        store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n        // kick thread if visibility changes\n        var visibilityHandler = function visibilityHandler() {\n            if (document.hidden) return;\n            store.dispatch('KICK');\n        };\n        document.addEventListener('visibilitychange', visibilityHandler);\n\n        // re-render on window resize start and finish\n        var resizeDoneTimer = null;\n        var isResizing = false;\n        var isResizingHorizontally = false;\n        var initialWindowWidth = null;\n        var currentWindowWidth = null;\n        var resizeHandler = function resizeHandler() {\n            if (!isResizing) {\n                isResizing = true;\n            }\n            clearTimeout(resizeDoneTimer);\n            resizeDoneTimer = setTimeout(function() {\n                isResizing = false;\n                initialWindowWidth = null;\n                currentWindowWidth = null;\n                if (isResizingHorizontally) {\n                    isResizingHorizontally = false;\n                    store.dispatch('DID_STOP_RESIZE');\n                }\n            }, 500);\n        };\n        window.addEventListener('resize', resizeHandler);\n\n        // render initial view\n        var view = root(store, { id: getUniqueId() });\n\n        //\n        // PRIVATE API -------------------------------------------------------------------------------------\n        //\n        var isResting = false;\n        var isHidden = false;\n\n        var readWriteApi = {\n            // necessary for update loop\n\n            /**\n             * Reads from dom (never call manually)\n             * @private\n             */\n            _read: function _read() {\n                // test if we're resizing horizontally\n                // TODO: see if we can optimize this by measuring root rect\n                if (isResizing) {\n                    currentWindowWidth = window.innerWidth;\n                    if (!initialWindowWidth) {\n                        initialWindowWidth = currentWindowWidth;\n                    }\n\n                    if (!isResizingHorizontally && currentWindowWidth !== initialWindowWidth) {\n                        store.dispatch('DID_START_RESIZE');\n                        isResizingHorizontally = true;\n                    }\n                }\n\n                if (isHidden && isResting) {\n                    // test if is no longer hidden\n                    isResting = view.element.offsetParent === null;\n                }\n\n                // if resting, no need to read as numbers will still all be correct\n                if (isResting) return;\n\n                // read view data\n                view._read();\n\n                // if is hidden we need to know so we exit rest mode when revealed\n                isHidden = view.rect.element.hidden;\n            },\n\n            /**\n             * Writes to dom (never call manually)\n             * @private\n             */\n            _write: function _write(ts) {\n                // get all actions from store\n                var actions = store\n                    .processActionQueue()\n\n                    // filter out set actions (these will automatically trigger DID_SET)\n                    .filter(function(action) {\n                        return !/^SET_/.test(action.type);\n                    });\n\n                // if was idling and no actions stop here\n                if (isResting && !actions.length) return;\n\n                // some actions might trigger events\n                routeActionsToEvents(actions);\n\n                // update the view\n                isResting = view._write(ts, actions, isResizingHorizontally);\n\n                // will clean up all archived items\n                removeReleasedItems(store.query('GET_ITEMS'));\n\n                // now idling\n                if (isResting) {\n                    store.processDispatchQueue();\n                }\n            },\n        };\n\n        //\n        // EXPOSE EVENTS -------------------------------------------------------------------------------------\n        //\n        var createEvent = function createEvent(name) {\n            return function(data) {\n                // create default event\n                var event = {\n                    type: name,\n                };\n\n                // no data to add\n                if (!data) {\n                    return event;\n                }\n\n                // copy relevant props\n                if (data.hasOwnProperty('error')) {\n                    event.error = data.error ? Object.assign({}, data.error) : null;\n                }\n\n                if (data.status) {\n                    event.status = Object.assign({}, data.status);\n                }\n\n                if (data.file) {\n                    event.output = data.file;\n                }\n\n                // only source is available, else add item if possible\n                if (data.source) {\n                    event.file = data.source;\n                } else if (data.item || data.id) {\n                    var item = data.item ? data.item : store.query('GET_ITEM', data.id);\n                    event.file = item ? createItemAPI(item) : null;\n                }\n\n                // map all items in a possible items array\n                if (data.items) {\n                    event.items = data.items.map(createItemAPI);\n                }\n\n                // if this is a progress event add the progress amount\n                if (/progress/.test(name)) {\n                    event.progress = data.progress;\n                }\n\n                // copy relevant props\n                if (data.hasOwnProperty('origin') && data.hasOwnProperty('target')) {\n                    event.origin = data.origin;\n                    event.target = data.target;\n                }\n\n                return event;\n            };\n        };\n\n        var eventRoutes = {\n            DID_DESTROY: createEvent('destroy'),\n\n            DID_INIT: createEvent('init'),\n\n            DID_THROW_MAX_FILES: createEvent('warning'),\n\n            DID_INIT_ITEM: createEvent('initfile'),\n            DID_START_ITEM_LOAD: createEvent('addfilestart'),\n            DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n            DID_LOAD_ITEM: createEvent('addfile'),\n\n            DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n            DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n            DID_THROW_ITEM_REMOVE_ERROR: [createEvent('error'), createEvent('removefile')],\n\n            DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n            DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n            DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n            DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n            DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n            DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n            DID_THROW_ITEM_PROCESSING_ERROR: [createEvent('error'), createEvent('processfile')],\n\n            DID_REMOVE_ITEM: createEvent('removefile'),\n\n            DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n            DID_ACTIVATE_ITEM: createEvent('activatefile'),\n\n            DID_REORDER_ITEMS: createEvent('reorderfiles'),\n        };\n\n        var exposeEvent = function exposeEvent(event) {\n            // create event object to be dispatched\n            var detail = Object.assign({ pond: exports }, event);\n            delete detail.type;\n            view.element.dispatchEvent(\n                new CustomEvent('FilePond:' + event.type, {\n                    // event info\n                    detail: detail,\n\n                    // event behaviour\n                    bubbles: true,\n                    cancelable: true,\n                    composed: true, // triggers listeners outside of shadow root\n                })\n            );\n\n            // event object to params used for `on()` event handlers and callbacks `oninit()`\n            var params = [];\n\n            // if is possible error event, make it the first param\n            if (event.hasOwnProperty('error')) {\n                params.push(event.error);\n            }\n\n            // file is always section\n            if (event.hasOwnProperty('file')) {\n                params.push(event.file);\n            }\n\n            // append other props\n            var filtered = ['type', 'error', 'file'];\n            Object.keys(event)\n                .filter(function(key) {\n                    return !filtered.includes(key);\n                })\n                .forEach(function(key) {\n                    return params.push(event[key]);\n                });\n\n            // on(type, () => { })\n            exports.fire.apply(exports, [event.type].concat(params));\n\n            // oninit = () => {}\n            var handler = store.query('GET_ON' + event.type.toUpperCase());\n            if (handler) {\n                handler.apply(void 0, params);\n            }\n        };\n\n        var routeActionsToEvents = function routeActionsToEvents(actions) {\n            if (!actions.length) return;\n            actions\n                .filter(function(action) {\n                    return eventRoutes[action.type];\n                })\n                .forEach(function(action) {\n                    var routes = eventRoutes[action.type];\n                    (Array.isArray(routes) ? routes : [routes]).forEach(function(route) {\n                        // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n                        if (action.type === 'DID_INIT_ITEM') {\n                            exposeEvent(route(action.data));\n                        } else {\n                            setTimeout(function() {\n                                exposeEvent(route(action.data));\n                            }, 0);\n                        }\n                    });\n                });\n        };\n\n        //\n        // PUBLIC API -------------------------------------------------------------------------------------\n        //\n        var setOptions = function setOptions(options) {\n            return store.dispatch('SET_OPTIONS', { options: options });\n        };\n\n        var getFile = function getFile(query) {\n            return store.query('GET_ACTIVE_ITEM', query);\n        };\n\n        var prepareFile = function prepareFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch('REQUEST_ITEM_PREPARE', {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    },\n                });\n            });\n        };\n\n        var addFile = function addFile(source) {\n            var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            return new Promise(function(resolve, reject) {\n                addFiles([{ source: source, options: options }], { index: options.index })\n                    .then(function(items) {\n                        return resolve(items && items[0]);\n                    })\n                    .catch(reject);\n            });\n        };\n\n        var isFilePondFile = function isFilePondFile(obj) {\n            return obj.file && obj.id;\n        };\n\n        var removeFile = function removeFile(query, options) {\n            // if only passed options\n            if (typeof query === 'object' && !isFilePondFile(query) && !options) {\n                options = query;\n                query = undefined;\n            }\n\n            // request item removal\n            store.dispatch('REMOVE_ITEM', Object.assign({}, options, { query: query }));\n\n            // see if item has been removed\n            return store.query('GET_ACTIVE_ITEM', query) === null;\n        };\n\n        var addFiles = function addFiles() {\n            for (\n                var _len = arguments.length, args = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                args[_key] = arguments[_key];\n            }\n            return new Promise(function(resolve, reject) {\n                var sources = [];\n                var options = {};\n\n                // user passed a sources array\n                if (isArray(args[0])) {\n                    sources.push.apply(sources, args[0]);\n                    Object.assign(options, args[1] || {});\n                } else {\n                    // user passed sources as arguments, last one might be options object\n                    var lastArgument = args[args.length - 1];\n                    if (typeof lastArgument === 'object' && !(lastArgument instanceof Blob)) {\n                        Object.assign(options, args.pop());\n                    }\n\n                    // add rest to sources\n                    sources.push.apply(sources, args);\n                }\n\n                store.dispatch('ADD_ITEMS', {\n                    items: sources,\n                    index: options.index,\n                    interactionMethod: InteractionMethod.API,\n                    success: resolve,\n                    failure: reject,\n                });\n            });\n        };\n\n        var getFiles = function getFiles() {\n            return store.query('GET_ACTIVE_ITEMS');\n        };\n\n        var processFile = function processFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch('REQUEST_ITEM_PROCESSING', {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    },\n                });\n            });\n        };\n\n        var prepareFiles = function prepareFiles() {\n            for (\n                var _len2 = arguments.length, args = new Array(_len2), _key2 = 0;\n                _key2 < _len2;\n                _key2++\n            ) {\n                args[_key2] = arguments[_key2];\n            }\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            var items = queries.length ? queries : getFiles();\n            return Promise.all(items.map(prepareFile));\n        };\n\n        var processFiles = function processFiles() {\n            for (\n                var _len3 = arguments.length, args = new Array(_len3), _key3 = 0;\n                _key3 < _len3;\n                _key3++\n            ) {\n                args[_key3] = arguments[_key3];\n            }\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            if (!queries.length) {\n                var files = getFiles().filter(function(item) {\n                    return (\n                        !(item.status === ItemStatus.IDLE && item.origin === FileOrigin.LOCAL) &&\n                        item.status !== ItemStatus.PROCESSING &&\n                        item.status !== ItemStatus.PROCESSING_COMPLETE &&\n                        item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n                    );\n                });\n\n                return Promise.all(files.map(processFile));\n            }\n            return Promise.all(queries.map(processFile));\n        };\n\n        var removeFiles = function removeFiles() {\n            for (\n                var _len4 = arguments.length, args = new Array(_len4), _key4 = 0;\n                _key4 < _len4;\n                _key4++\n            ) {\n                args[_key4] = arguments[_key4];\n            }\n\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n\n            var options;\n            if (typeof queries[queries.length - 1] === 'object') {\n                options = queries.pop();\n            } else if (Array.isArray(args[0])) {\n                options = args[1];\n            }\n\n            var files = getFiles();\n\n            if (!queries.length)\n                return Promise.all(\n                    files.map(function(file) {\n                        return removeFile(file, options);\n                    })\n                );\n\n            // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n            var mappedQueries = queries\n                .map(function(query) {\n                    return isNumber(query) ? (files[query] ? files[query].id : null) : query;\n                })\n                .filter(function(query) {\n                    return query;\n                });\n\n            return mappedQueries.map(function(q) {\n                return removeFile(q, options);\n            });\n        };\n\n        var exports = Object.assign(\n            {},\n\n            on(),\n            {},\n\n            readWriteApi,\n            {},\n\n            createOptionAPI(store, defaultOptions),\n            {\n                /**\n                 * Override options defined in options object\n                 * @param options\n                 */\n                setOptions: setOptions,\n\n                /**\n                 * Load the given file\n                 * @param source - the source of the file (either a File, base64 data uri or url)\n                 * @param options - object, { index: 0 }\n                 */\n                addFile: addFile,\n\n                /**\n                 * Load the given files\n                 * @param sources - the sources of the files to load\n                 * @param options - object, { index: 0 }\n                 */\n                addFiles: addFiles,\n\n                /**\n                 * Returns the file objects matching the given query\n                 * @param query { string, number, null }\n                 */\n                getFile: getFile,\n\n                /**\n                 * Upload file with given name\n                 * @param query { string, number, null  }\n                 */\n                processFile: processFile,\n\n                /**\n                 * Request prepare output for file with given name\n                 * @param query { string, number, null  }\n                 */\n                prepareFile: prepareFile,\n\n                /**\n                 * Removes a file by its name\n                 * @param query { string, number, null  }\n                 */\n                removeFile: removeFile,\n\n                /**\n                 * Moves a file to a new location in the files list\n                 */\n                moveFile: function moveFile(query, index) {\n                    return store.dispatch('MOVE_ITEM', { query: query, index: index });\n                },\n\n                /**\n                 * Returns all files (wrapped in public api)\n                 */\n                getFiles: getFiles,\n\n                /**\n                 * Starts uploading all files\n                 */\n                processFiles: processFiles,\n\n                /**\n                 * Clears all files from the files list\n                 */\n                removeFiles: removeFiles,\n\n                /**\n                 * Starts preparing output of all files\n                 */\n                prepareFiles: prepareFiles,\n\n                /**\n                 * Sort list of files\n                 */\n                sort: function sort(compare) {\n                    return store.dispatch('SORT', { compare: compare });\n                },\n\n                /**\n                 * Browse the file system for a file\n                 */\n                browse: function browse() {\n                    // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n                    var input = view.element.querySelector('input[type=file]');\n                    if (input) {\n                        input.click();\n                    }\n                },\n\n                /**\n                 * Destroys the app\n                 */\n                destroy: function destroy() {\n                    // request destruction\n                    exports.fire('destroy', view.element);\n\n                    // stop active processes (file uploads, fetches, stuff like that)\n                    // loop over items and depending on states call abort for ongoing processes\n                    store.dispatch('ABORT_ALL');\n\n                    // destroy view\n                    view._destroy();\n\n                    // stop listening to resize\n                    window.removeEventListener('resize', resizeHandler);\n\n                    // stop listening to the visiblitychange event\n                    document.removeEventListener('visibilitychange', visibilityHandler);\n\n                    // dispatch destroy\n                    store.dispatch('DID_DESTROY');\n                },\n\n                /**\n                 * Inserts the plugin before the target element\n                 */\n                insertBefore: function insertBefore$1(element) {\n                    return insertBefore(view.element, element);\n                },\n\n                /**\n                 * Inserts the plugin after the target element\n                 */\n                insertAfter: function insertAfter$1(element) {\n                    return insertAfter(view.element, element);\n                },\n\n                /**\n                 * Appends the plugin to the target element\n                 */\n                appendTo: function appendTo(element) {\n                    return element.appendChild(view.element);\n                },\n\n                /**\n                 * Replaces an element with the app\n                 */\n                replaceElement: function replaceElement(element) {\n                    // insert the app before the element\n                    insertBefore(view.element, element);\n\n                    // remove the original element\n                    element.parentNode.removeChild(element);\n\n                    // remember original element\n                    originalElement = element;\n                },\n\n                /**\n                 * Restores the original element\n                 */\n                restoreElement: function restoreElement() {\n                    if (!originalElement) {\n                        return; // no element to restore\n                    }\n\n                    // restore original element\n                    insertAfter(originalElement, view.element);\n\n                    // remove our element\n                    view.element.parentNode.removeChild(view.element);\n\n                    // remove reference\n                    originalElement = null;\n                },\n\n                /**\n                 * Returns true if the app root is attached to given element\n                 * @param element\n                 */\n                isAttachedTo: function isAttachedTo(element) {\n                    return view.element === element || originalElement === element;\n                },\n\n                /**\n                 * Returns the root element\n                 */\n                element: {\n                    get: function get() {\n                        return view.element;\n                    },\n                },\n\n                /**\n                 * Returns the current pond status\n                 */\n                status: {\n                    get: function get() {\n                        return store.query('GET_STATUS');\n                    },\n                },\n            }\n        );\n\n        // Done!\n        store.dispatch('DID_INIT');\n\n        // create actual api object\n        return createObject(exports);\n    };\n\n    var createAppObject = function createAppObject() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // default options\n        var defaultOptions = {};\n        forin(getOptions(), function(key, value) {\n            defaultOptions[key] = value[0];\n        });\n\n        // set app options\n        var app = createApp(\n            Object.assign(\n                {},\n\n                defaultOptions,\n                {},\n\n                customOptions\n            )\n        );\n\n        // return the plugin instance\n        return app;\n    };\n\n    var lowerCaseFirstLetter = function lowerCaseFirstLetter(string) {\n        return string.charAt(0).toLowerCase() + string.slice(1);\n    };\n\n    var attributeNameToPropertyName = function attributeNameToPropertyName(attributeName) {\n        return toCamels(attributeName.replace(/^data-/, ''));\n    };\n\n    var mapObject = function mapObject(object, propertyMap) {\n        // remove unwanted\n        forin(propertyMap, function(selector, mapping) {\n            forin(object, function(property, value) {\n                // create regexp shortcut\n                var selectorRegExp = new RegExp(selector);\n\n                // tests if\n                var matches = selectorRegExp.test(property);\n\n                // no match, skip\n                if (!matches) {\n                    return;\n                }\n\n                // if there's a mapping, the original property is always removed\n                delete object[property];\n\n                // should only remove, we done!\n                if (mapping === false) {\n                    return;\n                }\n\n                // move value to new property\n                if (isString(mapping)) {\n                    object[mapping] = value;\n                    return;\n                }\n\n                // move to group\n                var group = mapping.group;\n                if (isObject(mapping) && !object[group]) {\n                    object[group] = {};\n                }\n\n                object[group][lowerCaseFirstLetter(property.replace(selectorRegExp, ''))] = value;\n            });\n\n            // do submapping\n            if (mapping.mapping) {\n                mapObject(object[mapping.group], mapping.mapping);\n            }\n        });\n    };\n\n    var getAttributesAsObject = function getAttributesAsObject(node) {\n        var attributeMapping =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        // turn attributes into object\n        var attributes = [];\n        forin(node.attributes, function(index) {\n            attributes.push(node.attributes[index]);\n        });\n\n        var output = attributes\n            .filter(function(attribute) {\n                return attribute.name;\n            })\n            .reduce(function(obj, attribute) {\n                var value = attr(node, attribute.name);\n\n                obj[attributeNameToPropertyName(attribute.name)] =\n                    value === attribute.name ? true : value;\n                return obj;\n            }, {});\n\n        // do mapping of object properties\n        mapObject(output, attributeMapping);\n\n        return output;\n    };\n\n    var createAppAtElement = function createAppAtElement(element) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        // how attributes of the input element are mapped to the options for the plugin\n        var attributeMapping = {\n            // translate to other name\n            '^class$': 'className',\n            '^multiple$': 'allowMultiple',\n            '^capture$': 'captureMethod',\n            '^webkitdirectory$': 'allowDirectoriesOnly',\n\n            // group under single property\n            '^server': {\n                group: 'server',\n                mapping: {\n                    '^process': {\n                        group: 'process',\n                    },\n\n                    '^revert': {\n                        group: 'revert',\n                    },\n\n                    '^fetch': {\n                        group: 'fetch',\n                    },\n\n                    '^restore': {\n                        group: 'restore',\n                    },\n\n                    '^load': {\n                        group: 'load',\n                    },\n                },\n            },\n\n            // don't include in object\n            '^type$': false,\n            '^files$': false,\n        };\n\n        // add additional option translators\n        applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n        // create final options object by setting options object and then overriding options supplied on element\n        var mergedOptions = Object.assign({}, options);\n\n        var attributeOptions = getAttributesAsObject(\n            element.nodeName === 'FIELDSET' ? element.querySelector('input[type=file]') : element,\n            attributeMapping\n        );\n\n        // merge with options object\n        Object.keys(attributeOptions).forEach(function(key) {\n            if (isObject(attributeOptions[key])) {\n                if (!isObject(mergedOptions[key])) {\n                    mergedOptions[key] = {};\n                }\n                Object.assign(mergedOptions[key], attributeOptions[key]);\n            } else {\n                mergedOptions[key] = attributeOptions[key];\n            }\n        });\n\n        // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n        // these will then be automatically set to the initial files\n        mergedOptions.files = (options.files || []).concat(\n            Array.from(element.querySelectorAll('input:not([type=file])')).map(function(input) {\n                return {\n                    source: input.value,\n                    options: {\n                        type: input.dataset.type,\n                    },\n                };\n            })\n        );\n\n        // build plugin\n        var app = createAppObject(mergedOptions);\n\n        // add already selected files\n        if (element.files) {\n            Array.from(element.files).forEach(function(file) {\n                app.addFile(file);\n            });\n        }\n\n        // replace the target element\n        app.replaceElement(element);\n\n        // expose\n        return app;\n    };\n\n    // if an element is passed, we create the instance at that element, if not, we just create an up object\n    var createApp$1 = function createApp() {\n        return isNode(arguments.length <= 0 ? undefined : arguments[0])\n            ? createAppAtElement.apply(void 0, arguments)\n            : createAppObject.apply(void 0, arguments);\n    };\n\n    var PRIVATE_METHODS = ['fire', '_read', '_write'];\n\n    var createAppAPI = function createAppAPI(app) {\n        var api = {};\n\n        copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n        return api;\n    };\n\n    /**\n     * Replaces placeholders in given string with replacements\n     * @param string - \"Foo {bar}\"\"\n     * @param replacements - { \"bar\": 10 }\n     */\n    var replaceInString = function replaceInString(string, replacements) {\n        return string.replace(/(?:{([a-zA-Z]+)})/g, function(match, group) {\n            return replacements[group];\n        });\n    };\n\n    var createWorker = function createWorker(fn) {\n        var workerBlob = new Blob(['(', fn.toString(), ')()'], {\n            type: 'application/javascript',\n        });\n\n        var workerURL = URL.createObjectURL(workerBlob);\n        var worker = new Worker(workerURL);\n\n        return {\n            transfer: function transfer(message, cb) {},\n            post: function post(message, cb, transferList) {\n                var id = getUniqueId();\n\n                worker.onmessage = function(e) {\n                    if (e.data.id === id) {\n                        cb(e.data.message);\n                    }\n                };\n\n                worker.postMessage(\n                    {\n                        id: id,\n                        message: message,\n                    },\n\n                    transferList\n                );\n            },\n            terminate: function terminate() {\n                worker.terminate();\n                URL.revokeObjectURL(workerURL);\n            },\n        };\n    };\n\n    var loadImage = function loadImage(url) {\n        return new Promise(function(resolve, reject) {\n            var img = new Image();\n            img.onload = function() {\n                resolve(img);\n            };\n            img.onerror = function(e) {\n                reject(e);\n            };\n            img.src = url;\n        });\n    };\n\n    var renameFile = function renameFile(file, name) {\n        var renamedFile = file.slice(0, file.size, file.type);\n        renamedFile.lastModifiedDate = file.lastModifiedDate;\n        renamedFile.name = name;\n        return renamedFile;\n    };\n\n    var copyFile = function copyFile(file) {\n        return renameFile(file, file.name);\n    };\n\n    // already registered plugins (can't register twice)\n    var registeredPlugins = [];\n\n    // pass utils to plugin\n    var createAppPlugin = function createAppPlugin(plugin) {\n        // already registered\n        if (registeredPlugins.includes(plugin)) {\n            return;\n        }\n\n        // remember this plugin\n        registeredPlugins.push(plugin);\n\n        // setup!\n        var pluginOutline = plugin({\n            addFilter: addFilter,\n            utils: {\n                Type: Type,\n                forin: forin,\n                isString: isString,\n                isFile: isFile,\n                toNaturalFileSize: toNaturalFileSize,\n                replaceInString: replaceInString,\n                getExtensionFromFilename: getExtensionFromFilename,\n                getFilenameWithoutExtension: getFilenameWithoutExtension,\n                guesstimateMimeType: guesstimateMimeType,\n                getFileFromBlob: getFileFromBlob,\n                getFilenameFromURL: getFilenameFromURL,\n                createRoute: createRoute,\n                createWorker: createWorker,\n                createView: createView,\n                createItemAPI: createItemAPI,\n                loadImage: loadImage,\n                copyFile: copyFile,\n                renameFile: renameFile,\n                createBlob: createBlob,\n                applyFilterChain: applyFilterChain,\n                text: text,\n                getNumericAspectRatioFromString: getNumericAspectRatioFromString,\n            },\n\n            views: {\n                fileActionButton: fileActionButton,\n            },\n        });\n\n        // add plugin options to default options\n        extendDefaultOptions(pluginOutline.options);\n    };\n\n    // feature detection used by supported() method\n    var isOperaMini = function isOperaMini() {\n        return Object.prototype.toString.call(window.operamini) === '[object OperaMini]';\n    };\n    var hasPromises = function hasPromises() {\n        return 'Promise' in window;\n    };\n    var hasBlobSlice = function hasBlobSlice() {\n        return 'slice' in Blob.prototype;\n    };\n    var hasCreateObjectURL = function hasCreateObjectURL() {\n        return 'URL' in window && 'createObjectURL' in window.URL;\n    };\n    var hasVisibility = function hasVisibility() {\n        return 'visibilityState' in document;\n    };\n    var hasTiming = function hasTiming() {\n        return 'performance' in window;\n    }; // iOS 8.x\n    var hasCSSSupports = function hasCSSSupports() {\n        return 'supports' in (window.CSS || {});\n    }; // use to detect Safari 9+\n    var isIE11 = function isIE11() {\n        return /MSIE|Trident/.test(window.navigator.userAgent);\n    };\n\n    var supported = (function() {\n        // Runs immediately and then remembers result for subsequent calls\n        var isSupported =\n            // Has to be a browser\n            isBrowser() &&\n            // Can't run on Opera Mini due to lack of everything\n            !isOperaMini() &&\n            // Require these APIs to feature detect a modern browser\n            hasVisibility() &&\n            hasPromises() &&\n            hasBlobSlice() &&\n            hasCreateObjectURL() &&\n            hasTiming() &&\n            // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n            (hasCSSSupports() || isIE11());\n\n        return function() {\n            return isSupported;\n        };\n    })();\n\n    /**\n     * Plugin internal state (over all instances)\n     */\n    var state = {\n        // active app instances, used to redraw the apps and to find the later\n        apps: [],\n    };\n\n    // plugin name\n    var name = 'filepond';\n\n    /**\n     * Public Plugin methods\n     */\n    var fn = function fn() {};\n    exports.Status = {};\n    exports.FileStatus = {};\n    exports.FileOrigin = {};\n    exports.OptionTypes = {};\n    exports.create = fn;\n    exports.destroy = fn;\n    exports.parse = fn;\n    exports.find = fn;\n    exports.registerPlugin = fn;\n    exports.getOptions = fn;\n    exports.setOptions = fn;\n\n    // if not supported, no API\n    if (supported()) {\n        // start painter and fire load event\n        createPainter(\n            function() {\n                state.apps.forEach(function(app) {\n                    return app._read();\n                });\n            },\n            function(ts) {\n                state.apps.forEach(function(app) {\n                    return app._write(ts);\n                });\n            }\n        );\n\n        // fire loaded event so we know when FilePond is available\n        var dispatch = function dispatch() {\n            // let others know we have area ready\n            document.dispatchEvent(\n                new CustomEvent('FilePond:loaded', {\n                    detail: {\n                        supported: supported,\n                        create: exports.create,\n                        destroy: exports.destroy,\n                        parse: exports.parse,\n                        find: exports.find,\n                        registerPlugin: exports.registerPlugin,\n                        setOptions: exports.setOptions,\n                    },\n                })\n            );\n\n            // clean up event\n            document.removeEventListener('DOMContentLoaded', dispatch);\n        };\n\n        if (document.readyState !== 'loading') {\n            // move to back of execution queue, FilePond should have been exported by then\n            setTimeout(function() {\n                return dispatch();\n            }, 0);\n        } else {\n            document.addEventListener('DOMContentLoaded', dispatch);\n        }\n\n        // updates the OptionTypes object based on the current options\n        var updateOptionTypes = function updateOptionTypes() {\n            return forin(getOptions(), function(key, value) {\n                exports.OptionTypes[key] = value[1];\n            });\n        };\n\n        exports.Status = Object.assign({}, Status);\n        exports.FileOrigin = Object.assign({}, FileOrigin);\n        exports.FileStatus = Object.assign({}, ItemStatus);\n\n        exports.OptionTypes = {};\n        updateOptionTypes();\n\n        // create method, creates apps and adds them to the app array\n        exports.create = function create() {\n            var app = createApp$1.apply(void 0, arguments);\n            app.on('destroy', exports.destroy);\n            state.apps.push(app);\n            return createAppAPI(app);\n        };\n\n        // destroys apps and removes them from the app array\n        exports.destroy = function destroy(hook) {\n            // returns true if the app was destroyed successfully\n            var indexToRemove = state.apps.findIndex(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (indexToRemove >= 0) {\n                // remove from apps\n                var app = state.apps.splice(indexToRemove, 1)[0];\n\n                // restore original dom element\n                app.restoreElement();\n\n                return true;\n            }\n\n            return false;\n        };\n\n        // parses the given context for plugins (does not include the context element itself)\n        exports.parse = function parse(context) {\n            // get all possible hooks\n            var matchedHooks = Array.from(context.querySelectorAll('.' + name));\n\n            // filter out already active hooks\n            var newHooks = matchedHooks.filter(function(newHook) {\n                return !state.apps.find(function(app) {\n                    return app.isAttachedTo(newHook);\n                });\n            });\n\n            // create new instance for each hook\n            return newHooks.map(function(hook) {\n                return exports.create(hook);\n            });\n        };\n\n        // returns an app based on the given element hook\n        exports.find = function find(hook) {\n            var app = state.apps.find(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (!app) {\n                return null;\n            }\n            return createAppAPI(app);\n        };\n\n        // adds a plugin extension\n        exports.registerPlugin = function registerPlugin() {\n            for (\n                var _len = arguments.length, plugins = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                plugins[_key] = arguments[_key];\n            }\n\n            // register plugins\n            plugins.forEach(createAppPlugin);\n\n            // update OptionTypes, each plugin might have extended the default options\n            updateOptionTypes();\n        };\n\n        exports.getOptions = function getOptions$1() {\n            var opts = {};\n            forin(getOptions(), function(key, value) {\n                opts[key] = value[0];\n            });\n            return opts;\n        };\n\n        exports.setOptions = function setOptions$1(opts) {\n            if (isObject(opts)) {\n                // update existing plugins\n                state.apps.forEach(function(app) {\n                    app.setOptions(opts);\n                });\n\n                // override defaults\n                setOptions(opts);\n            }\n\n            // return new options\n            return exports.getOptions();\n        };\n    }\n\n    exports.supported = supported;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n});\n"],"sourceRoot":""}